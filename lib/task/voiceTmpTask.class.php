<?php

class voiceTmpTask extends sfBaseTask
{
  protected function configure()
  {
    // // add your own arguments here
    // $this->addArguments(array(
    //   new sfCommandArgument('my_arg', sfCommandArgument::REQUIRED, 'My argument'),
    // ));

    $this->addOptions(array(
      new sfCommandOption('application', null, sfCommandOption::PARAMETER_REQUIRED, 'The application name','star'),
      new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'dev'),
      new sfCommandOption('connection', null, sfCommandOption::PARAMETER_REQUIRED, 'The connection name', 'doctrine'),
      // add your own options here
    ));

    $this->namespace        = 'voice';
    $this->name             = 'voiceTmp';
    $this->briefDescription = '';
    $this->detailedDescription = <<<EOF
The [voiceTmp|INFO] task does things.
Call it with:

  [php symfony voiceTmp|INFO]
EOF;
  }

  protected function execute($arguments = array(), $options = array())
  {
    // initialize the database connection
    $databaseManager = new sfDatabaseManager($this->configuration);
    $connection = $databaseManager->getDatabase($options['connection'])->getConnection();
    sfContext::createInstance(sfProjectConfiguration::getApplicationConfiguration('star', $options['env'], true));
    // add your code here
    
    $list = new voiceTagUpdateRedisList();
    
    $ids = '1465443,1465366,1465240,1465255,1465256,1465259,1465260,1465261,1465262,1465263,1465264,1465265,1465266,1465267,1465268,1465275,1465274,1465278,1465279,1465280,1465281,1465282,1465283,1465284,1465285,1465286,1465287,1465288,1465290,1465291,1465293,1465294,1465295,1465428,1465296,1465298,1465297,1465299,1465300,1465302,1465301,1465303,1465304,1465305,1465306,1465307,1465308,1465309,1465452,1465312,1465311,1465317,1465315,1465323,1465322,1465348,1465352,1465355,1465360,1465363,1465369,1465382,1465386,1465397,1465404,1465408,1465411,1465410,1465413,1465427,1465415,1465414,1465418,1465464,1465426,1466132,1465419,1465424,1465431,1465425,1465429,1465435,1465447,1465434,1465436,1465439,1465438,1465440,1465442,1465444,1465449,1465450,1465451,1465459,1465456,1465457,1465460,1465461,1465466,1465465,1465468,1465472,1465477,1465469,1465476,1465480,1465481,1465492,1465486,1465490,1465493,1465494,1465510,1465496,1465497,1465499,1465500,1465508,1465503,1465505,1465509,1465512,1465513,1465515,1465517,1465521,1465519,1465531,1465523,1465524,1465528,1465530,1465535,1465536,1465538,1465555,1465539,1465543,1465544,1465545,1465551,1465552,1465553,1465560,1465557,1465556,1465562,1465564,1465566,1465574,1465577,1465578,1465581,1465580,1465582,1465583,1465587,1465584,1465586,1465585,1465588,1465589,1465596,1465600,1465602,1465606,1465608,1465614,1465618,1465619,1465623,1465626,1465629,1465627,1465654,1465630,1465646,1465647,1465632,1465633,1465649,1465653,1465666,1465664,1465668,1465669,1465670,1465671,1465677,1465678,1465680,1465681,1465689,1465688,1465693,1465695,1465696,1465700,1465697,1465699,1465701,1465723,1465706,1465707,1465721,1465715,1465710,1465712,1465716,1465725,1465793,1465730,1465733,1465736,1465738,1465743,1465754,1465748,1465753,1465761,1465762,1465766,1465768,1465772,1465770,1465778,1465789,1465790,1465801,1465804,1465808,1465809,1465810,1465811,1465813,1465815,1465817,1465821,1465822,1465832,1465831,1465836,1465839,1465840,1465844,1465850,1465851,1465854,1465853,1465916,1465857,1465860,1465866,1465863,1465865,1465867,1465868,1465873,1465876,1465884,1465886,1465894,1465893,1465896,1465904,1465907,1465913,1465917,1465927,1465926,1465920,1465925,1465928,1465929,1466171,1465934,1465943,1465949,1465952,1465953,1465954,1465955,1465958,1465963,1465964,1465965,1465966,1465967,1465968,1465969,1465970,1465971,1465972,1465973,1465974,1465975,1465976,1465977,1465978,1465979,1465980,1465981,1465982,1465983,1465985,1465984,1465986,1465987,1465988,1465989,1465990,1465991,1465994,1465992,1465995,1465993,1465997,1465998,1465999,1466000,1466001,1466003,1466002,1466005,1466004,1466006,1466008,1466007,1466009,1466011,1466014,1466015,1466016,1466023,1466033,1466041,1466052,1466057,1466058,1466081,1466061,1466062,1466063,1466065,1466078,1466080,1466079,1466090,1466094,1466100,1466097,1466165,1466107,1466120,1466115,1466118,1466134,1466123,1466125,1466126,1466127,1466128,1466130,1466156,1466133,1466135,1466145,1466136,1466138,1466137,1466139,1466140,1466141,1466143,1466151,1466150,1466149,1466152,1466153,1466158,1466161,1466157,1466159,1466160,1466163,1466167,1466187,1466176,1466173,1466172,1466174,1466175,1466177,1466185,1466178,1466179,1466188,1466180,1466216,1466186,1466194,1466195,1466189,1466191,1466192,1466190,1466193,1466196,1466197,1466204,1466202,1466203,1466205,1466206,1466208,1466211,1466207,1466209,1466213,1466214,1466212,1466215,1466219,1466218,1466217,1466220,1466223,1466226,1466227,1466236,1466231,1466237,1466238,1466239,1466240,1466241,1466242,1466243,1466244,1466245,1466249,1466252,1466260,1466256,1466258,1466259,1466261,1466264,1466268,1466273,1466285,1466303,1466298,1466295,1466290,1466293,1466297,1466302,1466307,1466316,1466318,1466309,1466312,1466320,1466314,1466319,1466315,1466338,1466322,1466340,1466323,1466325,1466330,1466365,1466343,1466341,1466342,1466347,1466345,1466349,1466356,1466359,1466364,1466367,1466369,1466371,1466379,1466383,1466381,1466385,1466389,1466396,1466394,1466398,1466399,1466401,1466410,1466415,1466419,1466429,1466433,1466437,1466434,1466435,1466438';
    $id_array = explode(',', $ids);
    foreach ($id_array as $i)
    {
        $this->log($i);
        $list->addList('message_frontpage_update', $i);
    }
    
    
  }
}
