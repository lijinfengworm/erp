<?php

/**
 * TrdWeiboTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TrdWeiboTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object TrdWeiboTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('TrdWeibo');
    }
    
     public static function myListQuery() {
        $query = self::getInstance()->createQuery('m')
                ->where('m.is_delete = 0')
                ->orderBy('m.created_at desc');
        return $query;
    }
    
    /*
     * 删除单条内容
     */
    public static function deleteMessage($id=0) {
        $queryResult = self::getInstance()->createQuery('m')
                        ->update()
                        ->set('m.is_delete', 1)
                        ->where('m.id =?', $id)
                        ->execute();
        return $queryResult;
    }

    /*
     * 删除多条内容
     */

    public static function deleteMessages($ids) {
        if (empty($ids))
            return false;
        return self::getInstance()->createQuery('m')
                        ->update()
                        ->set('is_delete', 1)
                        ->whereIn('m.id', $ids)
                        ->execute();
    }
}