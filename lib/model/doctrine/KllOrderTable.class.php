<?php

/**
 * KllOrderTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class KllOrderTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object KllOrderTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('KllOrder');
    }
    /**
     * 获得子订单
     * @param $status
     */
    public static function getAllOrder($order_number) {
        $data = self::getInstance()->createQuery();
        $data->select("name, description, number as quantity, total_price as amount, receiver")
             ->where("order_number = ?",$order_number);
        $order = $data->fetchArray();
        if(!empty($order)){
            foreach ($order as $key => &$it) {
                $it['amount'] = (string)($it['amount'] * 100);
            }
        }
        return $order;
    }
}