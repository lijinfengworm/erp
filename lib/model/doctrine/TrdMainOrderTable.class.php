<?php

/**
 * TrdMainOrderTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TrdMainOrderTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object TrdMainOrderTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('TrdMainOrder');
    }

    /**
     * 获取一条数据
     * @param $order_number  订单id
     * @param bool $is_toArray  是否转成数组
     * @param bool $is_all     是否全部展示
     */
    public static function getOne($order_number,$is_toArray = false,$field = false,$is_all = true) {
        $info = self::getInstance()
            ->createQuery()
            ->select('*')
            ->andWhere('order_number = ?',$order_number)
            ->fetchOne();
        if(empty($info)) return false;
        if(!$is_toArray) return $info;
        $info = $info->toArray();
        //转换 json
        $info['address_attr'] = json_decode($info['address_attr'],true);
        if($field) {
            return $info[$field];
        } else {
            return $info;
        }
        return $info;
    }
}