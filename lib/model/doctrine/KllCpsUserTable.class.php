<?php

/**
 * KllCpsUserTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class KllCpsUserTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object KllCpsUserTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('KllCpsUser');
    }


    /**
     * 判断某个字段是否存在
     */
    public static function isHasField($field,$value,$id) {
        $flag = self::getInstance()
            ->createQuery()
            ->select('id')
            ->andWhere($field.' = ?',$value);
        if(!empty($id)) {
            $flag->andWhere('id <> ?',$id);
        }
        return $flag->fetchOne();
    }

    /**
     * 获取一条会员信息
     */
    public static function getOne($id,$field = '') {
        $userInfo = self::getInstance()
            ->createQuery()
            ->select('*')
            ->andWhere('id = ?',$id)
            ->fetchOne();
        if(empty($userInfo)) return false;
        $userInfo = $userInfo->toArray();
        if(empty($field)) return $userInfo;
        return $userInfo[$field];
    }


    /**
     * 通过后台ID查询
     * @param $id
     * @param string $field
     * @return bool
     */
    public static function getByHupuIdOne($hupuid,$field = '') {
        $userInfo = self::getInstance()
            ->createQuery()
            ->select('*')
            ->andWhere('hupu_uid = ?',$hupuid)
            ->fetchOne();
        if(empty($userInfo)) return false;
        $userInfo = $userInfo->toArray();
        if(empty($field)) return $userInfo;
        return $userInfo[$field];
    }



    /**
     * 通过unionid查询
     * @param $id
     * @param string $field
     * @return bool
     */
    public static function getByUnionIdOne($union_id,$field = '') {
        $userInfo = self::getInstance()
            ->createQuery()
            ->select('*')
            ->andWhere('union_id = ?',$union_id)
            ->fetchOne();
        if(empty($userInfo)) return false;
        $userInfo = $userInfo->toArray();
        if(empty($field)) return $userInfo;
        return $userInfo[$field];
    }











}