<?php

/**
 * KaluliMainOrderAttr
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    HC
 * @subpackage model
 * @author     HoopChina.com Dev Team
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class KaluliMainOrderAttr extends BaseKaluliMainOrderAttr
{

    private $attribulte_array = false;

    public static function getInstance(){
        return Doctrine_Core::getTable('KaluliMainOrderAttr');
    }
    //返回收货地址的格式化后的地址
    public function getAddressAttrFormat() {
        $_address = $this->_get('address_attr');
        $_addressArr = json_decode($_address,true);
        $_str = NULL;
        $_keyArr = array(
            'name'=>array('name'=>'名称'),
            'postcode'=>array('name'=>'邮编'),
            'province'=>array('name'=>'省','is_hide'=>1),
            'city'=>array('name'=>'市','is_hide'=>1),
            'area'=>array('name'=>'县','is_hide'=>1),
            'mobile'=>array('name'=>'手机'),
            'region'=>array('name'=>'地区'),
            'street'=>array('name'=>'街道'),
            'identity_number'=>array('name'=>'身份证')
        );
        if(!empty($_addressArr) && is_array($_addressArr)) {
          foreach($_keyArr as $k=>$v) {
              if(!empty($_addressArr[$k]) && empty($v['is_hide'])) {
                $_str .= '<label style="color:#999;margin-right:10px;">'.$v["name"].'：<span style="color:#333">'.$_addressArr[$k].'</span></label>';
              }
          }
            return $_str;
        }
        return '';
    }





    //设置属性
    public function set_object_attr($key,$val)
    {
        if($this->attribulte_array === FALSE)
        {
            $this->attribulte_array = parent::getAddressAttr()?json_decode(parent::getAddressAttr(),1):array();
        }
        $this->attribulte_array[$key] = $val;
        $this->setAddressAttr(json_encode($this->attribulte_array));
        return true;
    }
    //获取属性
    public function get_object_attr($key)
    {
        if($this->attribulte_array === FALSE)
        {
            $this->attribulte_array = parent::getAddressAttr()?json_decode(parent::getAddressAttr(),1):array();
        }

        return isset($this->attribulte_array[$key])?$this->attribulte_array[$key]:FALSE;
    }

    public function toArray($deep = true, $prefixKey = false) {
        $result = parent::toArray($deep, $prefixKey);
        $result['name'] = $this->getName();
        $result['postcode'] = $this->getPostcode();
        $result['province'] = $this->getProvince();
        $result['city'] = $this->getCity();
        $result['area'] = $this->getArea();
        $result['mobile'] = $this->getMobile();
        $result['street'] = $this->getStreet();
        $result['identity_number'] = $this->getIdentityNumber();
        return $result;
    }


    public function getName()
    {

        return self::get_object_attr('name');
    }
    public function setName($val)
    {
        return self::set_object_attr('name',$val);
    }
    public function getPostcode()
    {
        return self::get_object_attr('postcode');
    }
    public function setPostcode($val)
    {
        return self::set_object_attr('postcode',$val);
    }
    public function getProvince()
    {
        return self::get_object_attr('province');
    }
    public function setProvince($val)
    {
        return self::set_object_attr('province',$val);
    }
    public function getCity()
    {
        return self::get_object_attr('city');
    }
    public function setCity($val)
    {
        return self::set_object_attr('city',$val);
    }
    public function getArea()
    {
        return self::get_object_attr('area');
    }
    public function setArea($val)
    {
        return self::set_object_attr('area',$val);
    }
    public function getMobile()
    {
        return self::get_object_attr('mobile');
    }
    public function setMobile($val)
    {
        return self::set_object_attr('mobile',$val);
    }

    public function getStreet()
    {
        return self::get_object_attr('street');
    }
    public function setStreet($val)
    {
        return self::set_object_attr('street',$val);
    }
    public function getIdentityNumber()
    {
        return self::get_object_attr('identity_number');
    }
    public function setIdentityNumber($val)
    {
        return self::set_object_attr('identity_number',$val);
    }





}
