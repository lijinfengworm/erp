<?php

/**
 * KllLabelArticleRelationTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class KllLabelArticleRelationTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object KllLabelArticleRelationTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('KllLabelArticleRelation');
    }
    public function findAllBy($bind=[])
    {
        $data=  self::getInstance()->createQuery();
        if(isset($bind['where']))
        {
            foreach($bind['where'] as $k=>$v)
            {
                $data->andwhere($v);
            }
        }
        //wherein
        if(isset($bind['wherein'])){
            foreach($bind['wherein'] as $k=>$v)
            {
                $data->whereIn($k, $v);
            }            
        }        
        if(isset($bind['offset']))
        {
            $data->offset($bind['offset']);
        }
        if(isset($bind['limit']))
        {
            $data->limit($bind['limit']);
        }
        $da=$data->fetchArray();
        return $da;
    }
    ////文章总数
    public function getCountByLid($bind=[])
    {
        $query= self::getInstance()->createQuery()
                ->select('count(id) as num');
        if(isset($bind['label_id']))
        {
            $query->andwhere('label_id=?',$bind['label_id']);
        }
        if(isset($bind['status']))
        {
            $query->andwhere('status=?',$bind['status']);
        }
                
        $data= $query->fetchOne();
        return $data;
    }    
}