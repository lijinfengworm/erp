<?php

/**
 * TrdDaigouBrandTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TrdDaigouBrandTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object TrdDaigouBrandTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('TrdDaigouBrand');
    }

    //根据分类获取品牌
    public static function getBrand($root_id,$children_id = 0){
        $query = self::getInstance()->createQuery()->select('brand_attr')
                ->where('root_id = ?',$root_id);
        if($children_id) $query = $query->andWhere('children_id = ?',$children_id);
        return $query->fetchOne();
    }

    /**
     * 通过name 搜索品牌
     */
    public static function myGetByIdBrands($brand_id) {
        $query = self::getInstance()
            ->createQuery()
            ->select('id,root_id,children_id,brand_attr')
            ->andWhere('brand_attr like "%'.$brand_id.',%"')
            ->limit(1)
            ->fetchArray();
        if(empty($query)) return false;
        return $query;
    }




}