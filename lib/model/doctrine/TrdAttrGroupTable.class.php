<?php

/**
 * TrdAttrGroupTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TrdAttrGroupTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object TrdAttrGroupTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('TrdAttrGroup');
    }
        
    /**
     *
     * 获取group下的属性
     * @param $gid group的id
     * @return array 
     */
    public static function getAttrByGid($gid) {
        $query = self::getInstance()->createQuery('m')
                ->where('m.trd_group_id = ?',$gid)
                ->leftJoin('m.TrdGroup u')
                ->leftJoin('m.TrdAttribute a')
                ->orderBy('a.id asc');
        
        return $query->fetchArray();
    }
    
    //更新运动鞋数据到表中
    public static function updateAttrSql() {
        self::getInstance()->createQuery()->update()->set('sort', 1)->where('trd_attr_id = ?', 3)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 2)->where('trd_attr_id = ?', 4)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 3)->where('trd_attr_id = ?', 5)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 4)->where('trd_attr_id = ?', 7)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 5)->where('trd_attr_id = ?', 21)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 6)->where('trd_attr_id = ?', 22)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 7)->where('trd_attr_id = ?', 6)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 8)->where('trd_attr_id = ?', 8)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 9)->where('trd_attr_id = ?', 9)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 10)->where('trd_attr_id = ?', 23)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 11)->where('trd_attr_id = ?', 10)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 12)->where('trd_attr_id = ?', 11)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 13)->where('trd_attr_id = ?', 12)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 14)->where('trd_attr_id = ?', 13)->andWhere('trd_group_id = ?',1)->execute();
        self::getInstance()->createQuery()->update()->set('sort', 15)->where('trd_attr_id = ?', 20)->andWhere('trd_group_id = ?',1)->execute();
        return true;
    }
}