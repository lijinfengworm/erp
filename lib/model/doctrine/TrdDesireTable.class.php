<?php

/**
 * TrdDesireTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class TrdDesireTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object TrdDesireTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('TrdDesire');
    }

    public function getItemAllLikeByUser($uid, $item_ids) {
        $id_str = join(",", $item_ids);

        $sql = self::getInstance()->createQuery()
            ->from("TrdDesire as d")
            ->where("hupu_uid = ?", $uid);

        if(count($item_ids) > 1) {
            $sql->andwhere("item_all_id in ($id_str)");
        } else {
            $sql->andwhere("item_all_id = ? ", $item_ids);
        }

        $likes = $sql->execute();

        $rs = array();
        if($likes) {
            foreach($likes as $like) {
                $rs[] = $like->getItemAllId();
            }
        }
//        $rs2 = $this->getItemLikeByUser($uid, $shoe_ids);
//        $rs = array_merge($rs, $rs2);
        return $rs;
    }

    public function getItemLikeByUser($uid, $item_ids) {
        $id_str = join(",", $item_ids);

        $sql = self::getInstance()->createQuery()
            ->from("TrdDesire as d")
            ->where("hupu_uid = ?", $uid);

        if(count($item_ids) > 1) {
            $sql->andwhere("item_id in ($id_str)");
        } else {
            $sql->andwhere("item_id = ? ", $id_str);
        }

        $likes = $sql->execute();

        $rs = array();
        if($likes) {
            foreach($likes as $like) {
                $rs[] = $like->getItemId();
            }
        }

        return $rs;
    }
}
