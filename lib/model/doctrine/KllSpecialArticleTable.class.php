<?php

/**
 * KllSpecialArticleTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class KllSpecialArticleTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object KllSpecialArticleTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('KllSpecialArticle');
    }
    ////根据专题id获取文章
    public function getAidByCid($bind=[])
    {
        $query= self::getInstance()->createQuery()
                ->select('article_id')
                ->where('special_id=?',$bind['special_id'])
                ->andwhere('special_id=?',$bind['special_id'])
                ->offset($bind['offset'])
                ->limit($bind['limit'])
                ->orderBy($bind['orderby'])
                ->fetchArray();
        return $query;
    }
    public function getCount($bind=[])
    {
        $query= self::getInstance()->createQuery()
                ->select('count(id) as num')
                ->where('special_id=?',$bind['special_id'])
                ->limit($bind['limit'])
                ->fetchOne();
        return $query;
    }
    public function findSpecialID($bind = []){
        $data = self::getInstance()->createQuery();
        if (!empty($bind['select'])){
            $data->select($bind['select']);
        } else {
            $data->select("*");
        }
        //where 简单判断  如果复杂 建议新写函数
        if(!empty($bind['where']) && count($bind['where']) > 0) {
            foreach($bind['where'] as $k=>$v) {
                $data->addWhere($v);
            }
        }
        //wherein
        if(!empty($bind['wherein'])){
            $data->whereIn('id', $bind['wherein']);
        }
        //limit
        if (!empty($bind['limit'])){
            $data->limit($bind['limit']);
        }
        $data =  $data->fetchArray();
        return $data;
    }
}