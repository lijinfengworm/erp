define("initsku",[],function(){"use strict";function t(t){for(var e=0,s=t.split(""),a=0;a<s.length;a++)s[a].charCodeAt(0)<299?e++:e+=2;return e}function e(t){if(!t||!t.length)return[];for(var e=t.length,a=[],i=1;i<e;i++)for(var o=s(e,i);o.length;){for(var n=o.shift(),r=[],c=0;c<e;c++)n[c]&&r.push(t[c]);a.push(r)}return a}function s(t,e){if(!e||e<1)return[];var s,a,i,o=[],n=[],r=!0;for(s=0;s<t;s++)n[s]=s<e?1:0;for(o.push(n.concat());r;)for(i=0,s=0;s<t-1;s++){if(1==n[s]&&0==n[s+1]){for(a=0;a<s;a++)n[a]=a<i?1:0;n[s]=0,n[s+1]=1;var c=n.concat();o.push(c),c.slice(-e).join("").indexOf("0")==-1&&(r=!1);break}1==n[s]&&i++}return o}function a(t,e){this.option=void 0===e?"":e,this.sku=t,this.s_detail=this.sku.detail,this.s_attr=this.sku.attr}var i,o,n,r,c={},l=[],d=[];return Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,s=Number(arguments[1])||0;for(s=s<0?Math.ceil(s):Math.floor(s),s<0&&(s+=e);s<e;s++)if(s in this&&this[s]===t)return s;return-1}),a.prototype={defaults:{sort:".sku-content",sortelem:".sku",kaluliprice:"#kaluliPrice",originalPrice:"#originalPrice",stock:"#stock",storehouse_name:"#delivery_area",discount:".kaluli-discount",select:"cur",unbindselect:"unclick",count_downId:"#count_box"},init:function(){var t=this;n=$(t.defaults.kaluliprice).text(),i=0==$(t.defaults.stock).text()?0:$(t.defaults.stock).text()>5?"有货":"紧张",o=$(t.defaults.originalPrice).text(),r=$(t.defaults.discount).text(),$.extend(t.defaults,t.option),t.doResult(),t.creatsort(),t.count_down(),$(t.defaults.sortelem).each(function(){var e=$(this),s=e.attr("data-value");c[s]||e.addClass(t.defaults.unbindselect)}).live("click",function(){var e=$(this),s=parseInt($("#numbox-text").attr("value"));if(e.hasClass(t.defaults.unbindselect))return!1;$(".error-msg-sku").removeClass("show"),e.toggleClass(t.defaults.select).siblings().removeClass(t.defaults.select);var a=$("."+t.defaults.select);if(a.length){var n=[];a.each(function(){n.push($(this).attr("data-value"))}),n.sort(function(t,e){return parseInt(t)-parseInt(e)});var l=n.length,d=c[n.join(";")].prices,u=Math.max.apply(Math,d),f=Math.min.apply(Math,d),p=c[n.join(";")].discountPrices,m=(Math.max.apply(Math,p),Math.min.apply(Math,p),c[n.join(";")].stock),h=c[n.join(";")].discount,v=Math.max.apply(Math,h),g=Math.min.apply(Math,h),x=c[n.join(";")].itemId,b=c[n.join(";")].skuId,_=c[n.join(";")].status;c[n.join(";")].storehouse_name,c[n.join(";")].storehouse_note;s>m&&0!=m?$(".error-msg .busnum").addClass("show"):$(".error-msg .busnum").removeClass("show"),m=0==m?0:m>5?"有货":"紧张",$(t.defaults.stock).text(m),$(t.defaults.originalPrice).text(u>f?f+"-"+u:u),$(t.defaults.discount).text((v>g?g+"-"+v:v)+"折"),$(t.defaults.sort).attr("data-itemid",x),$(t.defaults.sort).attr("data-skuid",b),$(t.defaults.sort).attr("data-status",_),$(t.defaults.sortelem).not(a).not(e).each(function(){var e=$(this).siblings("."+t.defaults.select),s=[];if(e.length)for(var a=e.attr("data-value"),i=0;i<l;i++)n[i]!=a&&s.push(n[i]);else s=n.concat();s=s.concat($(this).attr("data-value")),s.sort(function(t,e){return parseInt(t)-parseInt(e)}),c[s.join(";")]?$(this).removeClass(t.defaults.unbindselect):$(this).addClass(t.defaults.unbindselect).removeClass(t.defaults.select)})}else $(t.defaults.originalPrice).text(o),$(t.defaults.stock).text(i),$(t.defaults.discount).text(r),$(t.defaults.sort).attr("data-itemid",""),$(t.defaults.sort).attr("data-skuid",""),$(t.defaults.sort).attr("data-status",""),$(t.defaults.sortelem).each(function(){c[$(this).attr("data-value")]?$(this).removeClass(t.defaults.unbindselect):$(this).addClass(t.defaults.unbindselect).removeClass(t.defaults.select)});0==$(t.defaults.stock).text()||1==$(t.defaults.sort).attr("data-status")?($(".cart-btn,.buy-btn").hide(),$(".none-btn").css("display","block")):($(".none-btn").hide(),$(".buy-btn,.cart-btn").css("display","block")),1==$(t.defaults.sort).attr("data-status")&&$("#stock").text(0)})},creatsort:function(){var e=this,s="";$.each(e.s_attr,function(a,i){var o=e.s_attr[a],n=t(o.name)>9?o.name.substring(0,9):o.name,r=0;s+='<div class="grid sort">',s+='<div class="title">'+n+"</div>",s+='<ul class="clearfix">';for(var c in o.data){if(1==o.flag){var l,d;$.each(e.s_detail,function(t,s){d=e.s_detail[t].itemId,l=e.s_detail[t].skuId}),s+='<li class="sku cur data-single" data-single-itemid="'+d+'" data-single-skuId="'+l+'"  data-value='+o.data[c].alias+">"+o.data[c].name+"</li>"}else s+='<li class="sku" data-value='+o.data[c].alias+">"+o.data[c].name+"</li>";r++}s+="</ul>",s+="</div>"});var a,o=0;$.each(e.s_detail,function(t,s){o++,a=e.s_detail[t].status,l.indexOf(s.storehouse_name)<0&&l.push(s.storehouse_name),d.indexOf(s.storehouse_note)<0&&""!=s.storehouse_note&&d.push(s.storehouse_note)}),1==o&&1==a&&($("#stock").text(0),$(".buy-btn,.cart-btn").hide(),$(".none-btn").css("display","block")),$(e.defaults.sort).append(s),$(e.defaults.stock).text(i).show()},doResult:function(){var t,s,a=this,i=a.getObjKeys(a.s_detail);for(t=0;t<i.length;t++){var o=i[t],n=a.s_detail[o],r=o.split(";");r.sort(function(t,e){return parseInt(t)-parseInt(e)});var l=e(r);for(s=0;s<l.length;s++)a.add2SKUResult(l[s],n);c[r.join(";")]={stock:n.stock,prices:[n.price],discount:[n.discount],discountPrices:[n.discountPrice],status:n.status,itemId:n.itemId,skuId:n.skuId,storehouse_name:[n.storehouse_name],storehouse_note:[n.storehouse_note]}}},getObjKeys:function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[e.length]=s);return e},add2SKUResult:function(t,e){var s=t.join(";");c[s]?(c[s].stock=parseInt(c[s].stock)+parseInt(e.stock),c[s].prices.push(e.price),c[s].discount.push(e.discount),c[s].discountPrices.push(e.discountPrice),c[s].storehouse_name.push(e.storehouse_name),c[s].storehouse_note.push(e.storehouse_note)):c[s]={stock:e.stock,prices:[e.price],discount:[e.discount],discountPrices:[e.discountPrice],storehouse_name:[e.storehouse_name],storehouse_note:[e.storehouse_note],status:e.status,itemId:e.itemId,skuId:e.skuId}},count_down:function(){function t(){s>=0?--s:(clearInterval(a),window.location.reload())}var e=this,s=$(e.defaults.count_downId).attr("leftSec");if(s>=0)var a=setInterval(function(){t(s)},1e3)}},a}),define("changenum",[],function(){"use strict";function t(t){this.opt=void 0!==t?t:""}var e;return t.prototype={defaults:{wrap:".numbox",subtract:".icon-subtract-nosprite",add:".icon-add--nosprite",textbox:"#numbox-text"},init:function(){var t=this;$.extend(t.defaults,t.opt),t.inputchange(t.callback),t.subtract(t.callback),t.add(t.callback)},inputchange:function(t){var e=this;$(e.defaults.textbox).each(function(){$(this).bind("input propertychange",function(){var s=$(this),a=s.val(),i=$("#stock").length>0?parseInt($("#stock").text()):parseInt($(this).parent().find(".numbox-text").attr("maxstock"));a<=0||"undefined"==typeof a?($(this).siblings(e.defaults.subtract).addClass("nodrop"),$(".error-msg .busnum").addClass("show")):a>i?($(this).siblings(e.defaults.add).addClass("nodrop"),$(".error-msg .busnum").addClass("show"),e.overstock(this)):($(this).siblings(e.defaults.subtract).removeClass("nodrop"),$(this).siblings(e.defaults.add).removeClass("nodrop"),$(".error-msg .busnum").removeClass("show")),t(this)})})},subtract:function(t){var s=this;$(s.defaults.subtract).each(function(){$(this).click(function(){var a=$(this);if(e=a.siblings(s.defaults.textbox).val(),1==e)return a.addClass("nodrop"),!1;a.siblings(s.defaults.add).removeClass("nodrop"),a.removeClass("nodrop"),$(".error-msg .busnum").removeClass("show"),s.roll(a.parent(),e,"down"),e--;var i=Math.round(0+parseInt(e));return a.siblings(s.defaults.textbox).val(i),t(this),!1})})},add:function(t){var s=this;$(s.defaults.add).each(function(){$(this).click(function(){var a=$(this),i=$("#stock").length>0?parseInt($("#stock").text()):parseInt($(this).parent().find(".numbox-text").attr("maxstock"));if(e=a.siblings(s.defaults.textbox).val(),e>=i)return a.addClass("nodrop"),s.overstock(this),!1;a.siblings(s.defaults.subtract).removeClass("nodrop"),a.removeClass("nodrop"),$(".error-msg .busnum").removeClass("show"),s.roll(a.parent(),e,"up"),e++;var o=Math.round(0+parseInt(e));return a.siblings(s.defaults.textbox).val(o),t(this),!1})})},roll:function(t,e,s){var a,i,o,n;if("up"==s)a=parseInt(e)+1,i=-22,o=1,n="vbottom";else{if("down"!=s)return!1;a=parseInt(e)-1,i=27,o=1,n="vtop"}var r='<div class="rollstocknum"><div class="v v1">'+e+'</div><div class="v v2 '+n+'">'+a+"</div></div>";$(t).append(r),$(".rollstocknum").show(),$(".v1").stop().animate({top:i+"px"},150),$(".v2").stop().animate({top:o+"px"},150,function(){$(".rollstocknum").remove()})},callback:function(t){},overstock:function(t){}},t}),define("modules/common/tips",[],function(){function t(t,e){return this.each(function(){var s=$(this),a='<div class="tips_layer" style="position: absolute; border-radius:5px; background-color:#ff6600; display:none; z-index:995">                    <div class="tips-text" style="padding:2px 5px; line-height:18px; color:#fff;">'+t+'</div>                    <div class="diamond"></div>                </div>';$(".tips_layer")&&$(".tips_layer").remove(),$(a).appendTo("body");var i=($(".tips-text"),$(".tips_layer"));e?i.css({top:e.top,left:e.left}).show():i.css({top:s.offset().top-parseInt(s.height())-10,left:s.offset().left+parseInt(s.width()/2)-30}).show(),setTimeout(function(){i.remove()},2e3)})}function e(t,e){var s=$(this);return this.each(function(){var e='<div class="tips-base-layer" style="position: absolute; padding:5px 7px 7px 7px; font-size:14px; color:#fff; border-radius:5px; background-color:#000; opacity:0.8; display:none; z-index:995"><img style="position: relative; top:-1px;" src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in.png" /> '+t+'<div style="position: absolute; right:45%; top:32px;"><img src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in2.png" /></div></div>';$(".tips-base-layer")&&$(".tips-base-layer").remove(),$(e).appendTo("body"),$(".tips-base-layer").css({top:s.offset().top-parseInt($(".tips-base-layer").height())-20,left:s.offset().left-(s.width()>$(".tips-base-layer").width()?(s.width()-$(".tips-base-layer").width())/2:($(".tips-base-layer").width()-s.width())/2)}).show(),setTimeout(function(){$(".tips-base-layer").remove()},2e3)})}$.fn.tipsFun=e,function(){$.fn.tips=t,$.Jui=$.Jui||{},$.extend($.Jui,{_$:function(t,e){t.siblings().removeClass(e),t.addClass(e)},_showMasks:function(t){var e="<div class='body-mask' style='position:absolute; top:0; left:0; width:100%; height:"+$(document).height()+"px; background-color:#000;  z-index:101;'></div>";$("body").append(e),$(".body-mask").css("opacity",0),$(".body-mask").animate({opacity:t?t:"0.8"})},_closeMasks:function(){var t=$(".body-mask");t.fadeOut(function(){t.remove()})},_getpageSize:function(){var t,e=document.documentElement,s=window.innerWidth||self.innerWidth||e&&e.clientWidth||document.body.clientWidth,a=window.innerHeight||self.innerHeight||e&&e.clientHeight||document.body.clientHeight;return t=[s,a]},_position:function(t){var e=(this._getpageSize()[0]-parseInt(t.outerWidth()))/2,s=(this._getpageSize()[1]-parseInt(t.outerHeight()))/2+$.Jui._getpageScroll();return[e,s]},_getpageScroll:function(){var t;return self.pageYOffset?t=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},isie:!!$.browser.msie,isie6:!!$.browser.msie&&parseInt($.browser.version)<=6,DOC:$(document),WIN:$(window),HEAD:$(document).find("head"),BODY:$(document).find("body")})}(jQuery)}),define("lib/paracurve",[],function(){!function(t){var e=t.fn.paracurve;t.fn.paracurve=function(e){var s={start:[this.position().left,this.position().top],end:[t(window).width()-this.width(),t(window).height()-this.height()],step:1,movecb:t.noop,moveendcb:t.noop},a=this;t.extend(s,e);var i=s.start[0],o=s.start[1],n=s.end[0],r=s.end[1],c=i+(n-i)/2,l=Math.min(o,r)-100;c=c>0?Math.ceil(c):Math.floor(c),l=l<0?0:Math.ceil(l);var d=c-i,u=l-o,f=c-n,p=l-r,m=(p-u*f/d)/(f*f-d*f),h=(u-m*d*d)/d;return a.each(function(e,i){function o(){t(i).data("running",!1).css({left:n+"px",top:r+"px"}),clearInterval(u),s.moveendcb&&t.isFunction(s.moveendcb)&&s.moveendcb.call(i)}var d=t(i).data("startPos");if(d=d?d:t(i).position(),t(i).data("running")||d.left==n)o(),t(i).css({left:d.left+"px",top:d.top+"px"});else{t(i).data("startPos",t(i).position());var u=setInterval(function(){var e=t(i).position();if(e.left>=n)o();else{var r=e.left+s.step,d=c-r,u=m*d*d+h*d,f=l-u;a.css({left:r+"px",top:f+"px"}),t(i).data("running",!0),s.movecb&&t.isFunction(s.movecb)&&s.movecb.call(i)}},30);t(i).data("timer",u)}})},t.fn.paracurve.noConflict=function(){return t.fn.paracurve=e,this}}(jQuery)}),define("submit",["modules/common/tips","lib/paracurve"],function(){function t(){}return t.prototype={ableajax:!1,noerror:!0,args:null,ajaxLoding:!1,init:function(){var t=this;$(".buy-btn").click(function(){var e=$("#kaluliPrice").text()*$("#numbox-text").val();if(0==$("#delivery_area").text().indexOf("南沙保税仓")&&e>=2e3)return $(".busnum").show().text("超过2000元,暂时无法购买").addClass("show"),void setTimeout(function(){$(".busnum").hide()},2e3);if(0==$("#delivery_area").text().indexOf("香港笨鸟仓")&&e>=1e3)return $(".busnum").show().text("超过1000元,暂时无法购买").addClass("show"),void setTimeout(function(){$(".busnum").hide()},2e3);var s="//www.kaluli.com/order/confirm",a=".buy-btn";t.checkPro(a,s,t.StandardPost)}),$(".cart-btn").click(function(){var e="//www.kaluli.com/order/addCart",s=".cart-btn";return!t.ajaxLoding&&(t.ajaxLoding=!0,void t.checkPro(s,e,t.cartpost))}),$(".fixed-cart-btn").click(function(){var e="//www.kaluli.com/order/addCart",s=".fixed-cart-btn";return!t.ajaxLoding&&(t.ajaxLoding=!0,void t.checkPro(s,e,t.cartpost))})},checkPro:function(t,e,s){var a=this;if(1!=login_flag&&(".cart-btn"==t||".fixed-cart-btn"==t)){var i=$(".unlogin a:eq(1)").attr("href");return window.location.href=i,!1}if($(".busnum").is(":visible")?(a.noerror=!1,a.ajaxLoding=!1):a.noerror=!0,$(".sort").each(function(){var e=$(this);0==e.find(".cur").length&&(0==$(".error-msg-sku").length&&$(".error-msg").append('<p class="error-msg-sku show">请选择您要购买的商品</p>'),".fixed-cart-btn"==t&&$(t).tips("请选择您要购买的商品",{left:$(t).offset().left,top:$(t).offset().top+55}),a.ajaxLoding=!1,a.noerror=!1)}),a.noerror){if($(".sort").length>0)var o=void 0==$(".sku-content").attr("data-itemid")?$(".data-single").attr("data-single-itemid"):$(".sku-content").attr("data-itemid"),n=void 0==$(".sku-content").attr("data-skuid")?$(".data-single").attr("data-single-skuid"):$(".sku-content").attr("data-skuid"),r=$("#numbox-text").val();else{var o,n,r=$("#numbox-text").val();$.each(sku.detail,function(t,e){o=sku.detail[t].itemId,n=sku.detail[t].skuId})}".buy-btn"==t?a.args={id:o,skuId:n,num:r}:a.args={item_id:o,sku_id:n,number:r},s(e,a.args,a,t)}},cartpost:function(t,e,s,a){$.getJSON(t+"?item_id="+e.item_id+"&sku_id="+e.sku_id+"&number="+e.number,function(t){0==t.status?(s.animation(t.data.img_path,a),$(".cartnum,.right-nav-cart-num").html(t.data.count)):$(a).tips(t.msg,{left:$(a).offset().left,top:$(a).offset().top+55}),s.ajaxLoding=!1})},StandardPost:function(t,e){var s=$("<form method='post'></form>");s.attr({action:t});for(arg in e){var a=$("<input type='hidden'>");a.attr({name:arg}),a.val(e[arg]),s.append(a)}$("body").append(s),s.submit()},animation:function(t,e){var s='<img id="cart-img-box" style="position: absolute; left:'+(1*$(e).offset().left+100)+"px;top:"+$(e).offset().top+'px; width:45px; height:45px;" src="'+t+'" />',a=this;$(s).appendTo("body"),".fixed-cart-btn"==e?$("#cart-img-box").animate({left:$(".right-nav").offset().left,top:$(".right-nav").offset().top},500,function(){$("#cart-img-box").remove(),a.ajaxLoding=!1}):$("#cart-img-box").paracurve({end:[$(".right-nav").offset().left,$(".right-nav").offset().top],step:16,movecb:function(){$("#cart-img-box").animate({width:20,height:20})},moveendcb:function(){$("#cart-img-box").remove(),a.ajaxLoding=!1}})}},t}),define("commentList",[],function(){"use strict";var t={defaults:{pages:1,is_img:0},ajaxBefor:!1,ajaxLoding:!1,init:function(){this.getAjax(),this.bindClick()},getAjax:function(){var t=this;return!t.ajaxLoding&&(t.ajaxLoding=!0,void $.post("//www.kaluli.com/item/ajaxComment",{page:this.defaults.pages,is_img:this.defaults.is_img,product_id:product_id},function(e){var s="string"!=typeof e?e:$.parseJSON(e);s.status?(t.allPage=s.msg.num,t.writePage(),t.writrTxt(s.msg.res)):$(".comment-list,.comment-pages").hide(),""==s.msg.res?$(".none-comment").show():$(".none-comment").hide(),t.ajaxLoding=!1},"json"))},writrTxt:function(t){for(var e,s,a,i=[],o="",n="",r="",c="",l=0;l<t.length;l++){for(e in t[l].tags_attr)o+="<span>"+t[l].tags_attr[e]+"</span>";for(s in t[l].imgs)r+='<div class="imgs">                           <img class="zoom" src="'+t[l].imgs[s]+'?imageView2/1/w/50" / data_src="'+t[l].imgs[s]+'">                       </div>';for(a in t[l].attr)n+=""+a+" : "+t[l].attr[a]+"<br/>";c=t[l].reply.length>2?'<div class="kefuAnswer"><i class="iconfont icon-customer"></i>客服回复:'+t[l].reply+"</div>":"",i.push('<li class="clearfix">                      <div class="comment-main">                          <img src="'+t[l].user_head+'" />                          <p>'+t[l].user_name+'</p>                      </div>                      <div class="comment-sub">                          <div class="txt">'+t[l].content+'</div>                          <div class="pic clearfix">'+r+'</div>                          <div class="picBig"></div>                          '+c+'                      </div>                      <div class="goods-data">                        <div class="data">'+n+t[l].created_at+"</div>                      </div>                 </li>"),o="",n="",r=""}$(".comment-list").html(i.join("")).show()},writePage:function(){var t=this.allPage,e='<a class="pre" href="#comment">&lt; 上一页</a>';if(1==t||0==t)return $(".comment-pages").hide(),!1;if($(".comment-list,.comment-pages").show(),t<6||this.defaults.pages<6)if(t<6)for(var s=0;s<t;s++)e+='<a class="a1'+(s==this.defaults.pages-1?" on":"")+'" href="#comment">'+(s+1)+"</a>";else for(var s=0;s<6;s++)e+='<a class="a1'+(s==this.defaults.pages-1?" on":"")+'" href="#comment">'+(s+1)+"</a>";else{for(var s=0;s<2;s++)e+='<a class="a1" href="#comment">'+(s+1)+"</a>";e+="<span>...</span>";for(var s=0;s<4&&!(this.defaults.pages-2+s>t);s++)e+='<a class="a1'+(this.defaults.pages==this.defaults.pages-2+s?" on":"")+'" href="#comment">'+(this.defaults.pages-2+s)+"</a>"}e+='<a class="next" href="#comment">下一页 &gt;</a>',$(".comment-pages").html(e),this.defaults.pages>1&&$(".comment-pages .pre").css({cursor:"pointer"}),this.defaults.pages==t&&$(".comment-pages .next").css({cursor:"auto"})},bindClick:function(){var t=this;$(".comment-pages .a1").live("click",function(){var e=$(this).html();t.defaults.pages=e,t.getAjax(),$(window).scrollTop($("#offset_post_2").offset().top)}),$(".comment-pages .pre").live("click",function(){var e=1*t.defaults.pages-1;e>0&&(t.defaults.pages=e,t.getAjax(),$(window).scrollTop($("#offset_post_2").offset().top))}),$(".comment-pages .next").live("click",function(){var e=1*t.defaults.pages+1;e<=t.allPage&&(t.defaults.pages=e,t.getAjax(),$(window).scrollTop($("#offset_post_2").offset().top))}),$("input[name='comPic']").change(function(){t.defaults.is_img=1*$(this).attr("inf"),t.defaults.pages=1,t.getAjax()}),$(".comment-sub").find(".imgs").live("click",function(){$(".pic_tag").remove();var t=$(this).find("img").attr("data_src")+"?imageView2/1/w/350";$(this).append('<img class="pic_tag" src="//kaluli.hoopchina.com.cn/images/kaluli/product/pic_tag.png">'),$(this).parent(".pic").next().html("<img src='"+t+"' />")}),$(".comment-sub").find(".picBig img").live("click",function(){$(this).parent(".picBig").html(""),$(".pic_tag").remove()})}};return t}),define("salesInfo",[],function(){"use strict";var t={defaults:{pages:1},ajaxBefor:!1,ajaxLoading:!1,init:function(){this.ajaxHandle(),this.bindFun()},template:function(t){return"<tr>                        <td>"+t.username+"</td>                        <td>"+t.attr+"</td>                        <td>"+t.num+"</td>                        <td>"+t.created_time+"</td>                    </tr>"},appendPages:function(){var t=this.allPage,e='<a class="pre" href="#sales">&lt; 上一页</a>';if(1==t)return $(".sales-pages").hide(),!1;if($(".sales-table,.sales-pages").show(),t<6||this.defaults.pages<6)if(t<6)for(var s=0;s<t;s++)e+='<a class="a1'+(s==this.defaults.pages-1?" on":"")+'" href="#sales">'+(s+1)+"</a>";else for(var s=0;s<6;s++)e+='<a class="a1'+(s==this.defaults.pages-1?" on":"")+'" href="#sales">'+(s+1)+"</a>";else{for(var s=0;s<2;s++)e+='<a class="a1" href="#sales">'+(s+1)+"</a>";e+="<span>...</span>";for(var s=0;s<4&&!(this.defaults.pages-2+s>t);s++)e+='<a class="a1'+(this.defaults.pages==this.defaults.pages-2+s?" on":"")+'" href="#sales">'+(this.defaults.pages-2+s)+"</a>"}e+='<a class="next" href="#sales">下一页 &gt;</a>',$(".sales-pages").html(e),this.defaults.pages>1&&$(".sales-pages .pre").css({cursor:"pointer"}),this.defaults.pages==t&&$(".sales-pages .next").css({cursor:"auto"})},ajaxHandle:function(){var t=this;t.ajaxLoading||$.post("//www.kaluli.com/item/ajaxSales",{page:this.defaults.pages,product_id:product_id},function(e){var s="string"!=typeof e?e:$.parseJSON(e);if(s.status){t.allPage=s.msg.num;for(var a=[],i=0;i<s.msg.res.length;i++)a.push(t.template(s.msg.res[i]));$("#sales_table tbody").html(a.join("")),t.appendPages()}})},bindFun:function(){var t=this;$(".sales-pages .a1").live("click",function(){var e=$(this).html();t.defaults.pages=e,t.ajaxHandle(),$(window).scrollTop($(".switchbox[data-index=1]").offset().top)}),$(".sales-pages .pre").live("click",function(){var e=1*t.defaults.pages-1;e>0&&(t.defaults.pages=e,t.ajaxHandle(),$(window).scrollTop($(".switchbox[data-index=1]").offset().top))}),$(".sales-pages .next").live("click",function(){var e=1*t.defaults.pages+1;e<=t.allPage&&(t.defaults.pages=e,t.ajaxHandle(),$(window).scrollTop($(".switchbox[data-index=1]").offset().top))})}};return t}),define("anchor",["commentList","salesInfo"],function(t,e){function s(t){this.opt=void 0===t?"":t}return s.prototype={defaults:{menu:".menu li",anchor:".anchorwrap",link_comment:".link-comment",jump_comment:"#jump_comment",id_comment:"#comment"},init:function(){var e=this;$(e.defaults.menu).click(function(){$(e.defaults.menu).removeClass("cur");var s=$(this),a=s.attr("data-link");$(".switchwrap").removeClass("active"),$("#"+a).addClass("active"),"sales"==a&&(t.init(),t.ajaxBefor=!0),s.hasClass("on")||(s.addClass("on"),s.siblings().removeClass("on"))}),$(e.defaults.jump_comment).click(function(){$(".switchwrap").removeClass("active"),$(e.defaults.id_comment).addClass("active"),$(e.defaults.menu).removeClass("on"),$(e.defaults.link_comment).addClass("on");var t=$(e.defaults.id_comment).offset().top;console.log(t),$("body,html").animate({scrollTop:t},0,"swing")})}},s}),define("gallery_slider",[],function(){var t=function(t){"use strict";var e={tc:"#tc_container",img:"#tc_container img",prev:"#tc_l",next:"#tc_r",cellmargin:20},s=void 0!==t.tc?t.tc:e.tc,a=void 0!==t.img?t.img:e.img,i=(void 0!==t.prev?t.prev:e.prev,void 0!==t.next?t.next:e.next,void 0!==t.cellmargin?t.cellmargin:e.cellmargin);this.init=function(){for(var t=0,e=0;e<$(a).length;e++)t+=$(a).parent().eq(e).width()+i;$(a).length>5&&$(s).parent().css({width:"350px",float:"left",display:"block",margin:"0 auto",overflow:"hidden"})}};return t}),define("suspensionlayer",[],function(){var t={defaults:{suspensioner:".menu",fixed:".fixed-cart-btn",buyarea:".cart-btn"},init:function(){var t=this;t.scrollhandle(),t.changetitle(),$(window).scroll(function(){t.scrollhandle(),t.changetitle()})},scrollhandle:function(){var t=this,e=$(window).scrollTop(),s=$(".p-c-grid").offset().top+$(".p-c-grid .menu").height(),a=$(t.defaults.buyarea).offset().top+$(t.defaults.buyarea).height();e>s?$(".menu").css({position:"fixed",top:"0px"}):$(".menu").css({position:"relative",top:"0px"}),e>a?$(t.defaults.fixed).fadeIn():$(t.defaults.fixed).stop(!0,!0).fadeOut()},changetitle:function(){}};return t}),define("countDown",[],function(){"use strict";function t(t,s){function a(){if(d>=0){var t=d%60,e=Math.floor(d/60)>0?Math.floor(d/60%60):"0",a=Math.floor(d/3600)>0?Math.floor(d/3600%24):"0",l=Math.floor(d/86400)>0?Math.floor(d/86400%30):"0";l<=0?a=a>=10?a:"0"+a:i.find(o).text(l),e=e>=10?e:"0"+e,t=t>=10?t:"0"+t,i.find(n).text(a),i.find(r).text(e),i.find(c).text(t),--d}else clearInterval(u),i.find(o).text("0"),i.find(n).text("00"),i.find(r).text("00"),i.find(c).text("00"),i.attr("data-status","clearInterval"),"function"==typeof s&&s()}var i=void 0!==t.$timebox?t.$timebox:e.$timebox,o=void 0!==t.class_time_d?t.class_time_d:e.class_time_d,n=void 0!==t.class_time_h?t.class_time_h:e.class_time_h,r=void 0!==t.class_time_m?t.class_time_m:e.class_time_m,c=void 0!==t.class_time_s?t.class_time_s:e.class_time_s,l=void 0!==t.time_attribute?t.time_attribute:e.time_attribute,d=i.attr(l),u=setInterval(function(){a(d)},1e3)}var e={$timebox:$("#count_box"),class_time_d:".time_d",class_time_h:".time_h",class_time_m:".time_m",class_time_s:".time_s",time_attribute:"leftSec"};return t}),define("specificate",[],function(){"use strict";var t={defaults:{selectCityPop:".select-city-pop",selectCityTabs:".select-city-pop-header span",selectCityContent:".pop-content",couponsPop:".coupons-pop",provinceIndex:0},init:function(){this.popColeOpen(),this.selectCityTab(),this.getProvince()},popColeOpen:function(){var t=this;$(".coupons-txt").click(function(){$(t.defaults.couponsPop).show()}),$(".pop-title").click(function(){$(t.defaults.couponsPop).hide()}),$("#colse_select_city_pop").click(function(){$(t.defaults.selectCityPop).hide()}),$("#open_select_city_pop").click(function(){$(t.defaults.selectCityPop).show()}),$(".openTaxPop").hover(function(){$(".pull-shuifei-pop").addClass("border"),$(".shuifeiPop").show()},function(){$(".pull-shuifei-pop").removeClass("border"),$(".shuifeiPop").hide()})},selectCityTab:function(){var t=this;$(t.defaults.selectCityTabs).click(function(){$(t.defaults.selectCityTabs).removeClass("active"),$(this).addClass("active"),$(t.defaults.selectCityContent).hide();var e=$(this).attr("id");console.log(e),"select_province"==e?$(".select-provice").show():"select_city"==e&&$(".select-city").show()})},getProvince:function(){var t=this;$(".select-provice li").click(function(){$(".select-provice li").removeClass("active");var e=$(this);e.addClass("active"),$("#select_province").text(e.text()),t.defaults.provinceIndex=$(this).attr("data-id"),console.log(t.defaults.provinceIndex),$(".select-provice").hide(),$(".select-city").show(),$(t.defaults.selectCityTabs).removeClass("active"),$("#select_city").addClass("active").text("请选择"),t.getCity()})},getCity:function(){var t=this,e=t.defaults.provinceIndex;$.get("//www.kaluli.com/api/getNextRegionById?type=1&id="+e,function(e){$(".select-city").html(e),t.getExpressFee()})},getExpressFee:function(){console.log("product_id:"+product_id),console.log("warehouseId:"+warehouseId);var t=this;$(".select-city li").click(function(){$(".select-city li").removeClass("active");var e=$(this);e.addClass("active"),$("#select_city").text(e.text()),$(".select-provice").hide(),$(".select-city").show(),$("#chooseProvince").text($("#select_province").text()),$("#chooseCity").text($("#select_city").text()),$(t.defaults.selectCityPop).hide(),$.get("//www.kaluli.com/api/getExpressInDetail?warehouseId="+warehouseId+"&itemId="+product_id+"&provinceId="+t.defaults.provinceIndex,function(t){1==t.status?$("#express_fee").text(t.data):alert(t.msg)},"json")})}};return t}),requirejs.config({baseUrl:"//kaluli.hoopchina.com.cn/js/kaluli/",paths:{initsku:"modules/product/initsku",changenum:"modules/product/changenum",submit:"modules/product/submit",anchor:"modules/product/anchor",commentList:"modules/product/commentList",salesInfo:"modules/product/salesInfo",gallery_slider:"lib/gallery_slider",suspensionlayer:"modules/product/suspensionlayer",countDown:"modules/common/countDown",specificate:"modules/product/specifications"},urlArgs:"v="+("undefined"!=typeof GV?GV.VERSION:(new Date).getTime())}),require(["initsku","changenum","submit","anchor","gallery_slider","suspensionlayer","countDown","commentList","salesInfo","specificate"],function(t,e,s,a,i,o,n,r,c,l){function d(){$(window).scrollTop()>$(".switchbox[data-index=0]").offset().top-$(window).height()&&!r.ajaxBefor&&(r.init(),r.ajaxBefor=!0),$(window).scrollTop()>$(".switchbox[data-index=1]").offset().top-$(window).height()&&!c.ajaxBefor&&(c.init(),c.ajaxBefor=!0)}if(l.init(),void 0==sku.length){var u=new t(sku);u.init()}else $(".buy-btn").hide(),$(".cart-btn").hide(),$(".none-btn").show();var f=new e;f.init();var p=new s;p.init();var m=new a;m.init();var h=new i({tc:"#tc_container",img:"#tc_container img",prev:"#tc_l",next:"#tc_r",cellmargin:10});h.init(),$(".small-image li").mouseenter(function(){var t=$(this).data("index");$(".small-image li").removeClass("show"),$(this).addClass("show"),$(".main-image span").removeClass("show"),$(".main-image span:eq("+t+")").addClass("show"),$(".main-image span:eq("+t+")").find("img").trigger("appear")}),o.init(),new n({$timebox:$("#count_box"),class_time_d:".time_d",class_time_h:".time_h",class_time_m:".time_m",class_time_s:".time_s",time_attribute:"leftSec"},function(){$("#pro_info").addClass("no-activity")}),d(),$(window).scroll(function(){d()})}),define("app/productDetail",function(){});