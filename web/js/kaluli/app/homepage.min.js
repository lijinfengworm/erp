define("scrollNav",[],function(){function t(t){this.defaults={wrap:".hpContent",grid:".hpContent .grid",scrollobj:".scroll-nav",linkobj:".scroll-nav li",backtotop:".backtoTop"},$.extend(this.defaults,t),this.gridHeight=$(this.defaults.grid).height(),this.gridArea=[]}return t.prototype={init:function(){var t=this;t.moveto(),t.scrollHandle(),t.backtotop(),t.pushArea(),$(window).scroll(function(e){t.scrollHandle()}),$(window).resize(function(e){t.scrollHandle()}),t.Anchorposition("down"),t.scroll(function(e){t.Anchorposition(e)})},scrollHandle:function(){var t=this,e=parseInt($(t.defaults.wrap).offset().top),i=parseInt($(t.defaults.wrap).offset().left),s=parseInt($(window).scrollTop());s>e?$(t.defaults.scrollobj).css({position:"fixed",left:i-39}):$(t.defaults.scrollobj).css({position:"absolute",left:"-39px"})},pushArea:function(){var t=this;$(t.defaults.grid).each(function(){t.gridArea.push($(this).offset().top)})},Anchorposition:function(t){for(var e=this,i=$(window).height(),s="up"==t||Math.round(i-e.gridHeight)<=0?parseInt($(window).scrollTop()+400):parseInt($(window).scrollTop())+Math.round((i-e.gridHeight)/2+20),o=0;o<e.gridArea.length;o++){if(o==e.gridArea.length-1&&s>=parseInt(e.gridArea[o]))return $(e.defaults.linkobj).eq(o).addClass("scrollon"),!1;s>=parseInt(e.gridArea[o])&&s<parseInt(e.gridArea[o+1])?$(e.defaults.linkobj).eq(o).addClass("scrollon"):$(e.defaults.linkobj).eq(o).removeClass("scrollon")}},scroll:function(t){var e=$(window).scrollTop(),t=t||function(){};$(window).scroll(function(){var i=$(window).scrollTop(),s=i-e;return 0!==s&&(t(s>0?"down":"up"),void(e=i))})},moveto:function(){var t=this;$(t.defaults.linkobj).click(function(){var e=$(this).index(),i=$(t.defaults.grid).eq(e).offset().top;$("body,html").animate({scrollTop:i},600,"swing")})},backtotop:function(){var t=this;$(t.defaults.backtotop).click(function(){$("body,html").animate({scrollTop:"0px"},600,"swing")})}},t}),define("picScroll",[],function(){var t=function(){var t=arguments,e={css:{width:490,height:170},config:{time:3e3,type:"fade",speed:600,button:!0,butArr:".J_ui_picSwitch .J_ui_a li"},before:function(t){},after:function(t){}};return this.each(function(){var i=$(this),s=function(t){return i.find(t)},o={list:0,options:["top","left","fade"],animated:!1,init:function(){if(this.arrays=[],this.arrays[0]=$.extend(!0,{},e,arguments[0]||{}),this.ul=s(".J_ui_post"),this.li=s(".J_ui_post li"),this.but=this.arrays[0].config.butArr,this.options.index(this.arrays[0].config.type)!==-1){for(var t=0;t<this.arrays.length;t++)switch(typeof this.arrays[t]){case"object":i.css(this.arrays[t].css),this.li.css(this.arrays[t].css),this.returnBefore=this.arrays[t].before,this.returnAfter=this.arrays[t].after}this.config("move"),this.bindFun(),this.arrays[0].completes&&this.arrays[0].completes(i)}else $.error=console.error,$.error("参数格式不正确！")},config:function(t){var e=this,s=0,o=e.but.split(","),n=e.arrays[0].config,a="top"==n.type?["top"]:["left"];for("left"==n.type||"top"==n.type?("left"==n.type&&(e.ul.addClass("J_ui_postFloat"),e.ul.width(i.width()*e.li.length)),e.list==e.li.length&&("top"==n.type?e.li.first().css(a[0],e.ul.height()):e.li.first().css(a[0],e.ul.width()),e.callback=function(){e.li.first().css(a[0],0),e.ul.css(a[0],0),e.list=0}),e.list==-1&&("top"==n.type?e.li.last().css(a[0],-e.ul.height()):e.li.last().css(a[0],-e.ul.width()),e.callback=function(){e.list=e.li.length-1,e.li.last().css(a[0],0),"top"==n.type?e.ul.css(a[0],-parseInt(i.height())*e.list):e.ul.css(a[0],-parseInt(i.width())*e.list)}),e.scrollA()):"fade"==n.type&&(e.ul.hasClass("J_ui_postPost")||e.ul.addClass("J_ui_postPost"),e.list==e.li.length&&(e.list=0),e.fadeFun());s<o.length;s++)$(o[s]).eq(e.list==e.li.length?0:e.list).siblings().removeClass("on"),$(o[s]).eq(e.list==e.li.length?0:e.list).addClass("on")},scrollA:function(){this.animated=!0;var t,e=this,s=e.arrays[0].config;clearTimeout(e.t),e.rerurnFun(0),t="top"==s.type?{top:-parseInt(i.height())*e.list}:{left:-parseInt(i.width())*e.list},e.ul.stop(!0).textAnimation({css:t,config:s,callback:function(){e.callback&&(e.callback(),e.callback=null),e.animated=!1,e.rerurnFun(1)}}),e.setTime()},fadeFun:function(){var t=this;clearTimeout(t.t),t.rerurnFun(0),t.li.css("opacity",1),t.li.eq(t.list).siblings().stop(!0).fadeOut(t.arrays[0].config.speed),t.li.eq(t.list).fadeIn(t.arrays[0].config.speed,function(){t.rerurnFun(1)}),t.setTime()},bindFun:function(){var t=this;$(t.but).hover(function(){t.list=$(this).index(),t.config("stop"),clearTimeout(t.t)},function(){t.setTime()}),t.li.hover(function(){clearTimeout(t.t)},function(){t.setTime()}),t.arrays[0].config.button?(s(".J_ui_butPost_a").click(function(){return!t.animated&&(t.list-=1,void t.config("move"))}),s(".J_ui_butPost_b").click(function(){return!t.animated&&(t.list+=1,void t.config("move"))})):(s(".J_ui_butPost_b").remove(),s(".J_ui_butPost_a").remove())},rerurnFun:function(t){t?!!this.returnAfter&&this.returnAfter(this.list==this.li.length?0:this.list):!!this.returnBefore&&this.returnBefore(this.list==this.li.length?0:this.list)},setTime:function(){var t=this;t.t=setTimeout(function(){t.list+=1,t.config("move")},t.arrays[0].config.time)}};o.init.apply(o,t)})},e={css:{top:0},config:{speed:800,easing:"swing",time:0}},i=function(t){return this.each(function(){var i=$(this),s=$.extend(!0,{},e,t);i.animate(s.css,s.config.speed,s.config.easing,function(){!!s.callback&&s.callback()})})};$.extend(Array.prototype,{has:function(t){return this.index(t)!==-1},index:function(t){if(this.indexOf)return this.indexOf(t);for(var e=0,i=this.length;e<i;e++)if(t==this[e])return e;return-1}}),$.fn.extend({textAnimation:i,slide:t})}),define("countDown",[],function(){"use strict";function t(t,i){function s(){if(u>=0){var t=u%60,e=Math.floor(u/60)>0?Math.floor(u/60%60):"0",s=Math.floor(u/3600)>0?Math.floor(u/3600%24):"0",c=Math.floor(u/86400)>0?Math.floor(u/86400%30):"0";c<=0?s=s>=10?s:"0"+s:o.find(n).text(c),e=e>=10?e:"0"+e,t=t>=10?t:"0"+t,o.find(a).text(s),o.find(r).text(e),o.find(l).text(t),--u}else clearInterval(d),o.find(n).text("0"),o.find(a).text("00"),o.find(r).text("00"),o.find(l).text("00"),o.attr("data-status","clearInterval"),"function"==typeof i&&i()}var o=void 0!==t.$timebox?t.$timebox:e.$timebox,n=void 0!==t.class_time_d?t.class_time_d:e.class_time_d,a=void 0!==t.class_time_h?t.class_time_h:e.class_time_h,r=void 0!==t.class_time_m?t.class_time_m:e.class_time_m,l=void 0!==t.class_time_s?t.class_time_s:e.class_time_s,c=void 0!==t.time_attribute?t.time_attribute:e.time_attribute,u=o.attr(c),d=setInterval(function(){s(u)},1e3)}var e={$timebox:$("#count_box"),class_time_d:".time_d",class_time_h:".time_h",class_time_m:".time_m",class_time_s:".time_s",time_attribute:"leftSec"};return t}),define("tips",[],function(){function t(t,e){return this.each(function(){var i=$(this),s='<div class="tips_layer" style="position: absolute; border-radius:5px; background-color:#ff6600; display:none; z-index:995">                    <div class="tips-text" style="padding:2px 5px; line-height:18px; color:#fff;">'+t+'</div>                    <div class="diamond"></div>                </div>';$(".tips_layer")&&$(".tips_layer").remove(),$(s).appendTo("body");var o=($(".tips-text"),$(".tips_layer"));e?o.css({top:e.top,left:e.left}).show():o.css({top:i.offset().top-parseInt(i.height())-10,left:i.offset().left+parseInt(i.width()/2)-30}).show(),setTimeout(function(){o.remove()},2e3)})}function e(t,e){var i=$(this);return this.each(function(){var e='<div class="tips-base-layer" style="position: absolute; padding:5px 7px 7px 7px; font-size:14px; color:#fff; border-radius:5px; background-color:#000; opacity:0.8; display:none; z-index:995"><img style="position: relative; top:-1px;" src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in.png" /> '+t+'<div style="position: absolute; right:45%; top:32px;"><img src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in2.png" /></div></div>';$(".tips-base-layer")&&$(".tips-base-layer").remove(),$(e).appendTo("body"),$(".tips-base-layer").css({top:i.offset().top-parseInt($(".tips-base-layer").height())-20,left:i.offset().left-(i.width()>$(".tips-base-layer").width()?(i.width()-$(".tips-base-layer").width())/2:($(".tips-base-layer").width()-i.width())/2)}).show(),setTimeout(function(){$(".tips-base-layer").remove()},2e3)})}$.fn.tipsFun=e,function(){$.fn.tips=t,$.Jui=$.Jui||{},$.extend($.Jui,{_$:function(t,e){t.siblings().removeClass(e),t.addClass(e)},_showMasks:function(t){var e="<div class='body-mask' style='position:absolute; top:0; left:0; width:100%; height:"+$(document).height()+"px; background-color:#000;  z-index:101;'></div>";$("body").append(e),$(".body-mask").css("opacity",0),$(".body-mask").animate({opacity:t?t:"0.8"})},_closeMasks:function(){var t=$(".body-mask");t.fadeOut(function(){t.remove()})},_getpageSize:function(){var t,e=document.documentElement,i=window.innerWidth||self.innerWidth||e&&e.clientWidth||document.body.clientWidth,s=window.innerHeight||self.innerHeight||e&&e.clientHeight||document.body.clientHeight;return t=[i,s]},_position:function(t){var e=(this._getpageSize()[0]-parseInt(t.outerWidth()))/2,i=(this._getpageSize()[1]-parseInt(t.outerHeight()))/2+$.Jui._getpageScroll();return[e,i]},_getpageScroll:function(){var t;return self.pageYOffset?t=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},isie:!!$.browser.msie,isie6:!!$.browser.msie&&parseInt($.browser.version)<=6,DOC:$(document),WIN:$(window),HEAD:$(document).find("head"),BODY:$(document).find("body")})}(jQuery)}),define("newUserCoupon",[],function(){$("body").append('<div class="alert_callback"><div></div><i></i><p></p></div>');var t=!1;t||1!=$(".button").attr("data-received")||($(".button").text("已领取").addClass("received"),t=!0),$("#freebies").click(function(){return __dace.sendEvent("kaluli_newusercoupon_homepage"),t||1!=$(".button").attr("data-received")?void(window.location.href="//www.kaluli.com/activity/coupon"):($(".button").text("已领取").addClass("received"),t=!0,!1)}),$(".freebies-rule").click(function(){$(".freeies-rules-grid").fadeIn()}),$(".freebies-rule-map").click(function(){$(".freeies-rules-grid").fadeOut()})}),requirejs.config({baseUrl:"//kaluli.hoopchina.com.cn/js/kaluli/",paths:{scrollNav:"modules/homepage/scrollNav",picScroll:"lib/picScroll",tips:"modules/common/tips",countDown:"modules/common/countDown",newUserCoupon:"modules/homepage/newUserCoupon"},urlArgs:"v="+("undefined"!=typeof GV?GV.VERSION:(new Date).getTime())}),require(["scrollNav","picScroll","countDown","tips","newUserCoupon"],function(t,e,i,s){$(function(){new i({$timebox:$("#count_box"),class_time_d:".time_d",class_time_h:".time_h",class_time_m:".time_m",class_time_s:".time_s",time_attribute:"leftSec"},function(){$("#count_box").length>0&&window.location.reload()});var e=new t;e.init();var s,o=$(".kv-images > li").length;if(1==o)return $(".kv-main .menu").hide(),!1;for(var n=0;n<o;n++)s=0==n?"on":"",$(".J_ui_a ul").append("<li class="+s+"></li>");$(".slider").slide({css:{width:1216,height:336},config:{time:5e3,type:"fade",speed:600,button:!0,butArr:".J_ui_a li"},completes:function(t){$(".kv-background li:eq(0)").fadeIn(300)},before:function(t){$(".kv-background li").fadeOut(500),$(".kv-background li:eq("+t+")").fadeIn(500)}}),$(".getcoupon").on("click",function(){if(!$(this).hasClass("getcoupon"))return!1;var t=$(this).attr("data-couponid"),e=$(this);if($(".login").length>0)$.getJSON("//www.kaluli.com/api/receiveCoupon?id="+t+"&callback=?",function(t){0==t.status?e.removeClass("getcoupon").addClass("active").text("已经领取"):(e.tips(t.msg,{left:e.offset().left,top:e.offset().top+e.outerHeight()+10}),e.removeClass("getcoupon").addClass("active"))});else{var i=$(".unlogin a:eq(1)").attr("href");window.location.href=i}return!1})})}),define("app/homepage",function(){});