/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2009 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   //www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   //www.appelsiini.net/projects/lazyload
 *
 * Version:  1.5.0
 *
 */

!function(e){e.fn.lazyload=function(t){var n={placeholder:null,threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window,callBack:null};t&&e.extend(n,t);var o=this;"scroll"==n.event&&e(n.container).bind("scroll",function(t){var i=0;o.each(function(){if(e.abovethetop(this,n)||e.leftofbegin(this,n));else if(e.belowthefold(this,n)||e.rightoffold(this,n)){if(i++>n.failurelimit)return!1}else e.browser.msie&&e(this).attr("src",e(this).attr("lazy_src")),e(this).trigger("appear"),n.callBack&&e.isFunction(n.callBack)&&n.callBack(this)});var r=e.grep(o,function(e){return!e.loaded});o=e(r)});var i=!window.dateType;return this.each(function(){var t=this;void 0==e(t).attr("original")&&e(t).attr("original",e(t).attr("lazy_src")),"scroll"!=n.event||void 0==e(t).attr("src")||n.placeholder==e(t).attr("src")||e.abovethetop(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.rightoffold(t,n)?(n.placeholder?e(t).attr("src",n.placeholder):e(t).removeAttr("src"),t.loaded=!1):t.loaded=!0,e(t).one("appear",function(){this.loaded||e("<img />").bind("load",function(){e(t).hide().attr("src",e(t).attr("lazy_src"))[n.effect](n.effectspeed),e(t).parents(".skulist_index").length>0&&e(t).css("margin","10px"),e(t).parent(".skul_spic").length>0&&e(t).css("margin-top",""),t.loaded=!0}).attr("src",e(t).attr("original"))}),"scroll"!=n.event&&e(t).bind(n.event,function(n){t.loaded||e(t).trigger("appear")})}),i&&(e(n.container).trigger(n.event),window.dateType=!0),this},e.belowthefold=function(t,n){if(void 0===n.container||n.container===window)var o=e(window).height()+e(window).scrollTop();else var o=e(n.container).offset().top+e(n.container).height();return o<=e(t).offset().top-n.threshold},e.rightoffold=function(t,n){if(void 0===n.container||n.container===window)var o=e(window).width()+e(window).scrollLeft();else var o=e(n.container).offset().left+e(n.container).width();return o<=e(t).offset().left-n.threshold},e.abovethetop=function(t,n){if(void 0===n.container||n.container===window)var o=e(window).scrollTop();else var o=e(n.container).offset().top;return o>=e(t).offset().top+n.threshold+e(t).height()},e.leftofbegin=function(t,n){if(void 0===n.container||n.container===window)var o=e(window).scrollLeft();else var o=e(n.container).offset().left;return o>=e(t).offset().left+n.threshold+e(t).width()},e.extend(e.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})}(jQuery),define("lazy_load",function(){}),define("getW",[],function(){function e(){var e,t,n;return e=document.documentElement.clientHeight||document.body.clientHeight,t=document.documentElement.clientWidth||document.body.clientWidth,screen_h=document.documentElement.scrollHeight||document.body.scrollHeight,n=document.documentElement.scrollTop||document.body.scrollTop,o={w:t,h:e,s:n,s_h:screen_h}}return e}),define("returnTop",["getW"],function(e){var t={init:function(){$(".scrollNav").length>0&&$(".right-nav").remove(),this.rightnav=$(".right-nav"),this.returnTop=$("#returnTop");var t=this;t.rightnav.show(),$(window).bind("scroll",function(){var n=e().s,o=e().w,i=e().h;Math.round((i-50)/2+180),Math.round((o-1080)/2+1100);n>600?t.returnTop.css("visibility","visible"):t.returnTop.css("visibility","hidden")}),this.returnTop.on("click",function(){$(window).scrollTop(0)})}};return t}),define("EventUtil",[],function(){var e={getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},getRelatedTarget:function(e){return e.relatedTarget?e.relatedTarget:e.toElement?e.toElement:e.fromElement?e.fromElement:null}};return e}),define("navHandle",["EventUtil"],function(e){var t={init:function(){0==$(".homepage").length&&($(".nav-leve2").mouseleave(function(e){$(this).fadeOut(),$(".nav-level1").find("a").removeClass("on")}),$(".nav-level1").mouseleave(function(t){return!($(e.getRelatedTarget(t)).parents(".nav-leve2").length>0)&&($(".nav-leve2").stop(!0,!0).fadeOut(),void $(this).find("a").removeClass("on"))})),this.topNav(),this.sideNav()},topNav:function(){$(".nav-level1").mouseover(function(){$(".nav-leve2").stop(!0,!0).fadeIn(),$(this).find("a").addClass("on")})},sideNav:function(){$(".nav-leve2 li").hover(function(e){e.preventDefault();var t=$(this).index();$(".nav-leve2 li").removeClass("block"),$(this).addClass("block"),0!=$(".section:eq("+t+")").length?$(".nav-grid").addClass("block"):$(".nav-grid").removeClass("block"),$(".section").removeClass("block"),$(".section:eq("+t+")").addClass("block"),$(".arrow-icon",".nav-grid").attr("id","select-"+t)},function(e){return!("undefined"!=typeof $(e.relatedTarget).parent().attr("class")&&$(e.relatedTarget).parent().attr("class").indexOf("section")>=0)&&void(0==$(e.relatedTarget).parents(".nav-leve2").length&&($(".nav-grid").removeClass("block"),$(".section",".nav-grid").removeClass("block")))}),$(".nav-leve2").mouseleave(function(){$(".nav-leve2 li").removeClass("block")}),$(".nav-grid").hover(function(e){e.preventDefault()},function(e){return!($(e.relatedTarget).parents(".nav-leve2").length>0)&&void $(".nav-grid,.section").removeClass("block")})}};return t}),define("tips",[],function(){function e(e,t){return this.each(function(){var n=$(this),o='<div class="tips_layer" style="position: absolute; border-radius:5px; background-color:#ff6600; display:none; z-index:995">                    <div class="tips-text" style="padding:2px 5px; line-height:18px; color:#fff;">'+e+'</div>                    <div class="diamond"></div>                </div>';$(".tips_layer")&&$(".tips_layer").remove(),$(o).appendTo("body");var i=($(".tips-text"),$(".tips_layer"));t?i.css({top:t.top,left:t.left}).show():i.css({top:n.offset().top-parseInt(n.height())-10,left:n.offset().left+parseInt(n.width()/2)-30}).show(),setTimeout(function(){i.remove()},2e3)})}function t(e,t){var n=$(this);return this.each(function(){var t='<div class="tips-base-layer" style="position: absolute; padding:5px 7px 7px 7px; font-size:14px; color:#fff; border-radius:5px; background-color:#000; opacity:0.8; display:none; z-index:995"><img style="position: relative; top:-1px;" src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in.png" /> '+e+'<div style="position: absolute; right:45%; top:32px;"><img src="//kaluli.hoopchina.com.cn/images/kaluli/order/oder-in2.png" /></div></div>';$(".tips-base-layer")&&$(".tips-base-layer").remove(),$(t).appendTo("body"),$(".tips-base-layer").css({top:n.offset().top-parseInt($(".tips-base-layer").height())-20,left:n.offset().left-(n.width()>$(".tips-base-layer").width()?(n.width()-$(".tips-base-layer").width())/2:($(".tips-base-layer").width()-n.width())/2)}).show(),setTimeout(function(){$(".tips-base-layer").remove()},2e3)})}$.fn.tipsFun=t,function(){$.fn.tips=e,$.Jui=$.Jui||{},$.extend($.Jui,{_$:function(e,t){e.siblings().removeClass(t),e.addClass(t)},_showMasks:function(e){var t="<div class='body-mask' style='position:absolute; top:0; left:0; width:100%; height:"+$(document).height()+"px; background-color:#000;  z-index:101;'></div>";$("body").append(t),$(".body-mask").css("opacity",0),$(".body-mask").animate({opacity:e?e:"0.8"})},_closeMasks:function(){var e=$(".body-mask");e.fadeOut(function(){e.remove()})},_getpageSize:function(){var e,t=document.documentElement,n=window.innerWidth||self.innerWidth||t&&t.clientWidth||document.body.clientWidth,o=window.innerHeight||self.innerHeight||t&&t.clientHeight||document.body.clientHeight;return e=[n,o]},_position:function(e){var t=(this._getpageSize()[0]-parseInt(e.outerWidth()))/2,n=(this._getpageSize()[1]-parseInt(e.outerHeight()))/2+$.Jui._getpageScroll();return[t,n]},_getpageScroll:function(){var e;return self.pageYOffset?e=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},isie:!!$.browser.msie,isie6:!!$.browser.msie&&parseInt($.browser.version)<=6,DOC:$(document),WIN:$(window),HEAD:$(document).find("head"),BODY:$(document).find("body")})}(jQuery)}),define("coupon",["tips"],function(e){var t={init:function(){this.bindFun()},bindFun:function(){$(".block-btn").click(function(){$(this).hide(),$(".fix-coupon-list").addClass("show"),$(window).height()<700&&5==$(".block-content li").length&&$(".fix-coupon-list,.right-nav").addClass("fixbottom")}),$(".collapse-btn").click(function(){$(".block-btn").show(),$(".fix-coupon-list").removeClass("show fixbottom"),$(".right-nav").removeClass("fixbottom")}),$(".getcoupon").on("click",function(){if(!$(this).hasClass("getcoupon"))return!1;var e=$(this).attr("data-couponid"),t=$(this);if(t.addClass("loading"),$(".login").length>0)$.getJSON("//www.kaluli.com/api/receiveCoupon?id="+e,function(e){t.removeClass("loading"),0==e.status?t.removeClass("getcoupon").addClass("active").text("已领取"):(t.tips(e.msg,{left:t.offset().left,top:t.offset().top+t.outerHeight()+10}),t.removeClass("getcoupon").addClass("active"))});else{var n=$(".unlogin a:eq(1)").attr("href");window.location.href=n}return!1})}};return t}),requirejs.config({baseUrl:"//kaluli.hoopchina.com.cn/js/kaluli/",paths:{lazy_load:"lib/lazy_load",EventUtil:"modules/common/EventUtil",getW:"modules/common/getW",returnTop:"modules/common/returnTop",navHandle:"modules/common/navHandle",coupon:"modules/common/coupon",tips:"modules/common/tips"},urlArgs:"v="+("undefined"!=typeof GV?GV.VERSION:(new Date).getTime())}),require(["lazy_load","returnTop","navHandle","coupon"],function(e,t,n,o){$(function(){if($(".lazyload").lazyload({effect:"fadeIn",placeholder:"/images/kaluli/noneImg.png"}),$(".recommond-list .refresh").length>0){var e=5;$(".return-content").length>0&&(e=4),$.post("//www.kaluli.com/api/getHotItem",{num:e},function(e){$(".recommond-list .r-l-grid").html(e)}),$(".recommond-list .refresh").click(function(){$.post("//www.kaluli.com/api/getHotItem",{num:e},function(e){$(".recommond-list .r-l-grid").html(e)})})}$(".login").hover(function(){$(".login-menu").stop(!0,!0).fadeIn()},function(){$(".login-menu").stop(!0,!0).fadeOut()}),n.init(),t.init(),o.init()})}),define("app/common",function(){});