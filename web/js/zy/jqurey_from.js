(function(c){function p(){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}c.fn.ajaxSubmit=function(a){function i(b){function e(){function a(){try{var c=(n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document).readyState;p("state = "+c);"uninitialized"==c.toLowerCase()&&setTimeout(a,50)}catch(b){p("Server abort: ",b," (",b.name,")"),
    i(x),v&&clearTimeout(v),v=void 0}}var b=g.attr("target"),h=g.attr("action");f.setAttribute("target",r);j||f.setAttribute("method","POST");h!=d.url&&f.setAttribute("action",d.url);!d.skipEncodingOverride&&(!j||/post/i.test(j))&&g.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});d.timeout&&(v=setTimeout(function(){y=!0;i(A)},d.timeout));var k=[];try{if(d.extraData)for(var m in d.extraData)k.push(c('<input type="hidden" name="'+m+'" />').attr("value",d.extraData[m]).appendTo(f)[0]);
    d.iframeTarget||(q.appendTo("body"),n.attachEvent?n.attachEvent("onload",i):n.addEventListener("load",i,!1));setTimeout(a,15);f.submit()}finally{f.setAttribute("action",h),b?f.setAttribute("target",b):g.removeAttr("target"),c(k).remove()}}function i(a){if(!h.aborted&&!B){try{o=n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document}catch(b){p("cannot access response document: ",b),a=x}if(a===A&&h)h.abort("timeout");else if(a==x&&h)h.abort("server abort");else if(o&&
    o.location.href!=d.iframeSrc||y){n.detachEvent?n.detachEvent("onload",i):n.removeEventListener("load",i,!1);var a="success",e;try{if(y)throw"timeout";var g="xml"==d.dataType||o.XMLDocument||c.isXMLDoc(o);p("isXml="+g);if(!g&&(window.opera&&(null==o.body||""==o.body.innerHTML))&&--D){p("requeing onLoad callback, DOM not available");setTimeout(i,250);return}var f=o.body?o.body:o.documentElement;h.responseText=f?f.innerHTML:null;h.responseXML=o.XMLDocument?o.XMLDocument:o;g&&(d.dataType="xml");h.getResponseHeader=
    function(a){return{"content-type":d.dataType}[a]};f&&(h.status=Number(f.getAttribute("status"))||h.status,h.statusText=f.getAttribute("statusText")||h.statusText);var k=/(json|script|text)/.test((d.dataType||"").toLowerCase());if(k||d.textarea){var j=o.getElementsByTagName("textarea")[0];if(j)h.responseText=j.value,h.status=Number(j.getAttribute("status"))||h.status,h.statusText=j.getAttribute("statusText")||h.statusText;else if(k){var l=o.getElementsByTagName("pre")[0],r=o.getElementsByTagName("body")[0];
    l?h.responseText=l.textContent?l.textContent:l.innerHTML:r&&(h.responseText=r.innerHTML)}}else"xml"==d.dataType&&(!h.responseXML&&null!=h.responseText)&&(h.responseXML=E(h.responseText));try{var g=h,t=d.dataType,f=d,w=g.getResponseHeader("content-type")||"",z="xml"===t||!t&&0<=w.indexOf("xml"),s=z?g.responseXML:g.responseText;z&&"parsererror"===s.documentElement.nodeName&&c.error&&c.error("parsererror");f&&f.dataFilter&&(s=f.dataFilter(s,t));"string"===typeof s&&("json"===t||!t&&0<=w.indexOf("json")?
    s=F(s):("script"===t||!t&&0<=w.indexOf("javascript"))&&c.globalEval(s));C=s}catch(G){a="parsererror",h.error=e=G||a}}catch(u){p("error caught: ",u),a="error",h.error=e=u||a}h.aborted&&(p("upload aborted"),a=null);h.status&&(a=200<=h.status&&300>h.status||304===h.status?"success":"error");"success"===a?(d.success&&d.success.call(d.context,C,"success",h),m&&c.event.trigger("ajaxSuccess",[h,d])):a&&(void 0==e&&(e=h.statusText),d.error&&d.error.call(d.context,h,a,e),m&&c.event.trigger("ajaxError",[h,
    d,e]));m&&c.event.trigger("ajaxComplete",[h,d]);m&&!--c.active&&c.event.trigger("ajaxStop");d.complete&&d.complete.call(d.context,h,a);B=!0;d.timeout&&clearTimeout(v);setTimeout(function(){d.iframeTarget||q.remove();h.responseXML=null},100)}}}var f=g[0],k,l,d,m,r,q,n,h,y,v,u=!!c.fn.prop;if(b)for(l=0;l<b.length;l++)k=c(f[b[l].name]),k[u?"prop":"attr"]("disabled",!1);if(c(":input[name=submit],:input[id=submit]",f).length)alert('Error: Form elements must not have name or id of "submit".');else if(d=
    c.extend(!0,{},c.ajaxSettings,a),d.context=d.context||d,r="jqFormIO"+(new Date).getTime(),d.iframeTarget?(q=c(d.iframeTarget),k=q.attr("name"),null==k?q.attr("name",r):r=k):(q=c('<iframe name="'+r+'" src="'+d.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),n=q[0],h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var b=a==="timeout"?
    "timeout":"aborted";p("aborting upload... "+b);this.aborted=1;q.attr("src",d.iframeSrc);h.error=b;d.error&&d.error.call(d.context,h,b,a);m&&c.event.trigger("ajaxError",[h,d,b]);d.complete&&d.complete.call(d.context,h,b)}},(m=d.global)&&!c.active++&&c.event.trigger("ajaxStart"),m&&c.event.trigger("ajaxSend",[h,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,h,d))d.global&&c.active--;else if(!h.aborted){if(b=f.clk)if((k=b.name)&&!b.disabled)d.extraData=d.extraData||{},d.extraData[k]=b.value,"image"==
    b.type&&(d.extraData[k+".x"]=f.clk_x,d.extraData[k+".y"]=f.clk_y);var A=1,x=2;d.forceSync?e():setTimeout(e,10);var C,o,D=50,B,E=c.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},F=c.parseJSON||function(a){return window.eval("("+a+")")}}}if(!this.length)return p("ajaxSubmit: skipping submit process - no element selected"),
    this;var j,b,g=this;"function"==typeof a&&(a={success:a});j=this.attr("method");b=this.attr("action");(b=(b="string"===typeof b?c.trim(b):"")||window.location.href||"")&&(b=(b.match(/^([^#]+)/)||[])[1]);a=c.extend(!0,{url:b,success:c.ajaxSettings.success,type:j||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);b={};this.trigger("form-pre-serialize",[this,a,b]);if(b.veto)return p("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&
    !1===a.beforeSerialize(this,a))return p("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var e,f,k=this.formToArray(a.semantic);if(a.data)for(e in a.extraData=a.data,a.data)if(c.isArray(a.data[e]))for(var l in a.data[e])k.push({name:e,value:a.data[e][l]});else f=a.data[e],f=c.isFunction(f)?f():f,k.push({name:e,value:f});if(a.beforeSubmit&&!1===a.beforeSubmit(k,this,a))return p("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[k,this,a,
    b]);if(b.veto)return p("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=c.param(k);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var m=[];a.resetForm&&m.push(function(){g.resetForm()});a.clearForm&&m.push(function(){g.clearForm()});if(!a.dataType&&a.target){var u=a.success||function(){};m.push(function(b){var e=a.replaceTarget?"replaceWith":"html";c(a.target)[e](b).each(u,arguments)})}else a.success&&m.push(a.success);a.success=function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               c,e){for(var f=a.context||a,i=0,j=m.length;i<j;i++)m[i].apply(f,[b,c,e||g,g])};e=0<c("input:file",this).length;l="multipart/form-data"==g.attr("enctype")||"multipart/form-data"==g.attr("encoding");!1!==a.iframe&&(e||a.iframe||l)?a.closeKeepAlive?c.get(a.closeKeepAlive,function(){i(k)}):i(k):(c.browser.msie&&"get"==j&&(e=g[0].getAttribute("method"),"string"===typeof e&&(a.type=e)),c.ajax(a));this.trigger("form-submit-notify",[this,a]);return this};c.fn.ajaxForm=function(a){if(0===this.length){var i=
    this.selector,j=this.context;if(!c.isReady&&i)return p("DOM not ready, queuing ajaxForm"),c(function(){c(i,j).ajaxForm(a)}),this;p("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),c(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var g=a.target,e=c(g);if(!e.is(":submit,input:image")){g=e.closest(":submit");if(0==g.length)return;g=g[0]}var f=
    this;f.clk=g;"image"==g.type&&(void 0!=a.offsetX?(f.clk_x=a.offsetX,f.clk_y=a.offsetY):"function"==typeof c.fn.offset?(e=e.offset(),f.clk_x=a.pageX-e.left,f.clk_y=a.pageY-e.top):(f.clk_x=a.pageX-g.offsetLeft,f.clk_y=a.pageY-g.offsetTop));setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a){var i=[];if(0===this.length)return i;var j=this[0],b=a?j.getElementsByTagName("*"):j.elements;
    if(!b)return i;var g,e,f,k,l,m;g=0;for(l=b.length;g<l;g++)if(e=b[g],f=e.name)if(a&&j.clk&&"image"==e.type)!e.disabled&&j.clk==e&&(i.push({name:f,value:c(e).val()}),i.push({name:f+".x",value:j.clk_x},{name:f+".y",value:j.clk_y}));else if((k=c.fieldValue(e,!0))&&k.constructor==Array){e=0;for(m=k.length;e<m;e++)i.push({name:f,value:k[e]})}else null!==k&&"undefined"!=typeof k&&i.push({name:f,value:k});if(!a&&j.clk&&(a=c(j.clk),b=a[0],(f=b.name)&&!b.disabled&&"image"==b.type))i.push({name:f,value:a.val()}),
        i.push({name:f+".x",value:j.clk_x},{name:f+".y",value:j.clk_y});return i};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var i=[];this.each(function(){var j=this.name;if(j){var b=c.fieldValue(this,a);if(b&&b.constructor==Array)for(var g=0,e=b.length;g<e;g++)i.push({name:j,value:b[g]});else null!==b&&"undefined"!=typeof b&&i.push({name:this.name,value:b})}});return c.param(i)};c.fn.fieldValue=function(a){for(var i=[],j=0,b=this.length;j<b;j++){var g=
    c.fieldValue(this[j],a);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?c.merge(i,g):i.push(g))}return i};c.fieldValue=function(a,i){var j=a.name,b=a.type,g=a.tagName.toLowerCase();void 0===i&&(i=!0);if(i&&(!j||a.disabled||"reset"==b||"button"==b||("checkbox"==b||"radio"==b)&&!a.checked||("submit"==b||"image"==b)&&a.form&&a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){var e=a.selectedIndex;if(0>e)return null;for(var j=[],g=a.options,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                f=(b="select-one"==b)?e+1:g.length,e=b?e:0;e<f;e++){var k=g[e];if(k.selected){var l=k.value;l||(l=k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value);if(b)return l;j.push(l)}}return j}return c(a).val()};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=
    this.type,j=this.tagName.toLowerCase();a.test(c)||"textarea"==j?this.value="":"checkbox"==c||"radio"==c?this.checked=!1:"select"==j&&(this.selectedIndex=-1)})};c.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};c.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var i=this.type;"checkbox"==
    i||"radio"==i?this.checked=a:"option"==this.tagName.toLowerCase()&&(i=c(this).parent("select"),a&&(i[0]&&"select-one"==i[0].type)&&i.find("option").selected(!1),this.selected=a)})}})(jQuery);
