function getStyle(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle}
var openBox={show:function(a){this.mask||this.createMask();var b=getW(),a=document.getElementById(a);a.style.top=b.s+b.h/2-0.5*parseInt(getStyle(a).height)+"px";a.style.display="block";a.style.zIndex=99999;this.mask.style.display="block"},createMask:function(){var a=getW();this.mask=document.createElement("div");a.s_h<a.h&&(a.s_h=a.h);this.mask.style.height=a.s_h+"px";this.mask.style.width=a.w+"px";this.mask.style.zIndex=9999;this.mask.style.background="#000";this.mask.style.opacity="0.8";this.mask.className=
"mask_openBox";this.mask.style.filter="alpha(opacity:80)";document.body.appendChild(this.mask)},hide:function(a){this.mask&&(this.mask.style.display="none");document.getElementById(a).style.display="none"}};
function getW(){var a,b;a=document.documentElement.clientHeight||document.body.clientHeight;b=document.documentElement.clientWidth||document.body.clientWidth;screen_h=document.documentElement.scrollHeight||document.body.scrollHeight;return o={w:b,h:a,s:document.documentElement.scrollTop||document.body.scrollTop,s_h:screen_h}}
var selectBox={init:function(){this.li=$("#selectBox .selectList");this.li.hover(function(){$(this).find("ul").addClass("hover")},function(){$(this).find("ul").removeClass("hover")});this.li_chima=$(".chima_li");this.li_chima.bind("mouseover",function(){$("#chimaName").html($(this).html());var a=$(this).attr("data");$("#chimaSelectBox").show();$("#chimaSelectBox .hc").hide();$("#hc_"+a).show()});$("#chimaBox").bind("mouseleave",function(){$("#chimaSelectBox").hide()})}},mainList={init:function(){var a=
this;this.box=$("#mianWrap");this.li=$("#mianWrap .list");this.item=this.box.find(".item");this.item.hover(function(){$(this).addClass("item_hover")},function(){$(this).removeClass("item_hover")});this.l=items.length;this.c=0;this.boxT=this.box.offset().top;this.w_h=getW().h;a.timer=0;this.boxH=this.box.outerHeight(!0);a.dd=0;this.tip=null;this.loading=document.createElement("div");this.loading.className="loading";this.loading=$(this.loading);this.box.after(this.loading);this.li.find(".btnLike").live("click",
function(){if(!user_id)return commonLogin(),!1;var b=$(this).parents(".item"),c=b.attr("shoe_id"),d=b.attr("all_id");0<c?b="shoe":(b="all",c=d);var e=$(this);$.post(addlikeUrl,{like_type:b,id:c},function(b){if(parseInt(b.status)==1){var c={l:e.find("span").offset().left,t:e.find("span").offset().top};if(!a.tip){a.tip=document.createElement("span");a.tip.className="like_tip";a.tip.innerHTML=" +1 ";document.body.appendChild(a.tip)}$(a.tip).css({left:c.l,top:c.t-10,opacity:1});$(a.tip).show();$(a.tip).animate({top:c.t-
20},250);$(a.tip).fadeOut(250);c=e.find("span").html()?e.find("span").html():0;e.find("span").html(parseInt(c)+1);setTimeout(function(){e.attr("class","btnLike_ok")},400)}parseInt(b.status)==-5&&setTimeout(function(){e.attr("class","btnLike_ok")},400);if(parseInt(b.status)==-2){commonLogin();return false}},"json");return!1});this.maxT=this.boxT+this.boxH-this.w_h;a.loadOver=!1;this.scrollFn();a.timerLoading=null;$(window).bind("scroll",function(){a.scrollFn()})},scrollFn:function(){var a=this;if(this.loadOver)return!1;
a.timer=setTimeout(function(){getW().s>a.maxT&&(a.loading.show(),clearTimeout(a.timerLoading),a.timerLoading=setTimeout(function(){a.create()},500))},100)},create:function(){for(var a={},b=1;3>=b;b++)for(var c=0;4>c;c++){if(this.c>=this.l){if(!this.loadOver){for(var c=this.box.outerHeight(!0),d=0;4>d;d++){var e=document.createElement("div");e.style.background="#f0f0f0";e.style.height=c-this.li.eq(d).outerHeight(!0)+"px";this.li.eq(d).append(e)}this.loadOver=!0}break}a.id=items[this.c].id;a.shoe_id=
items[this.c].shoe_id;a.name=items[this.c].title;a.price=items[this.c].price;a.url=items[this.c].detail_url;a.img_url=items[this.c].img_url;a.is_verified=items[this.c].is_verified;a.brand_name=items[this.c].brand_name;a.brand_id=items[this.c].brand_id;a.title=items[this.c].title;a.category_name=items[this.c].category_name;a.styles=items[this.c].styles;a.edit_url=items[this.c].edit_url;a.give_money=items[this.c].give_money;a.freight_payer=items[this.c].freight_payer;a.sold_count=+items[this.c].sold_count;
a.like_count=items[this.c].like_count;a.like=items[this.c].like;d=$(this.item_html(a));this.li.eq(c).append(d);d.hover(function(){$(this).addClass("item_hover")},function(){$(this).removeClass("item_hover")});addTrackEvent(d);this.c++}this.boxH=this.box.outerHeight(!0);this.maxT=this.boxT+this.boxH-this.w_h;this.loading.hide()},item_html:function(a){var b=a.price.indexOf("."),c;c=""+('<div class="item" all_id="'+a.id+'" shoe_id="'+(a.shoe_id?a.shoe_id:0)+'" >');c=c+'<div class="inner">'+('  <div class="photo"> <a data-track="index-pic-'+
a.name+"-"+(a.brand_name?a.brand_name:"")+"-"+a.is_verified+'" target="_blank" href="'+a.url+'"> <img src="'+a.img_url+'" class="errorPic1" alt="'+a.title+'" title="'+a.title+' "/></a> ');a.is_verified&&(c+='<img src="/images/trade/icon_jd.png" alt="经虎扑鉴定团鉴定为正品" title="经虎扑鉴定团鉴定为正品" class="jd" />');c+='<div class="jg">¥<span>'+a.price.substring(0,b)+"</span>"+a.price.substring(b)+"</div>";c+='<div class="bg"></div>';a.edit_url&&(c+='<a target="_blank" href="'+a.edit_url+'" class="bj">编辑</a>');hasCredential&&
"0.00"!=a.give_money&&(c+='<div class="give_money">佣金：'+a.give_money+"</div>");c=c+'</div><div class="info"><div class="pinpai">'+('<a class="'+(a.like?"btnLike_ok":"btnLike")+'" href="javascript:;"><em>收藏<span>'+(0<a.like_count?a.like_count:"")+"</span></em></a>");c+='    <div class="btnBox">';1==a.freight_payer&&(c+='<img src="/images/trade/transparent.gif" alt="包邮" title="包邮" width="51" height="23" class="icon_by fl" />');c+='<em class="c_000">'+a.name+"</em>";return c+"</div>  </div></div> </div>"}};
function submitRight(){var a=2,b=setInterval(function(){a--;0===a&&(clearInterval(b),window.location.href=homepage_url)},1E3);openBox.show("fbzg_box");openBox.mask.style.display="none"}$(function(){$("a").focus(function(){$(this).blur()});addTrackEvent();addEventForFeedbackBtn();addEventForSendFeedbackBtn()});
function addTrackEvent(a){$context=a?$(a):$(document);$("#no-track").length||($("[data-track]",$context).click(function(a){a.stopPropagation();a=$(this).data("track");a=parseKeywords(a,$(this));commonClickLog(a,"shihuo");commonGa(a)}),$("[data-track-block]",$context).each(function(a,c){var d=$(c),e=d.data("track-block");$("a",d).click(function(a){a.stopPropagation();a=parseKeywords(e,$(this));commonClickLog(a,"shihuo");commonGa(a)})}))}
function parseKeywords(a,b){var c=$(b),c=$.trim(c.text().replace(" ",""));return c=a.replace("{{innerText}}",c)}
var returnTop={init:function(){this.returnTop=$("#returnTop");this.returnTop.hide();var a=this;$(window).bind("scroll",function(){0<getW().s?a.returnTop.fadeIn():a.returnTop.fadeOut()})}},fixedSelect={init:function(){var a=this;this.pos=$("#pos");this.selectWrap=$("#selectWrap");this.selectBox=$("#selectBox");this.selectInner=$("#selectInner");this.btn=$("#pos_ts");this.pos_t=this.pos.offset().top;this.h_no=!1;$(window).bind("scroll",function(){a.scrollFn()});a.timer2=0;this.isShow=!1},scrollFn:function(){var a=
getW().s,b=this;this.h_no||(this.selectWrap.height(this.selectWrap.outerHeight(!0)),this.h_no=!0);a>this.pos_t?(b.selectBox.hide(),this.isShow=!0,this.selectInner.addClass("pos_fixed"),this.btn.bind("click",function(){if(b.isShow){clearTimeout(b.timer2);b.selectBox.slideDown(200)}}),this.btn.bind("mouseover",function(){if(b.isShow){clearTimeout(b.timer2);b.timer2=setTimeout(function(){b.selectBox.slideDown(200)},250)}}),b.selectWrap.bind("mouseleave",function(){if(b.isShow){clearTimeout(b.timer2);
b.timer2=setTimeout(function(){b.selectBox.slideUp(150)},250)}})):(this.isShow=!1,this.selectInner.removeClass("pos_fixed"),clearTimeout(b.timer2),b.selectBox.show())}};function addEventForFeedbackBtn(){$("#btn-feedback").click(function(a){a.preventDefault();a.stopPropagation();openBox.show("fk_openBox")});$("#btn-feedback2").click(function(a){a.preventDefault();a.stopPropagation();openBox.show("fk_openBox2")})}
function addEventForSendFeedbackBtn(){$("#btn-send-feedback").click(function(a){a.stopPropagation();a.preventDefault();var b=$("#content").val(),a=$("#content").attr("placeholder");!b||b==a?alert("内容不能为空"):(b=$.trim($("#email").val()),a=$("#email").attr("placeholder"),b&&b!=a&&!/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i.test(b)?alert("邮箱地址不正确"):feedback())})}
function feedback(){$.ajax($("#url-feedback").val(),{data:{email:$("#email").val()==$("#email").attr("placeholder")?"":$("#email").val(),content:$("#content").val()==$("#content").attr("placeholder")?"":$("#content").val()},dataType:"json",success:function(a){alert(a.status.message);200==a.status.code&&(openBox.hide("fk_openBox"),$("#content").val(""),$("#email").val(""))}})}
var searchLink={init:function(a){var b=this;if(!a)return!1;this.input=$(a);this.zbqAboutSearch=$("#zbq-aboutSearch");this.zbqSearchSubmit=$("#zbq-searchSubmit");""==this.zbqSearchSubmit.val()&&this.zbqSearchSubmit.val("产品名、品牌");this.zbqAboutSearch_inner=this.zbqAboutSearch.find("ul");this.c=this.l=0;this.old=[];this.input.focus(function(){$(document).keyup(function(a){a=a||window.event;switch(a.keyCode){case 37:break;case 38:1<=b.l&&(1<b.c?b.c--:b.c=b.l,b.setOn());break;case 39:break;case 40:1<=b.l&&
(b.c<b.l?b.c++:b.c=0,b.setOn());break;case 13:b.keyDownFn();1<=b.l&&""!=$.trim(b.zbqSearchSubmit.val())&&(location.href=b.zbqAboutSearch_li.eq(b.c-1).attr("href"));break;default:b.keyDownFn()}})});this.input.blur(function(){clearInterval(b.timer);$(document).unbind("keyup")})},keyDownFn:function(){for(var a=this,b=a.input.val(),c=0;c<a.old.length;c++)if(b==a.old[c].name)return searchAbout=a.old[c].text,a.createHtml(),!1;$.trim(b).length?$.getJSON("/all/search",{q:b},function(c){searchAbout=c;c={};
c.name=b;c.text=searchAbout;a.old.push(c);a.createHtml()}):a.zbqAboutSearch.hide()},setOn:function(){this.zbqAboutSearch_li.removeClass("on");this.zbqAboutSearch_li.eq(this.c-1).addClass("on")},bindA:function(){var a=this;this.zbqAboutSearch_li=this.zbqAboutSearch_inner.find("a");this.zbqAboutSearch_li.hover(function(){a.zbqAboutSearch_li.removeClass("on");$(this).addClass("on")},function(){$(this).removeClass("on")})},createHtml:function(){var a="",b=searchAbout.brand_results,c=searchAbout.item_results,
d=b.length||0,e=c.length||0;this.l=d+e;for(var g=0;g<d;g++)var f=b[g],a=a+('<li><a href="'+f.link+'" data-track="search-{{'+f.name+'}}"><span class="text">'+f.name+'</span><span class="num">约'+f.count+"条结果</span></a></li>");for(b=0;b<e;b++)d=c[b],a+='<li><a href="'+d.link+'" data-track="search-contains-{{'+d.name+'}}"><span class="text">'+d.name+'</span><span class="num">约'+d.count+"条结果</span></a></li>";this.zbqAboutSearch_inner.html(a);addTrackEvent(this.zbqAboutSearch_inner);0<this.l?(this.zbqAboutSearch.show(),
this.bindA()):this.zbqAboutSearch.hide()}};function showMsg(a){document.title=a};
