/** 
 * @Description: shihuo 
 * @author: lanyang 
 * @Update: 2014-05-21 17:05 
 */ 
function tab(a,b,c,d){for(i=1;d>=i;i++)document.getElementById(a+i).className="",document.getElementById(b+i).style.display="none";document.getElementById(a+c).className="cur",document.getElementById(b+c).style.display="block"}function warning(a,b){var c=getWarningString(a,b);doWarning(c)}function doWarning(a){$("#j_tip").remove(),$("body").prepend('<div id="j_tip" class="tips_up_pop" style="display:none"><div id="j_tip_t"><div id="tips_pop">'+a+"</div></div></div>");var b=popTL("#j_tip");$("#j_tip").css({top:b.split("|")[0]+"px",left:b.split("|")[1]+"px"}),$("#j_tip").show(),setTimeout("$('#j_tip').fadeOut(426);",2130)}function popTL(a){var b=document.body.scrollTop+document.documentElement.scrollTop,c=document.documentElement.scrollLeft,d=document.documentElement.clientHeight,e=document.documentElement.clientWidth,f=300,g=$(a).width(),h=Number(b)+(Number(d)-Number(f))/2,i=Number(c)+(Number(e)-Number(g))/2;return h+"|"+i}function getWarningArray(a){switch(a){case 1:var b={0:"\u56de\u590d\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664","-1":"\u8bf7\u9009\u767b\u5f55","-2":"\u51fa\u9519\u5566","-3":"\u60a8\u5df2\u7ecf\u70b9\u4eae\u8fc7\u4e86","-4":"\u60a8\u4e0d\u80fd\u70b9\u4eae\u81ea\u5df1","-5":"\u5c0f\u9ed1\u5c4b\u4f4f\u6237\uff0c\u4e0d\u80fd\u8fdb\u884c\u64cd\u4f5c","-6":"\u70b9\u4eae\u592a\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"};return b;case 2:var c={"-1":"\u8bf7\u9009\u767b\u5f55","-2":"\u56de\u590d\u7684\u5185\u5bb9\u8bf7\u63a7\u5236\u57281-5000\u4e2a\u5b57\u4e4b\u95f4","-3":"\u8be5\u4fe1\u606f\u5df2\u7ecf\u88ab\u9501\u5b9a\uff0c\u65e0\u6cd5\u56de\u590d\u5566","-4":"\u5c0f\u9ed1\u5c4b\u4f4f\u6237\uff0c\u65e0\u6cd5\u56de\u590d","-5":"\u5168\u7ad9\u5c01\u7981\u7528\u6237\uff0c\u65e0\u6cd5\u56de\u590d","-6":"\u56de\u590d\u592a\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5","-8":"\u62b1\u6b49\u60a8\u7b49\u7ea7\u592a\u4f4e\u4e86\uff0c\u4e0d\u80fd\u53d1\u8868\u8bc4\u8bba-_-!!!","-9":"\u60a8\u5728\u65b0\u58f0\u9891\u9053\u88ab\u7981\u8a00\u4e86\uff0c\u4e0d\u80fd\u53d1\u8868\u8bc4\u8bba!"};return c;case 3:var d={0:"\u56de\u590d\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664","-1":"\u8bf7\u9009\u767b\u5f55","-2":"\u51fa\u9519\u5566","-3":"\u60a8\u5df2\u7ecf\u4e3e\u62a5\u8fc7\u4e86","-4":"\u60a8\u4e0d\u80fd\u4e3e\u62a5\u81ea\u5df1","-5":"\u5c0f\u9ed1\u5c4b\u4f4f\u6237\uff0c\u4e0d\u80fd\u8fdb\u884c\u64cd\u4f5c","-6":"\u4e3e\u62a5\u592a\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"};return d;default:return new Array}}function getWarningString(a,b){var c=getWarningArray(a);return c[b]?c[b]:"\u51fa\u9519\u5566~"}function addFavorite(a){var b=-1!=navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL";if(document.all)try{window.external.addFavorite(window.location,document.title)}catch(c){alert("\u6536\u85cf\u5931\u8d25\n\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u901a\u8fc7\u5feb\u6377\u952e"+b+" + D \u52a0\u5165\u5230\u6536\u85cf\u5939~")}else window.sidebar?(a.attr("rel","sidebar"),a.attr("href",window.location)):alert("\u6536\u85cf\u5931\u8d25\n\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u901a\u8fc7\u5feb\u6377\u952e"+b+" + D \u52a0\u5165\u5230\u6536\u85cf\u5939~")}!function(a){var b="maxWidth"in document.documentElement.style,c=!-[1]&&!("prototype"in Image)&&b;a.fn.autoIMG=function(a){var b=a||{},c=b.width||this.width();return this.find("img").each(function(a,b){var e=b.src;b.style.display="none",b.removeAttribute("src"),d(e,function(a,d){a>c&&(d=c/a*d,a=c,b.style.width=a+"px",b.style.height=d+"px"),b.style.display="",b.setAttribute("src",e)})})},c&&function(a,b,c){c=b.createElement("style"),b.getElementsByTagName("head")[0].appendChild(c),c.styleSheet&&(c.styleSheet.cssText+=a)||c.appendChild(b.createTextNode(a))}("img {-ms-interpolation-mode:bicubic}",document);var d=function(){var a=[],b=null,c=function(){for(var b=0;b<a.length;b++)a[b].end?a.splice(b--,1):a[b]();!a.length&&d()},d=function(){clearInterval(b),b=null};return function(d,e,f,g){var h,i,j,k,l,m=new Image;return m.src=d,m.complete?(e(m.width,m.height),void(f&&f(m.width,m.height))):(i=m.width,j=m.height,h=function(){k=m.width,l=m.height,(k!==i||l!==j||k*l>1024)&&(e(k,l),h.end=!0)},h(),m.onerror=function(){g&&g(),h.end=!0,m=m.onload=m.onerror=null},m.onload=function(){f&&f(m.width,m.height),!h.end&&h(),m=m.onload=m.onerror=null},void(h.end||(a.push(h),null===b&&(b=setInterval(c,40)))))}}()}(jQuery),function(a){var b={defaults:{type:"data-track"},init:function(){var c=b,d=arguments;return this.each(function(){var b=this;this.defaults=a.extend(!0,{},c.defaults,d[0]||{}),a(this).bind("click",function(){c.getAttr(a(this),b.defaults.type)})})},getAttr:function(a,b){var c=a.attr(b);commonGa(c)}};a.fn.extend({countGa:b.init})}(jQuery),function(a){var b={init:function(){var b=this;if(this.$elem=a(".J_message_fn_tip"),!this.$elem.length)return!1;var c=a(".J_message_btn_recommend"),d=a(".J_message_btn_oppose"),e=1;"undefined"!=typeof pageType&&"topic"==pageType&&(e=2),c.bind("click",function(){b.setMessageRecommendData(a(this),e,1)}),d.bind("click",function(){b.setMessageRecommendData(a(this),e,2)})},isLogin:function(){var a=document.cookie.match(new RegExp("(^| )ua=([^;]*)(;|$)"));return a&&a[2]?!0:void 0},setMessageRecommendData:function(b,c,d){if(!this.isLogin())return commonLogin("hupu"),!1;var e=b.parents(".J_message_fn_tip"),f=e.find(".recommend-box a"),g=e.find(".recommend-num"),h=e.find(".oppose-num"),i=e.attr("data-message-id"),j={id:i,type:d,source:c};a.getJSON("http://www.shihuo.cn/message_support_agaist",j,function(a){200==a.status&&(g.text(a.data.snum),h.text(a.data.anum),1==d?(f.removeClass("btn-oppose-on"),b.toggleClass("btn-recommend-on")):(f.removeClass("btn-recommend-on"),b.toggleClass("btn-oppose-on"))),doWarning(a.msg)})}};b.init()}(jQuery,window,document),function(a){var b={init:function(){var b=this;return this.$elem=a(".J_shihuo_share"),this.$elem.length?(this.$item=this.$elem.find("a"),void this.$item.bind("click",function(){b.getCon(a(this))})):!1},getShare:function(b){var c=600,d=450,e=0,f=(window.screen.availHeight-30-d)/2,g=(window.screen.availWidth-10-c)/2,h="3033141272",i="801094981",j="2754272121",k="\u864e\u6251\u8bc6\u8d27",l="",b=a.extend({element:"",title:"",link:"",pic:""},b),m=b.element,n=b.title,o=b.link,p=b.pic?b.pic:"";switch(m){case"weibo":l="http://service.weibo.com/share/share.php?url="+encodeURIComponent(o)+"&title="+encodeURIComponent(n)+"&pic="+encodeURIComponent(p)+"&appkey="+encodeURIComponent(h)+"&ralateUid="+encodeURIComponent(j);break;case"qq":l="http://v.t.qq.com/share/share.php?url="+encodeURIComponent(o)+"&title="+encodeURIComponent(n+" \uff08\u5206\u4eab\u81ea @hupuvoice)")+"&pic="+encodeURI(p)+"&appkey="+encodeURIComponent(i);break;case"qzone":l="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(o)+"&title="+encodeURIComponent(n)+"&pics="+encodeURI(p)+"&site="+encodeURIComponent(k);break;case"renren":l="http://widget.renren.com/dialog/share?link="+encodeURIComponent(o)+"&title="+encodeURIComponent(n)+"&pic="+encodeURIComponent(p)}0==e&&(e=1,window.open(""+l,"_blank","scrollbars=no,width="+c+",height="+d+",left="+g+",top="+f+",status=no,resizable=yes"))},getCon:function(b){var c,d=b.parents(".shihuo-index-item"),e=b.attr("data-shareName"),f=document.title,g=location.href;if(d.length){var h=d.find(".item-hd h2 a");f=h.text(),g=h.attr("href"),c=d.find(".item-bd-all img").attr("src")}else f=a(".detail-title h1").text(),c=a(".detail-content-main img").attr("src");this.getShare({element:e,title:f,link:g,pic:c})}};b.init()}(jQuery,window,document),function(a){var b={init:function(){return this.elem=a("#J_tuangou_item"),this.elem.length?(this.item=this.elem.find("dl"),void this.bindFn()):!1},bindFn:function(){var b=this;this.item.bind("mouseover",function(){b.item.removeClass("on"),a(this).addClass("on")})}};b.init()}(jQuery,window,document),function(a){var b={init:function(){return this.item=a(".J_btn_view_all"),this.item.length?void this.bindFn():!1},bindFn:function(){var b=this;this.item.bind("click",function(){return b.showAll(a(this)),!1})},showAll:function(b){var c,d,e=b.parents(".shihuo-index-item"),f=e.find(".item-bd"),g=e.find(".item-bd-all");return f.is(":visible")?(c=e.find(".item-bd-all img"),c.length&&(c.each(function(){d=a(this).attr("data-src"),a(this).attr({src:d})}),e.find(".shihuo-index-item-text").autoIMG()),f.hide(),g.show(),!1):(f.show(),g.hide(),void a("html, body").animate({scrollTop:e.offset().top},500))}};b.init()}(jQuery,window,document),$("a[data-track]").countGa(),function(a){var b={init:function(){var c=b;return this.each(function(){var b=this,d=a(b).find("li").length*(a(b).find("li").eq(0).outerWidth()+30);a(b).find("ul").width(d),b.move=5,b.allNum=a(b).find("li").length/b.move,b.now=0,b.lef=(a(b).find("li").eq(0).outerWidth()+27)*b.move,c.bindFn(b)})},bindFn:function(b){function c(){for(var c=0;c<b.move;c++)a(b).find("li").eq(0).appendTo(a(b).find("ul"))}function d(){for(var c=0;c<b.move;c++){var d=a(b).find("li").length-1;a(b).find("li").eq(d).prependTo(a(b).find("ul"))}}function e(){if(g)return!1;if(g=!0,b.now+=1,b.now<b.allNum)a(b).find("ul").animate({left:-b.lef*b.now},function(){g=!1});else{var e=parseInt(a(b).find("ul").css("left"))+b.lef;c(),a(b).find("ul").css({left:e}).animate({left:-b.lef*b.now+b.lef},function(){d(),b.now=0,a(b).find("ul").css({left:0}),g=!1})}}function f(){return g?!1:(g=!0,void(0!=b.now?(b.now-=1,a(b).find("ul").animate({left:-b.lef*b.now},function(){g=!1})):(d(),a(b).find("ul").css({left:-b.lef}).animate({left:0},function(){g=!1}))))}var g;a(b).find(".next").click(function(){e()}),a(b).find(".pre").click(function(){f()}),a(b).find("li").hover(function(){a(this).addClass("on")},function(){a(this).removeClass("on")}),a(b).find(".pre").hover(function(){a(this).removeClass().addClass("preon")},function(){a(this).removeClass().addClass("pre")}),a(b).find(".next").hover(function(){a(this).removeClass().addClass("nexton")},function(){a(this).removeClass().addClass("next")}),setTimeout(function(){e(),setInterval(function(){e()},1e4)},5e3)}};a.fn.jscr=b.init,a(".top-js-scrll").jscr()}(jQuery),$(".guanzhu_shoucang").find(".shoucang a").click(function(){__dace.sendEvent("shihuo_favourite"),addFavorite($(this))}),!function(a){var b={init:function(){this.bindFun()},bindFun:function(){var b=a(".shop-tag-list");b.find(".shops-more").click(function(){a(this).hasClass("mor")?(b.find(".shop-name-list").css("height",32),a(this).removeClass("mor m2"),a(this).find("i").html("\u66f4\u591a")):(b.find(".shop-name-list").css("height","auto"),a(this).addClass("mor m2"),a(this).find("i").html("\u6536\u8d77"))}),b.find(".shops-more").hover(function(){a(this).find("s").removeClass().addClass(a(this).hasClass("mor")?"m1":"m2")},function(){a(this).find("s").removeClass().addClass(a(this).hasClass("mor")?"m2":"m1")})}};b.init()}(jQuery);