$(function(){content.init();postRight.init();buy.init();post.init();new youhui_project;move.init({dom:$(".ad_js_scroll"),interval:50,pixel:1})});
var post={init:function(){if(0==$(".huoubuy_goodslist_title").length)return!1;this.po=$(".huoubuy_goodslist_title");this.top=this.po.offset().top;this.bindFun()},bindFun:function(){var a=this;$(window).scroll(function(){a.getpageScroll()>a.top?a.po.addClass("huoubuy_goodslist_title_post"):a.po.removeClass("huoubuy_goodslist_title_post")})},getpageScroll:function(){var a;self.pageYOffset?a=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:
document.body&&(a=document.body.scrollTop);return a}},content={init:function(){this.li=$(".huoubuy_goodslist_content").find("li");this.time=this.li.find(".time");this.bindClick();this.times()},bindClick:function(){this.li.hover(function(){$(this).css("border-color","#9d0009")},function(){$(this).css("border-color","#eeeeee")})},times:function(){var a=this;this.time.each(function(){var b=$(this).attr("atr");a.SetRemainTime($(this),60*b)});a.SetRemainTime($(".goods_times"),60*$(".goods_times").attr("atr"))},
SetRemainTime:function(a,b){var c=parseInt(b),d=setInterval(function(){0<c?(c-=1,a.html("剩余"+Math.floor(c/3600/24)+"天"+Math.floor(c/3600%24)+"小时"+Math.floor(c/60%60)+"分"+Math.floor(c%60)+"秒")):(a.html("已到期"),clearInterval(d))},1E3)}},buy={init:function(){this.obj=$(".huoubuy_buy");this.bindClick()},bindClick:function(){this.obj.click(function(){$.Jui._showMasks(0.5);$.browser.msie&&6>=parseInt($.browser.version)?$(".buy_layer").css({left:($.Jui._getpageSize()[0]-parseInt($(".buy_layer").width()))/
2}).fadeIn():$(".buy_layer").css({left:($.Jui._getpageSize()[0]-parseInt($(".buy_layer").width()))/2,top:($.Jui._getpageSize()[1]-parseInt($(".buy_layer").height()))/2-100}).fadeIn()});$(".buy_layer_title span").click(function(){$.Jui._closeMasks();$(".buy_layer").fadeOut()})}},postRight={init:function(){this.a=$(".post_right");this.bindClick()},bindClick:function(){var a=this;$(window).scroll(function(){200<$.Jui._getpageScroll()?(a.a.find(".c_d").css("display","block"),$.Jui.isie6||a.a.css({marginTop:$.Jui._getpageSize()[1]-
190})):a.a.find(".c_d").hide()});a.a.find(".c_d").click(function(){$("html, body").animate({scrollTop:0})});$(".post_erwei .erwei_close").click(function(){$(".post_erwei").remove()})}},move={moveInt:0,timeInt:null,init:function(a){if(0<a.dom.length){var b=a.dom.outerWidth(),c=a.dom.find(".title").outerWidth();a.dom.find(".font_txt").css("width",b-c-10);a.dom.find(".content").css("width",this.checkWidth(a.dom));b-c-10<this.checkWidth(a.dom)&&(this.getMove(a),this.bindFun(a))}},checkWidth:function(a){var b=
0;a.find(".list").each(function(){b+=$(this).outerWidth()+15});return b},bindFun:function(a){var b=this;a.dom.find(".list").hover(function(){clearInterval(b.timeInt)},function(){b.getMove(a)})},getMove:function(a){var b=this,c=a.dom.find(".list:first"),d=c.outerWidth()+10;b.timeInt=setInterval(function(){b.moveInt-=a.pixel;b.moveInt>-d?c.css("margin-left",b.moveInt):(clearInterval(b.timeInt),c.removeAttr("style"),a.dom.find(".content").append(c),b.moveInt=0,b.getMove(a))},a.interval)}};
function youhui_project(){this.youhuiClick()}
youhui_project.prototype={constructor:youhui_project,ajaxLding:!1,youhuiClick:function(){var a=$("#user-btn"),b=$(".youhuiquan-show-layer"),c=$("#close-youhuiquan"),d=this;a.click(function(){if(d.ajaxLding)return!1;d.ajaxLding=!0;d.getJson()});c.click(function(){b.hide();$.Jui._closeMasks()})},getJson:function(){var a=$(".youhuiquan-show-layer"),b=$("#user-btn"),c=this;$.getJSON("http://www.shihuo.cn/coupons/receive?id=3",function(d){switch(1*d.status){case 0:$.Jui._showMasks(0.6);a.find(".code").html(d.data.account);
a.css({left:$.Jui._position(a)[0],top:$.Jui._position(a)[1]-100}).show();2==d.data.flag&&($("#user-btn").addClass("btn-box-2").html("今日已领用").removeAttr("id"),b.unbind("click"));1==d.data.flag&&($("#user-btn").addClass("btn-box-1").html("已领用完").removeAttr("id"),b.unbind("click"));break;case 1:commonLogin();break;case 2:case 3:$("#user-btn").addClass("btn-box-1").html("已领用完").removeAttr("id"),b.unbind("click");case 4:$("#user-btn").addClass("btn-box-2").html("今日已领用").removeAttr("id"),b.unbind("click")}c.ajaxLding=
!1},"json")}};
!function(a){a.Jui=a.Jui||{};a.extend(a.Jui,{_$:function(a,b){a.siblings().removeClass(b);a.addClass(b)},_showMasks:function(c){var b="<div class='body-mask' style='position:absolute; top:0; left:0; width:100%; height:"+a(document).height()+"px; background-color:#000;  z-index:300;'></div>";a("body").append(b);a(".body-mask").css("opacity",0);a(".body-mask").animate({opacity:c?c:"0.8"})},_closeMasks:function(){var c=a(".body-mask");c.fadeOut(function(){c.remove()})},_getpageSize:function(){var a=document.documentElement;
return[window.innerWidth||self.innerWidth||a&&a.clientWidth||document.body.clientWidth,window.innerHeight||self.innerHeight||a&&a.clientHeight||document.body.clientHeight]},_position:function(c){var b=(this._getpageSize()[0]-parseInt(c.outerWidth()))/2,c=(this._getpageSize()[1]-parseInt(c.outerHeight()))/2+a.Jui._getpageScroll();return[b,c]},_getpageScroll:function(){var a;self.pageYOffset?a=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:
document.body&&(a=document.body.scrollTop);return a},isie:!!a.browser.msie,isie6:!!a.browser.msie&&6>=parseInt(a.browser.version)});var b={css:{top:20},config:{speed:800,easing:"swing",time:0}};a.fn.textAnimation=function(c){return this.each(function(){var d=a(this),e=a.extend({},b,c);d.animate(e.css,e.config.speed,e.config.easing,function(){e.callback&&e.callback()})})}}(jQuery);
