function errorLayer(b){$('<div class="comment-layer">            <div class="title-area-box"><s id="error_close2"></s>提示</div>            <div class="clearfix">              <div class="t1">                <img src="/images/trade/haitao/comment/g1.jpg" />              </div>              <div class="t2">                <p>'+b+'</p>                <div class="close-btn" id="error_close">关闭</div>              </div>            </div>          </div>').appendTo("body");$.Jui._showMasks(0.6);$(".comment-layer").css({left:$.Jui._position($(".comment-layer"))[0],
top:$.Jui._position($(".comment-layer"))[1]})}function fileQueueError(b,a,c){try{switch(a){case -100:errorLayer("您已超出5长图片上限，请重新选择");break;case -130:errorLayer("只能上传jpg、png、jpeg格式的文件");break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:errorLayer("你上传的文件过大");break;default:errorLayer(c)}}catch(d){this.debug(d)}}function fileDialogComplete(b,a){try{0<a&&this.startUpload()}catch(c){this.debug(c)}}
function uploadProgress(b,a){try{var c=Math.ceil(100*(a/b.size)),d=new FileProgress(b,this.customSettings.upload_target);d.setProgress(c);100===c?(d.setStatus("生成缩略图..."),d.toggleCancel(!1,this)):(d.setStatus("正在上传..."),d.toggleCancel(!0,this))}catch(f){this.debug(f)}}
function uploadSuccess(b,a){try{var c=new FileProgress(b,this.customSettings.upload_target);"FILEID:"===a.substring(0,7)?(addImage("/item/thumbImage?path="+a.substring(7)),c.setStatus("缩略图生成成功！"),c.toggleCancel(!1)):(alert("发送错误，请稍后再试！"),c.setStatus("错误."),c.toggleCancel(!1),alert(a))}catch(d){this.debug(d)}}
function uploadComplete(b){try{if(0<this.getStats().files_queued)this.startUpload();else{var a=new FileProgress(b,this.customSettings.upload_target);a.setComplete();a.setStatus("所有图片上传完成.");a.toggleCancel(!1)}}catch(c){this.debug(c)}}
function uploadError(b,a,c){var d;try{switch(a){case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:try{d=new FileProgress(b,this.customSettings.upload_target),d.setCancelled(),d.setStatus("Cancelled"),d.toggleCancel(!1)}catch(f){this.debug(f)}break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:try{d=new FileProgress(b,this.customSettings.upload_target),d.setCancelled(),d.setStatus("Stopped"),d.toggleCancel(!0)}catch(e){this.debug(e)}case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert(c);break;default:alert(c)}}catch(g){this.debug(g)}}
var thumbid=0;function addImage(b){var a=document.createElement("div");a.id="thumb"+(thumbid+1);a.className="imgbox";$("#up-btn").before(a);a.innerHTML='<img src="'+b+'" class="get_img_src" />';a.innerHTML+='<p class="close-img"><input type="hidden" name="pictures" value="'+b.substring(b.lastIndexOf("path=")+5).replace(/_/g,"/")+'" /><a href="javascript:delPic('+(thumbid+1)+');">&nbsp;</a></p>';a.onload=function(){fadeIn(a,0)};thumbid+=1}
function delPic(b){var b=document.getElementById("thumb"+b),a=b.firstChild.src,c=a.lastIndexOf("?"),d=swfu.getStats();d.successful_uploads--;swfu.setStats(d);$.get("/item/delPic?"+a.substr(++c,a.length-c)+"&"+Math.random());document.getElementById("thumbnails").removeChild(b)}function loaded(){if(0!=pic_collect.length)for(val in pic_collect)addImageFromDb(pic_collect[val],this)}function loadedImage(b){addImageFromDb(b,swfu)}
function addImageFromDb(b,a){var c=a.getStats();c.successful_uploads++;a.setStats(c);addImage("/item/thumbImage?path="+b)}function fadeIn(b,a){if(100>a)if(a+=5,100<a&&(a=100),b.filters)try{b.filters.item("DXImageTransform.Microsoft.Alpha").opacity=a}catch(c){b.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")"}else b.style.opacity=a/100;100>a&&setTimeout(function(){fadeIn(b,a)},30)}
function FileProgress(b,a){this.fileProgressID="divFileProgress";if(this.fileProgressWrapper=document.getElementById(this.fileProgressID))this.fileProgressElement=this.fileProgressWrapper.firstChild,this.fileProgressElement.childNodes[1].firstChild.nodeValue=b.name;else{this.fileProgressWrapper=document.createElement("div");this.fileProgressWrapper.className="progressWrapper";this.fileProgressWrapper.id=this.fileProgressID;this.fileProgressElement=document.createElement("div");this.fileProgressElement.className=
"progressContainer";var c=document.createElement("a");c.className="progressCancel";c.href="#";c.style.visibility="hidden";c.appendChild(document.createTextNode(" "));var d=document.createElement("div");d.className="progressName";d.appendChild(document.createTextNode(b.name));var f=document.createElement("div");f.className="progressBarInProgress";var e=document.createElement("div");e.className="progressBarStatus";e.innerHTML="&nbsp;";this.fileProgressElement.appendChild(c);this.fileProgressElement.appendChild(d);
this.fileProgressElement.appendChild(e);this.fileProgressElement.appendChild(f);this.fileProgressWrapper.appendChild(this.fileProgressElement);document.getElementById(a).appendChild(this.fileProgressWrapper);fadeIn(this.fileProgressWrapper,0)}this.height=this.fileProgressWrapper.offsetHeight}
FileProgress.prototype.setProgress=function(b){this.fileProgressElement.className="progressContainer green";this.fileProgressElement.childNodes[3].className="progressBarInProgress";this.fileProgressElement.childNodes[3].style.width=b+"%"};FileProgress.prototype.setComplete=function(){this.fileProgressElement.className="progressContainer blue";this.fileProgressElement.childNodes[3].className="progressBarComplete";this.fileProgressElement.childNodes[3].style.width=""};
FileProgress.prototype.setError=function(){this.fileProgressElement.className="progressContainer red";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width=""};FileProgress.prototype.setCancelled=function(){this.fileProgressElement.className="progressContainer";this.fileProgressElement.childNodes[3].className="progressBarError";this.fileProgressElement.childNodes[3].style.width=""};
FileProgress.prototype.setStatus=function(b){this.fileProgressElement.childNodes[2].innerHTML=b};FileProgress.prototype.toggleCancel=function(b,a){this.fileProgressElement.childNodes[0].style.visibility=b?"visible":"hidden";if(a){var c=this.fileProgressID;this.fileProgressElement.childNodes[0].onclick=function(){a.cancelUpload(c);return!1}}};
!function(b){b.Jui=b.Jui||{};b.extend(b.Jui,{_$:function(a,b){a.siblings().removeClass(b);a.addClass(b)},_showMasks:function(a){var c="<div class='body-mask' style='position:absolute; top:0; left:0; width:100%; height:"+b(document).height()+"px; background-color:#000;  z-index:91;'></div>";b("body").append(c);b(".body-mask").css("opacity",0);b(".body-mask").animate({opacity:a?a:"0.8"})},_closeMasks:function(){var a=b(".body-mask");a.fadeOut(function(){a.remove()})},_getpageSize:function(){var a=document.documentElement;
return[window.innerWidth||self.innerWidth||a&&a.clientWidth||document.body.clientWidth,window.innerHeight||self.innerHeight||a&&a.clientHeight||document.body.clientHeight]},_position:function(a){var b=(this._getpageSize()[0]-parseInt(a.outerWidth()))/2,a=(this._getpageSize()[1]-parseInt(a.outerHeight()))/2;return[b,a]},_getpageScroll:function(){var a;self.pageYOffset?a=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:document.body&&
(a=document.body.scrollTop);return a},isie:!!b.browser.msie,isie6:!!b.browser.msie&&6>=parseInt(b.browser.version),DOC:b(document),WIN:b(window),HEAD:b(document).find("head"),BODY:b(document).find("body")});b.fn.tips=function(a,c){return this.each(function(){var d=b(this),f='<div class="tips_layer" style="position: absolute; border-radius:5px; background-color:#ff6600; display:none; z-index:995">                <div class="tips-text" style="padding:2px 5px; line-height:18px; color:#fff;">'+a+'</div>                <div class="diamond"></div>            </div>';
b(".tips_layer")&&b(".tips_layer").remove();b(f).appendTo("body");b(".tips-text");var e=b(".tips_layer");c?e.css({top:c.top,left:c.left}).show():e.css({top:d.offset().top-parseInt(d.height())-10,left:d.offset().left+parseInt(d.width()/2)-30}).show();setTimeout(function(){e.remove()},2E3)})}}(jQuery);
