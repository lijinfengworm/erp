//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery Color Animations v@VERSION
 * https://github.com/jquery/jquery-color
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: @DATE
 */

(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={},s=n==null?x.identity:k(n);return T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/\<\@(.+?)\@\>/g,interpolate:/\<\@=(.+?)\@\>/g,escape:/\<\@-(.+?)\@\>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(){}),jQuery(function($){function Iterator(e){this.length=e.length,this.each=function(n){$.each(e,n)},this.size=function(){return e.length}}var projekktors=[];document.createElement("video").canPlayType&&function(){return;var e,t}(),$.fn.prop||($.fn.prop=function(e,t){return $(this).attr(e,t)}),projekktor=$p=function(){function PPlayer(srcNode,cfg,onReady){return this.config=new projekktorConfig("1.3.09"),this.env={muted:!1,playerDom:null,mediaContainer:null,agent:"standard",mouseIsOver:!1,loading:!1,className:"",onReady:onReady},this.media=[],this._plugins=[],this._pluginCache={},this._queue=[],this._cuePoints={},this.listeners=[],this.playerModel={},this._isReady=!1,this._maxElapsed=0,this._currentItem=null,this._playlistServer="",this._id="",this._reelUpdate=function(obj){var ref=this,itemIdx=null,data=obj||[{}],files=data.playlist||data;this.env.loading=!0,this.media=[];try{for(var props in data.config)if(data.config.hasOwnProperty(props)){if(typeof data.config[props].indexOf("objectfunction")>-1)continue;this.config[props]=eval(data.config[props])}null!=data.config&&($p.utils.log("Updated config var: "+props+" to "+this.config[props]),this._promote("configModified"),delete data.config)}catch(e){}$.each(files,function(){itemIdx=ref._addItem(ref._prepareMedia({file:this,config:this.config||{},errorCode:this.errorCode||0})),$.each(this.cuepoints||[],function(){this.item=itemIdx,ref.setCuePoint(this)})}),null===itemIdx&&this._addItem(this._prepareMedia({file:"",config:{},errorCode:97})),this.env.loading=!1,this._promote("scheduled",this.getItemCount()),this._syncPlugins(function(){ref.setActiveItem(0)})},this._addItem=function(e,t,n){var r=0;return 1===this.media.length&&"NA"==this.media[0].mediaModel&&(this._detachplayerModel(),this.media=[]),void 0===t||0>t||t>this.media.length-1?(this.media.push(e),r=this.media.length-1):(this.media.splice(t,n===!0?1:0,e),r=t),this.env.loading===!1&&this._promote("scheduleModified",this.getItemCount()),r},this._removeItem=function(e){var t=0;return 1===this.media.length?"NA"==this.media[0].mediaModel?0:(this.media[0]=this._prepareMedia({file:""}),0):(void 0===e||0>e||e>this.media.length-1?(this.media.pop(),t=this.media.length):(this.media.splice(e,1),t=e),this.env.loading===!1&&this._promote("scheduleModified",this.getItemCount()),t)},this._canPlay=function(e,t,n){var r=this,i=[],s=[],o=n||"http",u="object"==typeof t?t:[t],a=e?e.replace(/x-/,""):void 0,f=r._testMediaSupport();if($.each(u,function(e,t){$.each($.extend(f[o],f["*"]||[])||[],function(e,n){return null!=t&&e!=t?!0:(i=$.merge(i,this),!0)})}),0===i.length)return!1;switch(typeof a){case"undefined":return i.length>0;case"string":if("*"==a)return i;s.push(a);break;case"array":s=a}for(var l in s)if($p.mmap.hasOwnProperty(l)){if("string"!=typeof s[l])break;if($.inArray(s[l],i)>-1)return!0}return!1},this._prepareMedia=function(e){var t=this,n=[],r=[],i=[],s={},o={},u=[],a={},f=[],l=0;for(var c in $p.mmap)$p.mmap.hasOwnProperty(c)&&(platforms="object"==typeof $p.mmap[c].platform?$p.mmap[c].platform:[$p.mmap[c].platform],$.each(platforms,function(n,r){var i=0,u="http";for(var a in e.file)if(e.file.hasOwnProperty(a)){if("config"===a)continue;if(u=e.file[a].streamType||t.getConfig("streamType")||"http",t._canPlay($p.mmap[c].type,r,u)&&i++,0===i)continue;if($p.mmap[c].level=$.inArray(r,t.config._platforms),$p.mmap[c].level=0>$p.mmap[c].level?100:$p.mmap[c].level,f.push("."+$p.mmap[c].ext),s[$p.mmap[c].ext]||(s[$p.mmap[c].ext]=[]),s[$p.mmap[c].ext].push($p.mmap[c]),null===$p.mmap[c].streamType||"*"==$p.mmap[c].streamType||$.inArray(u||[],$p.mmap[c].streamType||"")>-1){o[$p.mmap[c].type]||(o[$p.mmap[c].type]=[]),i=-1;for(var l=0,h=o[$p.mmap[c].type].length;h>l;l++)if(o[$p.mmap[c].type][l].model==$p.mmap[c].model){i=l;break}-1===i&&o[$p.mmap[c].type].push($p.mmap[c])}}return!0}));f="^.*.("+f.join("|")+")$","string"==typeof e.file&&(e.file=[{src:e.file}],"string"==typeof e.type&&(e.file=[{src:e.file,type:e.type}])),($.isEmptyObject(e)||e.file===!1||null===e.file)&&(e.file=[{src:null}]);for(var h in e.file)if(e.file.hasOwnProperty(h)){if("config"==h)continue;if("string"==typeof e.file[h]&&(e.file[h]={src:e.file[h]}),null==e.file[h].src)continue;if(null!=e.file[h].type&&""!==e.file[h].type)try{var p=e.file[h].type.split(" ").join("").split(/[\;]codecs=.([a-zA-Z0-9\,]*)[\'|\"]/i);null!=p[1]&&(e.file[h].codec=p[1]),e.file[h].type=p[0].replace(/x-/,""),e.file[h].originalType=p[0]}catch(d){}else e.file[h].type=this._getTypeFromFileExtension(e.file[h].src);o[e.file[h].type]&&o[e.file[h].type].length>0&&(o[e.file[h].type].sort(function(e,t){return e.level-t.level}),u.push(o[e.file[h].type][0]))}0===u.length?u=o["none/none"]:(u.sort(function(e,t){return e.level-t.level}),l=u[0].level,u=$.grep(u,function(e){return e.level==l})),n=[],$.each(u||[],function(){n.push(this.type)});var v=u&&u.length>0?u[0]:{type:"none/none",model:"NA",errorCode:11};n=$p.utils.unique(n);for(h in e.file)if(e.file.hasOwnProperty(h)){if(null==e.file[h].type)continue;if(0>$.inArray(e.file[h].type.replace(/x-/,""),n)&&"none/none"!=v.type)continue;($.isEmptyObject(e.config)||null==e.config.streamType||-1==e.config.streamType.indexOf("rtmp"))&&(e.file[h].src=$p.utils.toAbsoluteURL(e.file[h].src)),null==e.file[h].quality&&(e.file[h].quality="default"),i.push(e.file[h].quality),r.push(e.file[h])}0===r.length&&r.push({src:null,quality:"default"});var m=[];return $.each(this.getConfig("playbackQualities"),function(){m.push(this.key||"default")}),a={ID:e.config.id||$p.utils.randomId(8),cat:e.config.cat||"clip",file:r,platform:v.platform,platforms:platforms,qualities:$p.utils.intersect($p.utils.unique(m),$p.utils.unique(i)),mediaModel:v.model||"NA",errorCode:v.errorCode||e.errorCode||7,config:e.config||{}}},this._modelUpdateListener=function(e,t){var n=this,r=this.playerModel;if(this.playerModel.init)switch("time"!=e&&"progress"!=e&&$p.utils.log("Update: '"+e,this.playerModel.getSrc(),this.playerModel.getModelName(),t),e){case"state":this._promote("state",t);var i=$.map(this.getDC().attr("class").split(" "),function(e){return-1===e.indexOf(n.getConfig("ns")+"state")?e:""});switch(i.push(this.getConfig("ns")+"state"+t.toLowerCase()),this.getDC().attr("class",i.join(" ")),t){case"AWAKENING":this._syncPlugins(function(){r.getState("AWAKENING")&&r.displayItem(!0)});break;case"ERROR":this._addGUIListeners();break;case"PAUSED":this.getConfig("disablePause")===!0&&this.playerModel.applyCommand("play",0);break;case"COMPLETED":if(this._currentItem+1>=this.media.length&&!this.getConfig("loop")&&(this._promote("done",{}),this.getConfig("leaveFullscreen")))return this.reset(),void 0;this.setActiveItem("next")}break;case"modelReady":this._maxElapsed=0,this._promote("item",n._currentItem);break;case"displayReady":this._promote("displayReady",!0),this._syncPlugins(function(){n._promote("ready"),n._addGUIListeners(),r.getState("IDLE")||r.start()});break;case"availableQualitiesChange":this.media[this._currentItem].qualities=t,this._promote("availableQualitiesChange",t);break;case"qualityChange":this.setConfig({playbackQuality:t}),this._promote("qualityChange",t);break;case"volume":this.setConfig({volume:t}),this._promote("volume",t),0>=t?(this.env.muted=!0,this._promote("mute",t)):this.env.muted===!0&&(this.env.muted=!1,this._promote("unmute",t));break;case"playlist":this.setFile(t.file,t.type);break;case"config":this.setConfig(t);break;case"time":if(t>this._maxElapsed){var s=Math.round(100*t/this.getDuration()),o=!1;25>s&&(s=25),s>25&&50>s&&(o="firstquartile",s=50),s>50&&75>s&&(o="midpoint",s=75),s>75&&100>s&&(o="thirdquartile",s=100),o!==!1&&this._promote(o,t),this._maxElapsed=this.getDuration()*s/100}this._promote(e,t);break;case"fullscreen":t===!0?(this.getDC().addClass("fullscreen"),this._enterFullViewport()):(this.getDC().removeClass("fullscreen"),this._exitFullViewport()),this._promote(e,t);break;case"error":this.config.errorCallback(),this._promote(e,t),this.getConfig("skipTestcard")&&this.getItemCount()>1?this.setActiveItem("next"):(this.playerModel.applyCommand("error",t),this._addGUIListeners());break;case"streamTypeChange":"dvr"==t&&this.getDC().addClass(this.getNS()+"dvr"),this._promote(e,t);break;default:this._promote(e,t)}},this._syncPlugins=function(e){var t=this;this.env.loading=!0,function(){try{if(t._plugins.length>0)for(var n=0;t._plugins.length>n;n++)if(!t._plugins[n].isReady())return setTimeout(arguments.callee,50),void 0;t.env.loading=!1,t._promote("pluginsReady",{});try{e()}catch(r){}}catch(r){}}()},this._MD=function(e){projekktor("#"+e.currentTarget.id.replace(/_media$/,""))._playerFocusListener(e)},this._addGUIListeners=function(){var e=this;this._removeGUIListeners(),this.getDC().get(0).addEventListener?this.getDC().get(0).addEventListener("mousedown",this._MD,!0):this.getDC().mousedown(function(n){e._playerFocusListener(n)}),this.getDC().mousemove(function(n){e._playerFocusListener(n)}).mouseenter(function(n){e._playerFocusListener(n)}).mouseleave(function(n){e._playerFocusListener(n)}).focus(function(n){e._playerFocusListener(n)}).blur(function(n){e._playerFocusListener(n)}),$(window).bind("resize.projekktor"+this.getId(),function(){e.setSize()}).bind("touchstart",function(){e._windowTouchListener(event)}),this.config.enableKeyboard===!0&&($(document).unbind("keydown.pp"+this._id),$(document).bind("keydown.pp"+this._id,function(n){e._keyListener(n)}))},this._removeGUIListeners=function(){$("#"+this.getId()).unbind(),this.getDC().unbind(),this.getDC().get(0).removeEventListener?this.getDC().get(0).removeEventListener("mousedown",this._MD,!0):this.getDC().get(0).detachEvent("onmousedown",this._MD),$(window).unbind("resize.projekktor"+this.getId())},this._registerPlugins=function(){var plugins=$.merge($.merge([],this.config._plugins),this.config._addplugins),pluginName="",pluginObj=null;if(!(this._plugins.length>0||0===plugins.length))for(var i=0;plugins.length>i;i++){pluginName="projekktor"+plugins[i].charAt(0).toUpperCase()+plugins[i].slice(1);try{typeof eval(pluginName)}catch(e){alert("Projekktor Error: Plugin '"+plugins[i]+"' malicious or not available.");continue}pluginObj=$.extend(!0,{},new projekktorPluginInterface,eval(pluginName).prototype),pluginObj.name=plugins[i].toLowerCase(),pluginObj.pp=this,pluginObj.playerDom=this.env.playerDom,pluginObj._init(this.config["plugin_"+plugins[i].toLowerCase()]||{}),null==this.config["plugin_"+pluginObj.name]&&(this.config["plugin_"+pluginObj.name]={}),this.config["plugin_"+pluginObj.name]=$.extend(!0,{},pluginObj.config||{});for(var propName in pluginObj)propName.indexOf("Handler")>1&&(null==this._pluginCache[propName]&&(this._pluginCache[propName]=[]),this._pluginCache[propName].push(pluginObj));this._plugins.push(pluginObj)}},this.removePlugins=function(e){if(0!=this._plugins.length){var t=e||$.merge($.merge([],this.config._plugins),this.config._addplugins),n=this._plugins.length;for(var r=0;t.length>r;r++)for(var i=0;n>i;i++)if(void 0!=this._plugins[i]&&this._plugins[i].name==t[r].toLowerCase()){this._plugins[i].deconstruct(),this._plugins.splice(i,1);for(var s in this._pluginCache)for(var o=0;this._pluginCache[s].length>o;o++)this._pluginCache[s][o].name==t[r].toLowerCase()&&this._pluginCache[s].splice(o,1)}}},this.getPlugins=function(){var e=[];return $.each(this._plugins,function(){e.push({name:this.name,ver:this.version||"unknown"})}),e},this._promote=function(e,t){var n=this;this._enqueue(function(){try{n.__promote(e,t)}catch(r){}})},this.__promote=function(e,t){var n=e,r={};if("object"==typeof n){if(!n._plugin)return;n="plugin_"+n._plugin+$p.utils.capitalise(n._event.toUpperCase())}if("time"!=n&&"progress"!=n&&"mousemove"!=n&&$p.utils.log("Event: ["+n+"]",t,this.listeners),this._pluginCache[n+"Handler"]&&this._pluginCache[n+"Handler"].length>0)for(var i=0;this._pluginCache[n+"Handler"].length>i;i++)if(this.getConfig("debug"))try{this._pluginCache[n+"Handler"][i][n+"Handler"](t,this)}catch(s){$p.utils.log(s)}else this._pluginCache[n+"Handler"][i][n+"Handler"](t,this);if(this._pluginCache.eventHandler&&this._pluginCache.eventHandler.length>0)for(var i=0;this._pluginCache.eventHandler.length>i;i++)if(this.getConfig("debug"))try{this._pluginCache.eventHandler[i].eventHandler(n,t,this)}catch(s){$p.utils.log(s)}else this._pluginCache.eventHandler[i].eventHandler(n,t,this);if(this.listeners.length>0)for(var i=0;this.listeners.length>i;i++)if(this.listeners[i].event==n||"*"==this.listeners[i].event)if(this.getConfig("debug"))try{this.listeners[i].callback(t,this)}catch(s){$p.utils.log(s)}else this.listeners[i].callback(t,this)},this._detachplayerModel=function(){this._removeGUIListeners();try{this.playerModel.destroy(),this._promote("detach",{})}catch(e){}},this._windowTouchListener=function(e){e.touches&&e.touches.length>0&&(($(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY)).attr("id")||"").indexOf(this.getDC().attr("id"))>-1?(0==this.env.mouseIsOver&&this._promote("mouseenter",{}),this.env.mouseIsOver=!0,this._promote("mousemove",{}),e.stopPropagation()):this.env.mouseIsOver&&(this._promote("mouseleave",{}),this.env.mouseIsOver=!1))},this._playerFocusListener=function(e){var t=e.type.toLowerCase();switch(t){case"mousedown":if(0==this.env.mouseIsOver)break;if("|TEXTAREA|INPUT".indexOf("|"+e.target.tagName.toUpperCase())>-1)return;if(3==e.which){if($(e.target).hasClass("context"))break;$(document).bind("contextmenu",function(e){return $(document).unbind("contextmenu"),!1})}break;case"mousemove":if(this.env.mouseX!=e.clientX&&this.env.mouseY!=e.clientY&&(this.env.mouseIsOver=!0),this.env.clientX==e.clientX&&this.env.clientY==e.clientY)return;this.env.clientX=e.clientX,this.env.clientY=e.clientY;break;case"focus":case"mouseenter":this.env.mouseIsOver=!0;break;case"blur":case"mouseleave":this.env.mouseIsOver=!1}this._promote(t,e)},this._keyListener=function(e){if(this.env.mouseIsOver&&!("|TEXTAREA|INPUT".indexOf("|"+e.target.tagName.toUpperCase())>-1)){var t=this,n=this.getConfig("keys").length>0?this.getConfig("keys"):[{27:function(e){e.getInFullscreen()?e.setFullscreen(!1):e.setStop()},32:function(e,t){e.setPlayPause(),t.preventDefault()},70:function(e){e.setFullscreen()},39:function(e,t){e.setPlayhead("+5"),t.preventDefault()},37:function(e,t){e.setPlayhead("-5"),t.preventDefault()},38:function(e,t){e.setVolume("+0.05"),t.preventDefault()},40:function(e,t){e.setVolume("-0.05"),t.preventDefault()},68:function(e){e.setDebug()},67:function(e){$p.utils.log("Config Dump",e.config)},80:function(e){$p.utils.log("Schedule Dump",e.media)},84:function(e){$p.utils.log("Cuepoints Dump",e.getCuePoints())}}];this._promote("key",e),$.each(n||[],function(){try{this[e.keyCode](t,e)}catch(n){}try{this["*"](t)}catch(n){}})}},this._enterFullViewport=function(e){var t=this.getIframeParent()||$(window),n=this.getIframe()||this.getDC(),r=$(t[0].document.body).css("overflow");e&&(t=$(window),n=this.getDC()),n.data("fsdata",{scrollTop:t.scrollTop()||0,scrollLeft:t.scrollLeft()||0,targetStyle:n.attr("style")||"",targetWidth:n.width(),targetHeight:n.height(),bodyOverflow:"visible"==r?"auto":r,bodyOverflowX:$(t[0].document.body).css("overflow-x"),bodyOverflowY:$(t[0].document.body).css("overflow-y"),iframeWidth:n.attr("width")||0,iframeHeight:n.attr("height")||0}).css({position:"absolute",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:99999,margin:0,padding:0}),t.scrollTop(0).scrollLeft(0),$(t[0].document.body).css({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})},this._exitFullViewport=function(e){var t=this.getIframeParent()||$(window),n=this.getIframe()||this.getDC(),r=n.data("fsdata")||null;e&&(t=$(window),n=this.getDC()),null!=r&&(t.scrollTop(r.scrollTop).scrollLeft(r.scrollLeft),$(t[0].document.body).css("overflow",r.bodyOverflow),$(t[0].document.body).css("overflow-x",r.bodyOverflowX),$(t[0].document.body).css("overflow-y",r.bodyOverflowY),r.iframeWidth>0&&!e?n.attr("width",r.iframeWidth+"px").attr("height",r.iframeHeight+"px"):n.width(r.targetWidth).height(r.targetHeight),n.attr("style",null==r.targetStyle?"":r.targetStyle).data("fsdata",null))},this.pluginAPI=function(){var e=Array.prototype.slice.call(arguments)||null,t=e.shift(),n=e.shift();if(null!=t&&null!=n)for(var r=0;this._plugins.length>r;r++)if(this._plugins[r].name==t)return this._plugins[r][n](e[0]),void 0},this.getPlayerVer=function(){return this.config._version},this.getIsLastItem=function(){return this._currentItem==this.media.length-1&&this.config._loop!==!0},this.getIsFirstItem=function(){return 0==this._currentItem&&this.config._loop!==!0},this.getItemConfig=function(e,t){return this.getConfig(e,t)},this.getConfig=function(e,t){var n=t||this._currentItem,r=null!=this.config["_"+e]?this.config["_"+e]:this.config[e];if(null==e)return this.media[n].config;if(null==this.config["_"+e])try{void 0!==this.media[n].config[e]&&(r=this.media[n].config[e])}catch(i){}if(e.indexOf("plugin_")>-1)try{this.media[n].config[e]&&(r=$.extend(!0,{},this.config[e],this.media[n].config[e]))}catch(i){}if(null==r)return null;if("object"==typeof r&&null===r.length?r=$.extend(!0,{},r||{}):"object"==typeof r&&(r=$.extend(!0,[],r||[])),"string"==typeof r)switch(r){case"true":r=!0;break;case"false":r=!1;break;case"NaN":case"undefined":case"null":r=null}return r},this.getDC=function(){return this.env.playerDom},this.getState=function(e){var t="IDLE";try{t=this.playerModel.getState()}catch(n){}return null!=e?t==e.toUpperCase():t},this.getLoadProgress=function(){try{return this.playerModel.getLoadProgress()}catch(e){return 0}},this.getKbPerSec=function(){try{return this.playerModel.getKbPerSec()}catch(e){return 0}},this.getItemCount=function(){return 1==this.media.length&&"na"==this.media[0].mediaModel?0:this.media.length},this.getItemId=function(e){return this.media[e||this._currentItem].ID||null},this.getItemIdx=function(){return this._currentItem},this.getPlaylist=function(){return this.getItem("*")},this.getItem=function(){if(1==this.media.length&&"na"==this.media[0].mediaModel)return null;switch(arguments[0]||"current"){case"next":return $.extend(!0,{},this.media[this._currentItem+1]||{});case"prev":return $.extend(!0,{},this.media[this._currentItem-1]||{});case"current":return $.extend(!0,{},this.media[this._currentItem]||{});case"*":return $.extend(!0,[],this.media||[]);default:return $.extend(!0,{},this.media[arguments[0]||this._currentItem]||{})}},this.getVolume=function(){return this.getConfig("fixedVolume")===!0?this.config.volume:this.getConfig("volume")},this.getTrackId=function(){return this.getConfig("trackId")?this.config.trackId:null!=this._playlistServer?"pl"+this._currentItem:null},this.getLoadPlaybackProgress=function(){try{return this.playerModel.getLoadPlaybackProgress()}catch(e){return 0}},this.getSource=function(){try{return this.playerModel.getSource()[0].src}catch(e){return!1}},this.getDuration=function(){try{return this.playerModel.getDuration()}catch(e){return 0}},this.getPosition=function(){try{return this.playerModel.getPosition()||0}catch(e){return 0}},this.getMaxPosition=function(){try{return this.playerModel.getMaxPosition()||0}catch(e){return 0}},this.getFrame=function(){try{return this.playerModel.getFrame()}catch(e){return 0}},this.getTimeLeft=function(){try{return this.playerModel.getDuration()-this.playerModel.getPosition()}catch(e){return this.media[this._currentItem].duration}},this.getInFullscreen=function(){return this.getNativeFullscreenSupport().isFullScreen()},this.getMediaContainer=function(){return null==this.env.mediaContainer&&(this.env.mediaContainer=$("#"+this.getMediaId())),0==this.env.mediaContainer.length&&(this.env.mediaContainer=this.env.playerDom.find("."+this.getNS()+"display").length>0?$(document.createElement("div")).attr({id:this.getId()+"_media"}).css({overflow:"hidden",height:"100%",width:"100%",top:0,left:0,padding:0,margin:0,display:"block"}).appendTo(this.env.playerDom.find("."+this.getNS()+"display")):$(document.createElement("div")).attr({id:this.getMediaId()}).css({width:"1px",height:"1px"}).appendTo($(document.body))),this.env.mediaContainer},this.getMediaId=function(){return this.getId()+"_media"},this.getMediaType=function(){try{return this._getTypeFromFileExtension(this.playerModel.getSrc())||"na/na"}catch(e){return"na/na"}},this.getUsesFlash=function(){return this.playerModel.modelId.indexOf("FLASH")>-1},this.getModel=function(){try{return this.media[this._currentItem].mediaModel.toUpperCase()}catch(e){return"NA"}},this.getIframeParent=this.getIframeWindow=function(){try{var e=!1;return this.config._iframe&&(e=parent.location.host||!1),e===!1?!1:$(parent.window)}catch(t){return!1}},this.getIframe=function(){try{var e=[];return this.config._iframe&&(e=window.$(frameElement)||[]),0==e.length?!1:e}catch(t){return!1}},this.getIframeAllowFullscreen=function(){var e=null;try{e=window.frameElement.attributes.allowFullscreen||window.frameElement.attributes.mozallowFullscreen||window.frameElement.attributes.webkitallowFullscreen||null}catch(t){e=!0}return null!=e?!0:!1},this.getPlaybackQuality=function(){var e="default";try{e=this.playerModel.getPlaybackQuality()}catch(t){}return"default"==e&&(e=this.getConfig("playbackQuality")),("default"==e||-1==$.inArray(e,this.getPlaybackQualities()))&&(e=this.getAppropriateQuality()),-1==$.inArray(e,this.getPlaybackQualities())&&(e="default"),e},this.getPlaybackQualities=function(){try{return $.extend(!0,[],this.media[this._currentItem].qualities||[])}catch(e){}return[]},this.getIsMobileClient=function(e){var t=navigator.userAgent.toLowerCase(),n=["android","windows ce","blackberry","palm","mobile"];for(var r=0;n.length>r;r++)if(t.indexOf(n[r])>-1)return e?n[r].toUpperCase()==e.toUpperCase():!0;return!1},this.getCanPlay=function(e,t,n){return this._canPlay(e,t,n)},this.getCanPlayNatively=function(e){return this._canPlay(e,"native")},this.getPlatform=function(){return this.media[this._currentItem].platform||"error"},this.getPlatforms=function(){var e=this,t=this._testMediaSupport(!0),n=this.getConfig("platforms"),r=[],i=[];try{for(var s in this.media[this._currentItem].file)if(this.media[this._currentItem].file.hasOwnProperty(s))for(var o in t)this._canPlay(this.media[this._currentItem].file[s].type.replace(/x-/,""),t[o].toLowerCase(),this.getConfig("streamType"))&&-1==$.inArray(t[o].toLowerCase(),i)&&i.push(t[o].toLowerCase())}catch(u){}return i.sort(function(e,t){return $.inArray(e,n)-$.inArray(t,n)}),i},this.getNativeFullscreenSupport=function(){var e=this,t={supportsFullScreen:"viewport",isFullScreen:function(){try{return e.getDC().hasClass("fullscreen")}catch(t){return!1}},requestFullScreen:function(){e.playerModel.applyCommand("fullscreen",!0)},cancelFullScreen:function(){e.playerModel.applyCommand("fullscreen",!1)},prefix:"",ref:this},n="webkit moz o ms khtml".split(" ");if(document.cancelFullScreen!==void 0)t.supportsFullScreen=!0;else for(var r=0,i=n.length;i>r;r++)if(t.prefix=n[r],document.createElement("video")[t.prefix+"EnterFullscreen"]!==void 0&&(t.supportsFullScreen="mediaonly"),document[t.prefix+"CancelFullScreen"]!==void 0&&(t.supportsFullScreen="dom","moz"==t.prefix&&document[t.prefix+"FullScreenEnabled"]===void 0&&(t.supportsFullScreen="viewport")),t.supportsFullScreen!==!1&&"viewport"!==t.supportsFullScreen)break;return"viewport"==t.supportsFullScreen||"dom"==t.supportsFullScreen&&this.getConfig("forceFullViewport")?t:"mediaonly"==t.supportsFullScreen?(t.requestFullScreen=function(t){e.playerModel.getMediaElement().get(0)[this.prefix+"EnterFullscreen"]()},t.dest={},t.cancelFullScreen=function(){},t):(t.isFullScreen=function(t){var n=e.getIframe()?parent.window.document:document;switch(this.prefix){case"":return n.fullScreen;case"webkit":return n.webkitIsFullScreen;case"moz":return n[this.prefix+"FullScreen"]||e.getDC().hasClass("fullscreen")&&t!==!0;default:return n[this.prefix+"FullScreen"]}},t.requestFullScreen=function(){if(!this.isFullScreen()){var t=e.getIframeParent()||$(window),n=e.getIframe()?e.getIframe().get(0):e.getDC().get(0),r=this,i=e.getIframe()?parent.window.document:document,t=e.getIframeParent()||$(window);t.data("fsdata",{scrollTop:t.scrollTop(),scrollLeft:t.scrollLeft()}),$(i).unbind(this.prefix+"fullscreenchange.projekktor"),""===this.prefix?n.requestFullScreen():n[this.prefix+"RequestFullScreen"](),r.ref.playerModel.applyCommand("fullscreen",!0),$(i).bind(this.prefix+"fullscreenchange.projekktor",function(e){if(r.isFullScreen(!0))r.ref.playerModel.applyCommand("fullscreen",!0);else{r.ref.playerModel.applyCommand("fullscreen",!1);var t=r.ref.getIframeParent()||$(window),n=t.data("fsdata");null!=n&&(t.scrollTop(n.scrollTop),t.scrollLeft(n.scrollLeft))}})}},t.cancelFullScreen=function(){var t=e.getIframe()?parent.window.document:document,n=e.getIframeParent()||$(window),r=n.data("fsdata");$(e.getIframe()?parent.window.document:document).unbind(this.prefix+"fullscreenchange.projekktor"),t.exitFullScreen?t.exitFullScreen():""==this.prefix?t.cancelFullScreen():t[this.prefix+"CancelFullScreen"](),null!=r&&(n.scrollTop(r.scrollTop),n.scrollLeft(r.scrollLeft)),e.playerModel.applyCommand("fullscreen",!1)},t)},this.getId=function(){return this._id},this.getHasGUI=function(){try{return this.playerModel.getHasGUI()}catch(e){return!1}},this.getCssPrefix=this.getNS=function(){return this.config._cssClassPrefix||this.config._ns||"pp"},this.getPlayerDimensions=function(){return{width:this.getDC().width(),height:this.getDC().height()}},this.getMediaDimensions=function(){return this.playerModel.getMediaDimensions()||{width:0,height:0}},this.getAppropriateQuality=function(e){var t=e||this.getPlaybackQualities()||[];if(0==t.length)return[];var n=this.env.playerDom.width(),r=this.env.playerDom.height(),i=$p.utils.roundNumber(n/r,2),s={};return $.each(this.getConfig("playbackQualities")||[],function(){if(0>$.inArray(this.key,t))return!0;if((this.minHeight||0)>r&&r>=s.minHeight)return!0;if((s.minHeight||0)>this.minHeight)return!0;if("number"==typeof this.minWidth){if(0===this.minWidth&&this.minHeight>r)return!0;if(this.minWidth>n)return!0;s=this}else if("object"==typeof this.minWidth){var e=this;$.each(this.minWidth,function(){return(this.ratio||100)>i?!0:this.minWidth>n?!0:(s=e,!0)})}return!0}),$.inArray("auto",this.getPlaybackQualities())>-1?"auto":s.key||"default"},this.getFromUrl=function(e,t,n,r,i){var s=null,o=this,u=!this.getIsMobileClient();if(t==o&&"_reelUpdate"==n&&this._promote("scheduleLoading",1+this.getItemCount()),"_"!=n.substr(0,1)?window[n]=function(e){try{delete window[n]}catch(r){}t[n](e)}:i.indexOf("jsonp")>-1&&(this["_jsonp"+n]=function(e){t[n](e)}),i){if(void 0==$.parseJSON&&i.indexOf("json")>-1)return this._raiseError("Projekktor requires at least jQuery 1.4.2 in order to handle JSON playlists."),this;i=i.indexOf("/")>-1?i.split("/")[1]:i}var a={url:e,complete:function(e,o){if(void 0==i)try{e.getResponseHeader("Content-Type").indexOf("xml")>-1&&(i="xml"),e.getResponseHeader("Content-Type").indexOf("json")>-1&&(i="json"),e.getResponseHeader("Content-Type").indexOf("html")>-1&&(i="html")}catch(u){}s=$p.utils.cleanResponse(e.responseText,i);try{s=r(s,e.responseText,t)}catch(u){}if("error"!=o&&"jsonp"!=i)try{t[n](s)}catch(u){}},error:function(e){t[n]&&"jsonp"!=i&&t[n](!1)},cache:!0,async:u,dataType:i,jsonpCallback:"_"!=n.substr(0,1)?!1:"projekktor('"+this.getId()+"')._jsonp"+n,jsonp:"_"!=n.substr(0,1)?!1:"callback"};return a.xhrFields={withCredentials:!0},a.beforeSend=function(e){e.withCredentials=!0},$.support.cors=!0,$.ajax(a),this},this.setActiveItem=function(e){var t=0,n=this._currentItem,r=this,i=!1;if("string"==typeof e)switch(e){case"same":t=this._currentItem;break;case"previous":t=this._currentItem-1;break;case"next":t=this._currentItem+1}else t="number"==typeof e?parseInt(e):0;if(t!=this._currentItem&&1==this.getConfig("disallowSkip")&&!this.getState("COMPLETED")&&!this.getState("IDLE"))return this;this._detachplayerModel(),this.env.loading=!1,0!==t||null!=n&&n!=t||!(this.config._autoplay===!0||"DESTROYING|AWAKENING".indexOf(this.getState())>-1)?this.getItemCount()>1&&t!=n&&null!=n&&this.config._continuous===!0&&this.getItemCount()>t&&(i=!0):i=!0,(t>=this.getItemCount()||0>t)&&(i=this.config._loop,t=0),this._currentItem=t;var s=this.getDC().hasClass("fullscreen");this.getDC().attr("class",this.env.className),s&&this.getDC().addClass("fullscreen");var o=this.media[this._currentItem].mediaModel.toUpperCase();return $p.models[o]?(null!=this.getConfig("className",null)&&this.getDC().addClass(this.getNS()+this.getConfig("className")),this.getDC().addClass(this.getNS()+(this.getConfig("streamType")||"http")),$p.utils.cssTransitions()||this.getDC().addClass("notransitions"),this.getIsMobileClient()&&this.getDC().addClass("mobile")):(o="NA",this.media[this._currentItem].mediaModel=o,this.media[this._currentItem].errorCode=8),this.playerModel=new playerModel,$.extend(this.playerModel,$p.models[o].prototype),this._promote("syncing","display"),this._enqueue(function(){try{r._applyCuePoints()}catch(e){}}),this.playerModel._init({media:$.extend(!0,{},this.media[this._currentItem]),model:o,pp:this,environment:$.extend(!0,{},this.env),autoplay:i,quality:this.getPlaybackQuality(),fullscreen:this.getInFullscreen()}),this},this.setPlay=function(){var e=this;return this.getConfig("thereCanBeOnlyOne")&&projekktor("*").each(function(){this.getId()!==e.getId()&&this.setStop()}),this._enqueue("play",!1),this},this.setPause=function(){return this._enqueue("pause",!1),this},this.setStop=function(e){var t=this;return this.getState("IDLE")?this:(e?this._enqueue(function(){t._currentItem=0,t.setActiveItem(0)}):this._enqueue("stop",!1),this)},this.setPlayPause=function(){return this.getState("PLAYING")?this.setPause():this.setPlay(),this},this.setVolume=function(e,t){var n=this.getVolume();if(1==this.getConfig("fixedVolume"))return this;switch(typeof e){case"string":var r=e.substr(0,1);switch(e=parseFloat(e.substr(1)),r){case"+":e=this.getVolume()+e;break;case"-":e=this.getVolume()-e;break;default:e=this.getVolume()};case"number":e=parseFloat(e),e=e>1?1:e,e=0>e?0:e;break;default:return this}if(e>n&&t){if(e-n>.03){for(var i=n;e>=i;i+=.03)this._enqueue("volume",i,t);return this._enqueue("volume",e,t),this}}else if(n>e&&t&&n-e>.03){for(var i=n;i>=e;i-=.03)this._enqueue("volume",i,t);return this._enqueue("volume",e,t),this}return this._enqueue("volume",e),this},this.setPlayhead=this.setSeek=function(e){if(1==this.getConfig("disallowSkip"))return this;if("string"==typeof e){var t=e.substr(0,1);e=parseFloat(e.substr(1)),e="+"==t?this.getPosition()+e:"-"==t?this.getPosition()-e:this.getPosition()}return"number"==typeof e&&this._enqueue("seek",Math.round(100*e)/100),this},this.setFrame=function(e){if(null==this.getConfig("fps"))return this;if(1==this.getConfig("disallowSkip"))return this;if("string"==typeof e){var t=e.substr(0,1);e=parseFloat(e.substr(1)),e="+"==t?this.getFrame()+e:"-"==t?this.getFrame()-e:this.getFrame()}return"number"==typeof e&&this._enqueue("frame",e),this},this.setPlayerPoster=function(e){var t=this;return this._enqueue(function(){t.setConfig({poster:e},0)}),this._enqueue(function(){t.playerModel.setPosterLive()}),this},this.setConfig=function(){var e=this,t=arguments;return this._enqueue(function(){e._setConfig(t[0]||null,t[1]||null)}),this},this._setConfig=function(){if(!arguments.length)return result;var confObj=arguments[0],dest="*",value=!1;if("object"!=typeof confObj)return this;dest="string"==arguments[1]||"number"==arguments[1]?arguments[1]:this._currentItem;for(var i in confObj)if(null==this.config["_"+i]){try{value=eval(confObj[i])}catch(e){value=confObj[i]}if("*"!=dest){if(void 0==this.media[dest])return this;null==this.media[dest].config&&(this.media[dest].config={}),this.media[dest].config[i]=value}else $.each(this.media,function(){null==this.config&&(this.config={}),this.config[i]=value})}return this},this.setFullscreen=function(e){var t=this.getNativeFullscreenSupport();return e=null==e?!t.isFullScreen():e,e===!0?t.requestFullScreen():t.cancelFullScreen(),this},this.setSize=function(e){var t=this.getIframe()||this.getDC(),n=t.data("fsdata")||null,r=e&&null!=e.width?e.width:null!=this.getConfig("width")?this.getConfig("width"):!1,i=e&&null!=e.height?e.height:null==this.getConfig("height")&&this.getConfig("ratio")?Math.round((r||this.getDC().width())/this.getConfig("ratio")):null!=this.getConfig("height")?this.getConfig("height"):!1;this.getInFullscreen()&&null!=n?(n.targetWidth=r,n.targetHeight=i,t.data("fsdata",n)):(r&&t.css({width:r+"px"}),i&&t.css({height:i+"px"}));try{this.playerModel.applyCommand("resize")}catch(s){}},this.setLoop=function(e){this.config._loop=e||!this.config._loop},this.setDebug=function(e){$p.utils.logging=e||!$p.utils.logging,$p.utils.logging&&$p.utils.log("DEBUG MODE for player #"+this.getId())},this.addListener=function(e,t){var n=this;return this._enqueue(function(){n._addListener(e,t)}),this},this._addListener=function(e,t){var n=e.indexOf(".")>-1?e.split("."):[e,"default"];return this.listeners.push({event:n[0],ns:n[1],callback:t}),this},this.removeListener=function(e,t){var n=this.listeners.length,r=e.indexOf(".")>-1?e.split("."):[e,"*"];for(var i=0;n>i;i++)void 0!=this.listeners[i]&&(this.listeners[i].event==r[0]||"*"===r[0])&&(this.listeners[i].ns!=r[1]&&"*"!==r[1]||this.listeners[i].callback!=t&&null!=t||this.listeners.splice(i,1));return this},this.setItem=function(){var e=arguments[0],t=0;return this._clearqueue(),null==e?(t=this._removeItem(arguments[1]),t===this._currentItem&&this.setActiveItem("previous")):(t=this._addItem(this._prepareMedia({file:e,config:e.config||{}}),arguments[1],arguments[2]),t===this._currentItem&&this.setActiveItem(this._currentItem)),this},this.setFile=function(){var e=arguments[0]||"",t=arguments[1]||this._getTypeFromFileExtension(e),n=[];return this.env.loading===!0?this:(this._clearqueue(),this.env.loading=!0,this._detachplayerModel(),"object"==typeof e?($p.utils.log("Applying incoming JS Object",e),this._reelUpdate(e),this):(n[0]={},n[0].file={},n[0].file.src=e||"",n[0].file.type=t||this._getTypeFromFileExtension(splt[0]),n[0].file.type.indexOf("/xml")>-1||n[0].file.type.indexOf("/json")>-1?($p.utils.log("Loading external data from "+n[0].file.src+" supposed to be "+n[0].file.type),this._playlistServer=n[0].file.src,this.getFromUrl(n[0].file.src,this,"_reelUpdate",this.getConfig("reelParser"),n[0].file.type),this):($p.utils.log("Applying incoming single file:"+n[0].file.src,n),this._reelUpdate(n),this)))},this.setPlaybackQuality=function(e){var t=e||this.getAppropriateQuality();return $.inArray(t,this.media[this._currentItem].qualities||[])>-1&&(this.playerModel.applyCommand("quality",t),this.setConfig({playbackQuality:t})),this},this.openUrl=function(e){return e=e||{url:"",target:"",pause:!1},""==e.url?this:(e.pause===!0&&this.setPause(),window.open(e.url,e.target).focus(),this)},this.selfDestruct=this.destroy=function(){var e=this;return this._enqueue(function(){e._destroy()}),this},this._destroy=function(){var e=this;return $(this).unbind(),this.removePlugins(),this.playerModel.destroy(),this._removeGUIListeners(),$.each(projekktors,function(n){try{if(this.getId()==e.getId()||this.getId()==e.getId()||this.getParent()==e.getId())return projekktors.splice(n,1),void 0}catch(r){}}),this.env.playerDom.replaceWith(this.env.srcNode),this._promote("destroyed"),this.removeListener("*"),this},this.reset=function(){var e=this;return this._clearqueue(),this._enqueue(function(){e._reset()}),this},this._reset=function(){var e={},t=this;this.setFullscreen(!1),$(this).unbind(),$(this.getIframe()?parent.window.document:document).unbind(".projekktor"),$(window).unbind(".projekktor"+this.getId()),this.playerModel.destroy(),this.playerModel={},this.removePlugins(),this._removeGUIListeners(),this.env.mediaContainer=null,this._currentItem=null;for(var n in this.config)e["_"==n.substr(0,1)?n.substr(1):n]=this.config[n];return e.autoplay=!1,"function"==typeof this.env.onReady&&this._enqueue(t.env.onReady(t)),this._init(this.env.playerDom,e),this},this.setCuePoint=function(e,t){var n=void 0!==e.item?e.item:this.getItemIdx(),r=$.extend(!0,{offset:0},t),i=this,s={id:e.id||$p.utils.randomId(8),group:e.group||$p.utils.randomId(8),item:n,on:($p.utils.toSeconds(e.on)||0)+r.offset,off:($p.utils.toSeconds(e.off)||$p.utils.toSeconds(e.on)||0)+r.offset,value:e.value||null,callback:e.callback||function(){},precision:null==e.precision?1:e.precision,title:null==e.title?"":e.title,_listeners:[],_unlocked:!1,_active:!1,_lastTime:0,isAvailable:function(){return this._unlocked},_stateListener:function(e,t){if("STOPPED|COMPLETED|DESTROYING".indexOf(e)>-1){if(this._active)try{this.callback(!1,this,t)}catch(n){}this._active=!1,this._lastTime=-1}},_timeListener:function(e,t){if(t.getItemIdx()===this.item||"*"==this.item){var n=0==this.precision?Math.round(e):$p.utils.roundNumber(e,this.precision),r=this;if(this._unlocked===!1){var i=t.getDuration()*t.getLoadProgress()/100;if(!(i>=this.on||n>=this.on))return;$.each(this._listeners.unlock||[],function(){this(r,t)}),this._unlocked=!0}if(this._lastTime!=n){var s=1>=n-this._lastTime&&n-this._lastTime>0;if((n>=this.on&&this.off>=n||n>=this.on&&this.on==this.off&&this.on+1>=n)&&this._active!==!0){this._active=!0,$p.utils.log("Cue Point: [ON "+this.on+"] at "+n,this);try{this.callback({id:this.id,enabled:!0,value:this.value,seeked:!s,player:t})}catch(o){}}else if((this.on>n||n>this.off)&&this.off!=this.on&&1==this._active){this._active=!1,$p.utils.log("Cue Point: [OFF] at "+this.off,this);try{this.callback({id:this.id,enabled:!1,value:this.value,seeked:!s,player:t})}catch(o){}}this.off==this.on&&this._active&&(new Number(n-this.on)).toPrecision(this.precision)>=1&&(this._active=!1),this._lastTime=n}}},addListener:function(e,t){null==this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t||function(){})}};return null!=e.unlockCallback&&s.addListener("unlock",e.unlockCallback),null==this._cuePoints[n]&&(this._cuePoints[n]=[]),this._cuePoints[n].push(s),this.getState("IDLE")||this._promote("cuepointAdded"),this},this.setGotoCuePoint=function(e,t){var n=this.getCuePoints(t);return this.setPlayhead(n[e].on),this},this.getCuePoints=function(e){return this._cuePoints[e||this.getItemIdx()]||this._cuePoints||{}},this.getCuePointById=function(e,t){var n=!1,r=this.getCuePoints(t);for(var i=0;r.length>i;i++)if(r.id==e){n=this;break}return n},this.removeCuePoints=function(e,t){var n=this.getCuePoints(e||0)||{},r=[];for(var i=0;n.length>i;i++)n[i].group==t&&(this.removeListener("time",n[i].timeEventHandler),this.removeListener("state",n[i].stateEventHandler),r.push(i));for(var s=0;r.length>s;s++)n.splice(r[s]-s,1);return this},this.syncCuePoints=function(){var e=this;return this._enqueue(function(){try{e._applyCuePoints()}catch(n){}}),this},this._applyCuePoints=function(e){var t=this;(null!=this._cuePoints[this._currentItem]||null!=this._cuePoints["*"])&&$.each($.merge(this._cuePoints[this._currentItem]||[],this._cuePoints["*"]||[]),function(e,n){try{t.removeListener("time",n.timeEventHandler),t.removeListener("state",n.stateEventHandler)}catch(r){}n.timeEventHandler=function(e,t){try{n._timeListener(e,t)}catch(r){}},n.stateEventHandler=function(e,t){try{n._stateListener(e,t)}catch(r){}},t.addListener("time",n.timeEventHandler),t.addListener("state",n.stateEventHandler),t.addListener("item",function(){t.removeListener("time",n.timeEventHandler),t.removeListener("state",n.stateEventHandler)})})},this._enqueue=function(e,t,n){null!=e&&(this._queue.push({command:e,params:t,delay:n}),this._processQueue())},this._clearqueue=function(e,t){this._isReady===!0&&(this._queue=[])},this._processQueue=function(){var e=this,t=!1;this._processing!==!0&&this.env.loading!==!0&&(this._processing=!0,function(){try{t=e.playerModel.getIsReady()}catch(n){}if(e.env.loading!==!0&&t){try{var r=e._queue.shift();null!=r&&("string"==typeof r.command?r.delay>0?setTimeout(function(){e.playerModel.applyCommand(r.command,r.params)},r.delay):e.playerModel.applyCommand(r.command,r.params):r.command(e))}catch(n){$p.utils.log("ERROR:",n)}return 0==e._queue.length?(e._isReady===!1&&(e._isReady=!0),e._processing=!1,void 0):(arguments.callee(),void 0)}setTimeout(arguments.callee,100)}())},this._getTypeFromFileExtension=function(e){var t="",n=[],r={},n=[],i=null,s=!0;for(var o in $p.mmap)if($p.mmap.hasOwnProperty(o)){i=$p.mmap[o].platform,"object"!=typeof i&&(i=[i]),s=!0;for(var u=0;i.length>u;u++)null!=i[u]&&(this.getConfig("enable"+i[u].toUpperCase()+"Platform")===!1||-1===$.inArray(i[u],this.getConfig("platforms")))&&(s=!1);if(s===!1)continue;n.push("\\."+$p.mmap[o].ext),r[$p.mmap[o].ext]=$p.mmap[o]}n="^.*.("+n.join("|")+")";try{t=e.match(RegExp(n))[1],t=t?t.replace(".",""):"NaN"}catch(a){t="NaN"}return r[t].type},this._testMediaSupport=function(e){var t={},n=[],r="",i=this;if(e){if(null!=$p._platformTableCache)return $p._platformTableCache}else if(null!=$p._compTableCache)return $p._compTableCache;for(var s=0;$p.mmap.length>s;s++)$p.mmap.hasOwnProperty(s)&&(platforms="object"==typeof $p.mmap[s].platform?$p.mmap[s].platform:[$p.mmap[s].platform],$.each(platforms,function(e,o){return null==o?!0:(r=$p.mmap[s].streamType||["http"],$.each(r,function(e,r){if(null==t[r]&&(t[r]={}),null==t[r][o]&&(t[r][o]=[]),$.inArray($p.mmap[s].type,t[r][o])>-1)return!0;var u=""+($p.models[$p.mmap[s].model.toUpperCase()].prototype[o.toLowerCase()+"Version"]||"1");try{if($p.utils.versionCompare($p.platforms[o.toUpperCase()]($p.mmap[s].type),u))return 0!=i.getConfig("enable"+o.toUpperCase()+"Platform")&&$.inArray(o.toLowerCase(),i.getConfig("platforms"))>-1&&(t[r][o].push($p.mmap[s].type),-1==$.inArray(o.toUpperCase(),n)&&n.push(o.toUpperCase())),!0}catch(f){$p.utils.log("ERROR","platform "+o+" not defined")}return!0}),!0)}));return $p._compTableCache=t,$p._platformTableCache=n,e?$p._platformTableCache:$p._compTableCache},this._readMediaTag=function(e){var t={},n="",r=[],i=this;if(-1=="VIDEOAUDIO".indexOf(e[0].tagName.toUpperCase()))return!1;this.getConfig("ignoreAttributes")||(t={autoplay:void 0===e.attr("autoplay")&&void 0===e.prop("autoplay")||e.prop("autoplay")===!1?!1:!0,controls:void 0===e.attr("controls")&&void 0===e.prop("controls")||e.prop("controls")===!1?!1:!0,loop:void 0===e.attr("autoplay")&&void 0===e.prop("loop")||e.prop("loop")===!1?!1:!0,title:void 0!==e.attr("title")&&e.attr("title")!==!1?e.attr("title"):"",poster:void 0!==e.attr("poster")&&e.attr("poster")!==!1?e.attr("poster"):"",width:void 0!==e.attr("width")&&e.attr("width")!==!1?e.attr("width"):null,height:void 0!==e.attr("height")&&e.attr("height")!==!1?e.attr("height"):null}),n=$($("<div></div>").html($(e).clone())).html(),r=["autoplay","controls","loop"];for(var s=0;r.length>s;s++)-1!=n.indexOf(r[s])&&(t[r[s]]=!0);if(t.playlist=[],t.playlist[0]=[],t.playlist[0].config={tracks:[]},e.attr("src")&&t.playlist[0].push({src:e.attr("src"),type:e.attr("type")||this._getTypeFromFileExtension(e.attr("src"))}),!$("<video/>").get(0).canPlayType){var o=e;do if(o=o.next("source,track"),o.attr("src"))switch(o.get(0).tagName.toUpperCase()){case"SOURCE":t.playlist[0].push({src:o.attr("src"),type:o.attr("type")||this._getTypeFromFileExtension(o.attr("src")),quality:o.attr("data-quality")||""});break;case"TRACK":$(this).attr("src")&&t.playlist[0].config.tracks.push({src:o.attr("src"),kind:o.attr("kind")||"subtitle",lang:o.attr("srclang")||null,label:o.attr("label")||null})}while(o.attr("src"))}return 0==t.playlist[0].length&&e.children("source,track").each(function(){if($(this).attr("src"))switch($(this).get(0).tagName.toUpperCase()){case"SOURCE":t.playlist[0].push({src:$(this).attr("src"),type:$(this).attr("type")||i._getTypeFromFileExtension($(this).attr("src")),quality:$(this).attr("data-quality")||""});break;case"TRACK":t.playlist[0].config.tracks.push({src:$(this).attr("src"),kind:$(this).attr("kind")||"subtitle",lang:$(this).attr("srclang")||null,label:$(this).attr("label")||null})}}),t},this._raiseError=function(e){this.env.playerDom.html(e).css({color:"#fdfdfd",backgroundColor:"#333",lineHeight:this.config.height+"px",textAlign:"center",display:"block"}),this._promote("error")},this._init=function(e,t){var n=e||srcNode,r=t||cfg,i=this._readMediaTag(n);if(this.env.srcNode=n.wrap("<div></div>").parent().html(),n.unwrap(),this.env.className=n.attr("class")||"",this._id=n[0].id||$p.utils.randomId(8),i!==!1){this.env.playerDom=$("<div/>").attr({"class":n[0].className,style:n.attr("style")}),n.replaceWith(this.env.playerDom),n.empty().removeAttr("type").removeAttr("src");try{n.get(0).pause(),n.get(0).load()}catch(s){}$("<div/>").append(n).get(0).innerHTML="",n=null}else this.env.playerDom=n;r=$.extend(!0,{},i,r);for(var o in r)null!=this.config["_"+o]?this.config["_"+o]=r[o]:this.config[o]=o.indexOf("plugin_")>-1?$.extend(this.config[o],r[o]):r[o];if($p.utils.logging=this.config._debug,this.setSize(),this.getIsMobileClient()&&(this.config._autoplay=!1,this.config.fixedVolume=!0),this.env.playerDom.attr("id",this._id),this.config._theme)switch(typeof this.config._theme){case"string":break;case"object":this._applyTheme(this.config._theme)}else this._start(!1);return this},this._start=function(e){var t=this,n=this.getIframeParent();this._registerPlugins(),this.config._iframe===!0&&(n?n.ready(function(){t._enterFullViewport(!0)}):t._enterFullViewport(!0)),n===!1&&(this.config._isCrossDomain=!0),this.getIframeAllowFullscreen()||(this.config.enableFullscreen=!1),"function"==typeof onReady&&this._enqueue(function(){onReady(t)});for(var r in this.config._playlist[0])if(this.config._playlist[0][r].type&&(this.config._playlist[0][r].type.indexOf("/json")>-1||this.config._playlist[0][r].type.indexOf("/xml")>-1))return this.setFile(this.config._playlist[0][r].src,this.config._playlist[0][r].type),this;return this.setFile(this.config._playlist),this},this._applyTheme=function(data){var ref=this;if(data===!1)return this._raiseError("The Projekktor theme-set specified could not be loaded."),!1;if("string"==typeof data.css&&$("head").append('<style type="text/css">'+$p.utils.parseTemplate(data.css,{rp:data.baseURL})+"</style>"),"string"==typeof data.html&&this.env.playerDom.html($p.utils.parseTemplate(data.html,{p:this.getNS()})),this.env.playerDom.addClass(data.id).addClass(data.variation),this.env.className=this.env.className&&0!==this.env.className.length?this.env.className+" "+data.id:data.id,data.variation&&0!==data.variation.length&&(this.env.className+=" "+data.variation),"object"==typeof data.config){for(var i in data.config)null!=this.config["_"+i]?this.config["_"+i]=data.config[i]:this.config[i]=i.indexOf("plugin_")>-1?$.extend(!0,{},this.config[i],data.config[i]):data.config[i];if("object"==typeof data.config.plugins)for(var i=0;data.config.plugins.length>i;i++)try{typeof eval("projekktor"+data.config.plugins[i])}catch(e){return this._raiseError("The applied theme requires the following Projekktor plugin(s): <b>"+data.config.plugins.join(", ")+"</b>"),!1}}return data.onReady&&this._enqueue(function(player){eval(data.onReady)}),this._start()},this._init()}var arg=arguments[0],instances=[],plugins=[];if(!arguments.length)return projekktors[0]||null;if("number"==typeof arg)return projekktors[arg];if("string"==typeof arg){if("*"==arg)return new Iterator(projekktors);for(var i=0;projekktors.length>i;i++){try{if(projekktors[i].getId()==arg.id){instances.push(projekktors[i]);continue}}catch(e){}try{for(var j=0;$(arg).length>j;j++)projekktors[i].env.playerDom.get(0)!=$(arg).get(j)||instances.push(projekktors[i])}catch(e){}try{if(projekktors[i].getParent()==arg){instances.push(projekktors[i]);continue}}catch(e){}try{if(projekktors[i].getId()==arg){instances.push(projekktors[i]);continue}}catch(e){}}if(instances.length>0)return 1==instances.length?instances[0]:new Iterator(instances)}if(0===instances.length){var cfg=arguments[1]||{},callback=arguments[2]||{},count=0,playerA;if("string"==typeof arg)return $.each($(arg),function(){playerA=new PPlayer($(this),cfg,callback),projekktors.push(playerA),count++}),count>1?new Iterator(projekktors):playerA;if(arg)return projekktors.push(new PPlayer(arg,cfg,callback)),new Iterator(projekktors)}return null},$p.mmap=[],$p.models={},$p.newModel=function(e,t){if("object"!=typeof e)return n;if(!e.modelId)return n;var n=!1,r=$p.models[t]&&void 0!=t?$p.models[t].prototype:{};if($p.models[e.modelId])return n;$p.models[e.modelId]=function(){},$p.models[e.modelId].prototype=$.extend({},r,e),e.setiLove&&e.setiLove(),$p.mmap=$.grep($p.mmap,function(t){var n=t.model!=(e.replace?e.replace.toLowerCase():""),r=t.replaces!=e.modelId;return n&&r});for(var i=0;e.iLove.length>i;i++)e.iLove[i].model=e.modelId.toLowerCase(),e.iLove[i].replaces=e.replace?e.replace.toLowerCase():"",$p.mmap.push(e.iLove[i]);return!0}});var projekktorConfig=function(e){this._version=e};projekktorConfig.prototype={_playerName:"Projekktor",_playerHome:"http://www.projekktor.com?via=context",_cookieName:"projekktor",_cookieExpiry:356,_plugins:["display","controlbar","contextmenu"],_addplugins:[],_reelParser:null,_ns:"pp",_platforms:["browser","android","ios","native","flash","vlc"],_iframe:!1,_ignoreAttributes:!1,_loop:!1,_autoplay:!1,_continuous:!0,_thereCanBeOnlyOne:!0,_leaveFullscreen:!0,_playlist:[],_theme:!1,_themeRepo:!1,_messages:{0:"#0 An (unknown) error occurred.",1:"#1 You aborted the media playback. ",2:"#2 A network error caused the media download to fail part-way. ",3:"#3 The media playback was aborted due to a corruption problem. ",4:"#4 The media (%{title}) could not be loaded because the server or network failed.",5:"#5 Sorry, your browser does not support the media format of the requested file.",6:"#6 Your client is in lack of the Flash Plugin V%{flashver} or higher.",7:"#7 No media scheduled.",8:"#8 ! Invalid media model configured !",9:"#9 File (%{file}) not found.",10:"#10 Invalid or missing quality settings for %{title}.",11:"#11 Invalid streamType and/or streamServer settings for %{title}.",12:"#12 Invalid or inconsistent quality setup for %{title}.",80:"#80 The requested file does not exist or is delivered with an invalid content-type.",97:"No media scheduled.",98:"Invalid or malformed playlist data!",99:"Click display to proceed. ",100:"Keyboard Shortcuts",500:"This Youtube video has been removed or set to private",501:"The Youtube user owning this video disabled embedding.",502:"Invalid Youtube Video-Id specified."},_debug:!1,_width:null,_height:null,_ratio:!1,_keys:[],_isCrossDomain:!1,_forceFullViewport:!1,id:0,title:null,cat:"clip",poster:null,controls:!0,start:!1,stop:!1,volume:.5,cover:"",disablePause:!1,disallowSkip:!1,fixedVolume:!1,imageScaling:"aspectratio",videoScaling:"aspectratio",playerFlashMP4:"",playerFlashMP3:"",streamType:"http",streamServer:"",startParameter:"start",useYTIframeAPI:!0,enableKeyboard:!0,enableFullscreen:!0,playbackQuality:"default",errorCallback:function(){console.log(11111)},_playbackQualities:[{key:"small",minHeight:240,minWidth:240},{key:"medium",minHeight:360,minWidth:[{ratio:1.77,minWidth:640},{ratio:1.33,minWidth:480}]},{key:"large",minHeight:480,minWidth:[{ratio:1.77,minWidth:853},{ratio:1.33,minWidth:640}]},{key:"hd1080",minHeight:1080,minWidth:[{ratio:1.77,minWidth:1920},{ratio:1.33,minWidth:1440}]},{key:"hd720",minHeight:720,minWidth:[{ratio:1.77,minWidth:1280},{ratio:1.33,minWidth:960}]},{key:"highres",minHeight:1081,minWidth:0}],enableTestcard:!0,skipTestcard:!1,duration:0,className:""},jQuery(function(e){$p.utils={imageDummy:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi/v//PwNAgAEACQsDAUdpTjcAAAAASUVORK5CYII="},capitalise:function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},blockSelection:function(e){return e&&e.css({"-khtml-user-select":"none","-webkit-user-select":"none",MozUserSelect:"none","user-select":"none"}).attr("unselectable","on").bind("selectstart",function(){return!1}),e},unique:function(n){var r=[];for(var i=n.length;i--;){var s=n[i];-1===e.inArray(s,r)&&r.unshift(s)}return r},intersect:function(n,r){var i=[];return e.each(n,function(o){try{e.inArray(r,n[o])>-1&&i.push(n[o])}catch(u){}try{e.inArray(n[o],r)>-1&&i.push(n[o])}catch(u){}}),i},roundNumber:function(e,t){return 0>=e||isNaN(e)?0:Math.round(e*Math.pow(10,t))/Math.pow(10,t)},randomId:function(e){var t="abcdefghiklmnopqrstuvwxyz",n="";for(var r=0;e>r;r++){var i=Math.floor(Math.random()*t.length);n+=t.substring(i,i+1)}return n},toAbsoluteURL:function(e){var t=location,n,r,i,s;if(null==e||""==e)return"";if(/^\w+:/.test(e))return e;if(n=t.protocol+"//"+t.host,0===e.indexOf("/"))return n+e;if(r=t.pathname.replace(/\/[^\/]*$/,""),i=e.match(/\.\.\//g))for(e=e.substring(3*i.length),s=i.length;s--;)r=r.substring(0,r.lastIndexOf("/"));return n+r+"/"+e},strip:function(e){return e.replace(/^\s+|\s+$/g,"")},toSeconds:function(e){var t=0;if("string"!=typeof e)return e;if(e){var n=e.split(":");for(n.length>3&&(n=n.slice(0,3)),i=0;n.length>i;i++)t=60*t+parseFloat(n[i].replace(",","."))}return parseFloat(t)},toTimeString:function(e,t){var n=Math.floor(e/3600),r=e%3600,i=Math.floor(r/60),s=r%60,o=Math.floor(s);return 10>n&&(n="0"+n),10>i&&(i="0"+i),10>o&&(o="0"+o),t===!0?n+":"+i:n+":"+i+":"+o},embeddFlash:function(n,r,i,s){var o=r.FlashVars||{},u="",a="",f="",l="",c=n,h="";r.src+=-1==r.src.indexOf("?")?"?":"&";for(var p in o)"function"!=typeof o[p]&&(l=o[p],r.src+=p+"="+encodeURIComponent(l)+"&");r.src.replace(/&$/,""),a='<object id="'+r.id+'" codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"  name="'+r.name+'" width="'+r.width+'" height="'+r.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+r.src+'"></param><param name="allowScriptAccess" value="'+r.allowScriptAccess+'"></param><param name="allowFullScreen" value="'+r.allowFullScreen+'"></param><param name="wmode" value="'+r.wmode+'"></param>',f="<embed ";for(var p in r)"FLASHVARS"!==p.toUpperCase()&&"function"!=typeof r[p]&&(f+=p+'="'+r[p]+'" ');return f+=' pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash"></embed>',u=a+f,u+="</object>",(!document.all||window.opera)&&(u=f),null===c?u:(c.get(0).innerHTML=u,i!==!1&&c.append(e("<div/>").attr("id",r.id+"_cc").css({width:s?"1px":"100%",height:s?"1px":"100%",backgroundColor:9>$p.utils.ieVersion()?"#000":"transparent",filter:"alpha(opacity = 0.1)",position:"absolute",top:0,left:0})),e("#"+r.id))},ieVersion:function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0]);return e>4?e:void 0},parseTemplate:function(e,t,n){if(void 0===t||0==t.length||"object"!=typeof t)return e;for(var r in t)e=e.replace(RegExp("%{"+r+"}","gi"),n===!0?window.encodeURIComponent(t[r]):t[r]);return e=e.replace(/%{(.*?)}/gi,"")},stretch:function(n,r,i,s,o,u){if(null==r)return!1;r instanceof e==0&&(r=e(r)),r.data("od")||r.data("od",{width:r.width(),height:r.height()});var a=void 0!==o?o:r.data("od").width,f=void 0!==u?u:r.data("od").height,l=i/a,c=s/f,h=i,p=s;switch(n){case"none":h=a,p=f;break;case"fill":l>c?(h=a*l,p=f*l):c>l&&(h=a*c,p=f*c);break;case"aspectratio":default:l>c?(h=a*c,p=f*c):c>l&&(h=a*l,p=f*l)}return i=$p.utils.roundNumber(100*(h/i),0),s=$p.utils.roundNumber(100*(p/s),0),0===i||0===s?!1:(r.css({margin:0,padding:0,width:i+"%",height:s+"%",left:(100-i)/2+"%",top:(100-s)/2+"%"}),r.data("od").width!=r.width()||r.data("od").height!=r.height()?!0:!1)},parseUri:function(e){var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r},log:function(){this.logging!==!1&&(this.history=this.history||[],this.history.push(arguments),window.console&&console.log(Array.prototype.slice.call(arguments)))},cleanResponse:function(n,r){var i=!1;switch(r){case"html":case"xml":window.DOMParser?(i=new DOMParser,i=i.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n));break;case"json":i=n,"string"==typeof i&&(i=e.parseJSON(i));break;case"jsonp":break;default:i=n}return i},cssTransitions:function(){function n(e){for(var n in e)if(null!=t[e[n]])return!0;return!1}function r(e){var t="Webkit Moz O ms Khtml".split(" "),r=e.charAt(0).toUpperCase()+e.substr(1),s=(e+" "+t.join(r+" ")+r).split(" ");return n(s)}var e=document.createElement("z"),t=e.style;return r("animationName")},versionCompare:function(e,t){var n=e.split("."),r=t.split("."),i=0;for(i=0;n.length>i;++i)n[i]=Number(n[i]);for(i=0;r.length>i;++i)r[i]=Number(r[i]);return 2==n.length&&(n[2]=0),n[0]>r[0]?!0:n[0]<r[0]?!1:n[1]>r[1]?!0:n[1]<r[1]?!1:n[2]>r[2]?!0:n[2]<r[2]?!1:!0},stringify:function(e){if("JSON"in window)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),e+"";var n,r,i=[],s=e&&e.constructor==Array;for(n in e)e.hasOwnProperty(n)&&(r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=$p.utils.stringify(r)),i.push((s?"":'"'+n+'":')+(r+""))));return(s?"[":"{")+(i+"")+(s?"]":"}")},logging:!1}}),jQuery(function(e){$p.platforms={VLC:function(){if(navigator.plugins&&navigator.plugins.length>0){for(var e=0;navigator.plugins.length>e;++e)if(-1!=navigator.plugins[e].name.indexOf("VLC")){if(null!=navigator.plugins[e].version)return navigator.plugins[e].version||"0";if(null!=navigator.plugins[e].description&&navigator.plugins[e].description.match(/\d{1,}\.\d{1,}\.\d{1,}/i)[0])return navigator.plugins[e].description.match(/\d{1,}\.\d{1,}\.\d{1,}/i)[0]}}else try{return new ActiveXObject("VideoLAN.VLCPlugin.2"),"0"}catch(t){}return"0"},FLASH:function(e){try{try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{t.AllowScriptAccess="always"}catch(n){return"6.0.0"}}catch(n){}return""+(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(n){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return""+(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(n){}}return"0"},FLASHNA:function(e){try{try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{t.AllowScriptAccess="always"}catch(n){return"6.0.0"}}catch(n){}return""+(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(n){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return""+(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(n){}}return"0"},ANDROID:function(e){try{return""+navigator.userAgent.toLowerCase().match(/android\s+(([\d\.]+))?/)[1]}catch(t){}return"0"},IOS:function(e){var t=navigator.userAgent.toLowerCase(),n=t.indexOf("os ");return(t.indexOf("iphone")>-1||t.indexOf("ipad")>-1)&&n>-1?""+t.substr(n+3,3).replace("_","."):"0"},NATIVE:function(n){try{var r=e(n.indexOf("video")>-1?"<video/>":"<audio/>").get(0);if(null!=r.canPlayType){if("*"===n)return"1";switch(r.canPlayType(n)){case"no":case"":return"0";default:return"1"}}}catch(i){}return"0"},BROWSER:function(e){return"1"}}});var projekktorPluginInterface=function(){};jQuery(function($){projekktorPluginInterface.prototype={pluginReady:!1,reqVer:null,name:"",pp:{},config:{},playerDom:null,_appliedDOMObj:[],_pageDOMContainer:{},_childDOMContainer:{},_init:function(e){return this.config=$.extend(!0,this.config,e),null==this.reqVer||$p.utils.versionCompare(this.pp.getPlayerVer(),this.reqVer)?(this.initialize(),void 0):(alert("Plugin '"+this.name+"' requires Projekktor v"+this.reqVer+" or later! Please visit http://www.projekktor.com and get the most recent version."),this.pluginReady=!0,void 0)},getConfig:function(e,t){var n=null,r=t||null;return null!=this.pp.getConfig("plugin_"+this.name)&&(n=this.pp.getConfig("plugin_"+this.name)[e]),null==n&&(n=this.pp.getConfig(e)),null==n&&(n=this.config[e]),"object"==typeof n&&null===n.length?n=$.extend(!0,{},n,this.config[e]):"object"==typeof n&&(n=$.extend(!0,[],this.config[e]||[],n||[])),null==n?r:n},getDA:function(e){return"data-"+this.pp.getNS()+"-"+this.name+"-"+e},getCN:function(e){return this.pp.getNS()+e},sendEvent:function(e,t){this.pp._promote({_plugin:this.name,_event:e},t)},deconstruct:function(){this.pluginReady=!1,$.each(this._appliedDOMObj,function(){$(this).unbind()})},applyToPlayer:function(e,t,n){if(!e)return null;var r=t||"container",i="",s=this;try{i=e.attr("class")||this.name}catch(o){i=this.name}return this._pageDOMContainer[r]=$("["+this.getDA("host")+"='"+this.pp.getId()+"']["+this.getDA("func")+"='"+r+"']"),this._childDOMContainer[r]=this.playerDom.find("["+this.getDA("func")+"='"+r+"'],."+this.getCN(i)+":not(["+this.getDA("func")+"=''])"),this._pageDOMContainer[r].length>0?(this._pageDOMContainer[r].removeClass("active").addClass("inactive"),$.each(this._pageDOMContainer[r],function(){s._appliedDOMObj.push($(this))}),this._pageDOMContainer[r]):0==this._childDOMContainer[r].length?(e.removeClass(i).addClass(this.pp.getNS()+i).removeClass("active").addClass("inactive").attr(this.getDA("func"),r).appendTo(this.playerDom),this._childDOMContainer[r]=e,this._appliedDOMObj.push(e),n===!0&&e.addClass("active").removeClass("inactive"),e):($.each(this._childDOMContainer[r],function(){$(this).attr(s.getDA("func"),r),s._appliedDOMObj.push($(this))}),n===!0&&this._childDOMContainer[r].addClass("active").removeClass("inactive"),$(this._childDOMContainer[r][0]))},getElement:function(e){return this.pp.env.playerDom.find("."+this.pp.getNS()+e)},setInactive:function(){$(this._pageDOMContainer.container).removeClass("active").addClass("inactive"),$(this._childDOMContainer.container).removeClass("active").addClass("inactive"),this.sendEvent("inactive",$.extend(!0,{},this._pageDOMContainer.container,this._childDOMContainer.container))},setActive:function(e,t){var n="object"==typeof e?e:this.getElement(e);return null==e?(this._pageDOMContainer.container.removeClass("inactive").addClass("active"),this._childDOMContainer.container.removeClass("inactive").addClass("active"),this.sendEvent("active",$.extend(!0,{},this._pageDOMContainer.container,this._childDOMContainer.container)),n):(0!=t?n.addClass("active").removeClass("inactive"):n.addClass("inactive").removeClass("active"),n.css("display",""),n)},getActive:function(e){return $(e).hasClass("active")},initialize:function(){},isReady:function(){return this.pluginReady},clickHandler:function(e){try{this.pp[this.getConfig(e+"Click").callback](this.getConfig(e+"Click").value)}catch(t){try{this.getConfig(e+"Click")(this.getConfig(e+"Click").value)}catch(t){}}return!1},cookie:function(key,value,ttl){if(void 0===document.cookie||document.cookie===!1)return null;if(null==key&&null!=value)return null;if(0==this.pp.getConfig("cookieExpiry"))return null;var t=new Date,result=null,cookieString="",tmp=storedData=jQuery.parseJSON(eval(result=RegExp("(?:^|; )"+encodeURIComponent(this.getConfig("cookieName")+"_"+this.name)+"=([^;]*)").exec(document.cookie))?decodeURIComponent(result[1]):null);return("object"!=typeof storedData||null==storedData)&&(storedData={},null!=key&&(storedData[key]=tmp)),null==key?storedData:1==arguments.length?storedData[key]:(null!=value?storedData[key]=value:delete storedData[key],$.isEmptyObject(storedData)?(ttl=0,storedData=""):storedData=$p.utils.stringify(storedData),t.setDate(t.getDate()+(ttl||this.getConfig("cookieExpiry",0))),cookieString=encodeURIComponent(this.getConfig("cookieName","projekktor")+"_"+this.name)+"="+encodeURIComponent(storedData)+"; expires="+(0==ttl?"Thu, 01 Jan 1970 00:00:01 GMT":t.toUTCString()),this.getConfig("cookieDomain",!1)&&(cookieString+="; domain="+options.domain),document.cookie=cookieString,value)},eventHandler:function(){}}});var playerModel=function(){};jQuery(function(e){playerModel.prototype={modelId:"player",iLove:[],_currentState:null,_currentBufferState:null,_currentSeekState:null,_ap:!1,_volume:0,_quality:"default",_displayReady:!1,_isPlaying:!1,_id:null,_KbPerSec:0,_bandWidthTimer:null,_isPoster:!1,_isFullscreen:!1,hasGUI:!1,allowRandomSeek:!1,flashVerifyMethod:"api_get",mediaElement:null,pp:{},media:{duration:0,position:0,maxpos:0,offset:0,file:!1,poster:"",ended:!1,loadProgress:0,errorCode:0},_init:function(n){this.pp=n.pp||null,this.media=e.extend(!0,{},this.media,n.media),this._ap=n.autoplay,this._isFullscreen=n.fullscreen,this._id=$p.utils.randomId(8),this._quality=n.quality||this._quality,this._volume=this.pp.getVolume(),this._playbackQuality=this.pp.getPlaybackQuality(),this.init()},init:function(e){this.ready()},ready:function(){this.sendUpdate("modelReady"),this._ap?(this.sendUpdate("autostart",!0),this._setState("awakening")):this.displayItem(!1)},displayItem:function(n){return this._displayReady=!1,this._isPoster=!1,this.pp.removeListener("fullscreen.poster"),this.pp.removeListener("resize.poster"),n!==!0||this.getState("STOPPED")?(this._setState("idle"),this.applyImage(this.getPoster(),this.pp.getMediaContainer().html("")),this._isPoster=!0,this.displayReady(),void 0):(e("#"+this.pp.getMediaId()+"_image").remove(),e("#"+this.pp.getId()+"_testcard_media").remove(),this.applyMedia(this.pp.getMediaContainer()),void 0)},applyMedia:function(){},sendUpdate:function(e,t){"ERROR"!=this._currentState&&("error"==e&&this._setState("error"),this.pp._modelUpdateListener(e,t))},displayReady:function(){this._displayReady=!0,this.pp._modelUpdateListener("displayReady")},start:function(){var e=this;(null!=this.mediaElement||"PLAYLIST"==this.modelId)&&(this.getState("STARTING")||(this._setState("STARTING"),this.getState("STOPPED")||this.addListeners(),this.pp.getIsMobileClient("ANDROID")&&!this.getState("PLAYING")&&setTimeout(function(){e.setPlay()},500),this.setPlay()))},addListeners:function(){},removeListeners:function(){try{this.mediaElement.unbind(".projekktor"+this.pp.getId())}catch(e){}},detachMedia:function(){},destroy:function(n){this.removeListeners(),this.getState("IDLE")||this._setState("destroying"),this.detachMedia();try{e("#"+this.mediaElement.id).empty()}catch(r){}if(!this.pp.getIsMobileClient()){try{e("#"+this.mediaElement.id).remove()}catch(r){}try{this.mediaElement.remove()}catch(r){}this.pp.getMediaContainer().html("")}this.mediaElement=null,this.media.loadProgress=0,this.media.playProgress=0,this.media.frame=0,this.media.position=0,this.media.duration=0},reInit:function(){this.flashVersion===!1&&this._isFF()&&!this.getState("ERROR")&&this.pp.getConfig("bypassFlashFFFix")!==!0&&(this.sendUpdate("FFreinit"),this.removeListeners(),this.displayItem(!this.getState("IDLE")))},applyCommand:function(e,t){switch(e){case"quality":this.setQuality(t);break;case"error":this._setState("error"),this.setTestcard(t);break;case"play":if(this.getState("ERROR"))break;if(this.getState("IDLE")){this._setState("awakening");break}this.setPlay();break;case"pause":if(this.getState("ERROR"))break;this.setPause();break;case"volume":if(this.getState("ERROR"))break;this.setVolume(t)||(this._volume=t,this.sendUpdate("volume",t));break;case"stop":this.setStop();break;case"frame":this.setFrame(t);break;case"seek":if(this.getState("ERROR"))break;if(this.getSeekState("SEEKING"))break;if(this.getState("IDLE"))break;if(-1==this.media.loadProgress)break;this._setSeekState("seeking",t),this.setSeek(t);break;case"fullscreen":if(t==this._isFullscreen)break;this._isFullscreen=t,this.sendUpdate("fullscreen",this._isFullscreen),this.reInit(),this.setFullscreen();break;case"resize":this.setResize(),this.sendUpdate("resize",t)}},setFrame:function(e){var t=e/this.pp.getConfig("fps")+1e-5;this.setSeek(t)},setSeek:function(e){},setPlay:function(){},setPause:function(){},setStop:function(){this.detachMedia(),this._setState("stopped"),this.displayItem(!1)},setVolume:function(e){},setFullscreen:function(e){this.setResize()},setResize:function(){var e=this.pp.getMediaContainer();this.sendUpdate("scaled",{realWidth:this.media.videoWidth||null,realHeight:this.media.videoHeight||null,displayWidth:e.width(),displayHeight:e.height()})},setPosterLive:function(){},setQuality:function(e){if(this._quality!=e){this._quality=e;try{this.applySrc()}catch(t){}this.qualityChangeListener()}},getQuality:function(){return this._quality},getVolume:function(){return null==this.mediaElement?this._volume:this.mediaElement.prop("muted")===!0?0:this.mediaElement.prop("volume")},getLoadProgress:function(){return this.media.loadProgress||0},getLoadPlaybackProgress:function(){return this.media.playProgress||0},getPosition:function(){return this.media.position||0},getFrame:function(){return this.media.frame||0},getDuration:function(){return this.media.duration||0},getMaxPosition:function(){return this.media.maxpos||0},getPlaybackQuality:function(){return e.inArray(this._quality,this.media.qualities)>-1?this._quality:"default"},getInFullscreen:function(){return this.pp.getInFullscreen()},getKbPerSec:function(){return this._KbPerSec},getState:function(e){var t=null==this._currentState?"IDLE":this._currentState;return null!=e?t==e.toUpperCase():t},getBufferState:function(e){var t=null==this._currentBufferState?"NONE":this._currentBufferState;return null!=e?t==e.toUpperCase():t},getSeekState:function(e){var t=null==this._currentSeekState?"NONE":this._currentSeekState;return null!=e?t==e.toUpperCase():t},getSrc:function(){try{return this.mediaElement.get(0).currentSrc}catch(e){}try{return this.media.file[0].src}catch(e){}try{return this.getPoster()}catch(e){}return null},getModelName:function(){return this.modelId||null},getHasGUI:function(){return this.hasGUI&&!this._isPoster},getIsReady:function(){return this._displayReady},getPoster:function(){var e="poster",t=null,n=this.pp.getConfig(e),r="default",i=[];if("object"!=typeof n)return n;for(var s in n)n[s].quality&&i.push(n[s].quality);r=this.pp.getAppropriateQuality(i);for(var o in n)(n[o].quality==r||""==t||"default"==r)&&(t=n[o].src);return t},getMediaElement:function(){return this.mediaElement||e("<video/>")},getMediaDimensions:function(){return{width:this.media.videoWidth||0,height:this.media.videoHeight||0}},getSource:function(){var n=[],r=this.media.offset||this.media.position||!1,i=this,s="pseudo"==this.pp.getConfig("streamType")?this.pp.getConfig("startParameter"):!1;return e.each(this.media.file||[],function(){if(i._quality!=this.quality&&null!==i._quality)return!0;if(!s||!r)return n.push(this),!0;var o=$p.utils.parseUri(this.src),u=o.protocol+"://"+o.host+o.path,a=[];return e.each(o.queryKey,function(e,t){e!=s&&a.push(e+"="+t)}),u+=a.length>0?"?"+a.join("&")+"&"+s+"="+r:"?"+s+"="+r,this.src=u,n.push(this),!0}),0===n.length?this.media.file:n},timeListener:function(e){if(null!=e){var t=parseFloat((e.position||e.currentTime||this.media.position||0).toFixed(2)),n=parseFloat((e.duration||0).toFixed(2));isNaN(n+t)||((0!=n&&n!=this.media.duration&&!this.isPseudoStream||this.isPseudoStream&&0==this.media.duration)&&(this.media.duration=n,this.sendUpdate("durationChange",n)),t!=this.media.position&&(this.media.position=this.isPseudoStream&&Math.round(100*t)/100==Math.round(100*this.media.offset)/100?this.media.offset:this.media.offset+t,this.media.maxpos=Math.max(this.media.maxpos||0,this.media.position||0),this.media.playProgress=parseFloat(this.media.position>0&&this.media.duration>0?100*this.media.position/this.media.duration:0),this.media.frame=this.media.position*this.pp.getConfig("fps"),this.sendUpdate("time",this.media.position),this.loadProgressUpdate()))}},loadProgressUpdate:function(){var e=this.mediaElement.get(0),t=0;0!==this.media.duration&&"object"==typeof e.buffered&&(0!==e.buffered.length||0!==e.seekable.length)&&100!=this.media.loadProgress&&(t=e.seekable&&e.seekable.length>0?Math.round(100*e.seekable.end(0)/this.media.duration):Math.round(100*e.buffered.end(e.buffered.length-1))/this.media.duration,this.media.loadProgress>t||(this.media.loadProgress=this.allowRandomSeek===!0?100:-1,this.media.loadProgress=100>this.media.loadProgress||void 0===this.media.loadProgress?t:100,this.sendUpdate("progress",this.media.loadProgress)))},progressListener:function(e,t){if(this.mediaElement instanceof jQuery&&"object"==typeof this.mediaElement.get(0).buffered&&this.mediaElement.get(0).buffered.length>0)return this.mediaElement.unbind("progress"),void 0;null==this._bandWidthTimer&&(this._bandWidthTimer=(new Date).getTime());var n=0,r=0;try{isNaN(t.loaded/t.total)?t.originalEvent&&!isNaN(t.originalEvent.loaded/t.originalEvent.total)&&(n=t.originalEvent.loaded,r=t.originalEvent.total):(n=t.loaded,r=t.total)}catch(i){e&&!isNaN(e.loaded/e.total)&&(n=e.loaded,r=e.total)}var s=n>0&&r>0?100*n/r:0;Math.round(s)>Math.round(this.media.loadProgress)&&(this._KbPerSec=n/1024/(((new Date).getTime()-this._bandWidthTimer)/1e3)),s=100!==this.media.loadProgress?s:100,s=this.allowRandomSeek===!0?100:5*Math.round(s/5),this.media.loadProgress!=s&&(this.media.loadProgress=s,this.sendUpdate("progress",s)),this.media.loadProgress>=100&&this.allowRandomSeek===!1&&this._setBufferState("full")},qualityChangeListener:function(){this.sendUpdate("qualityChange",this._quality)},endedListener:function(e){null!==this.mediaElement&&(0>=this.media.maxpos||"STARTING"!=this.getState()&&this._setState("completed"))},waitingListener:function(e){this._setBufferState("empty")},canplayListener:function(e){this._setBufferState("full")},canplaythroughListener:function(e){this._setBufferState("full")},suspendListener:function(e){this._setBufferState("full")},playingListener:function(e){this._setState("playing")},startListener:function(e){this.applyCommand("volume",this.pp.getConfig("volume")),this.isPseudoStream||this.setSeek(this.media.position||0),this._setState("playing")},pauseListener:function(e){this._setState("paused")},seekedListener:function(e){this._setSeekState("SEEKED",this.media.position)},volumeListener:function(e){this.sendUpdate("volume",this.getVolume())},flashReadyListener:function(){this._displayReady=!0},errorListener:function(e,t){},metaDataListener:function(e){try{this.media.videoWidth=e.videoWidth,this.media.videoHeight=e.videoHeight}catch(t){}this._scaleVideo()},setTestcard:function(n,r){var i=this.pp.getMediaContainer().html("").css({width:"100%",height:"100%"}),s=e.extend(this.pp.getConfig("messages"),this.pp.getConfig("msg")),o=null==s[n]?0:n,u=void 0!==r&&""!==r?r:s[o];this.removeListeners(),this.detachMedia(),this.pp.getItemCount()>1&&(u+=" "+s[99]),3>u.length&&(u="ERROR"),100==o&&(u=r),u=$p.utils.parseTemplate(u,e.extend({},this.media,{title:this.pp.getConfig("title")})),this.mediaElement=e("<div/>").addClass(this.pp.getNS()+"testcard").attr("id",this.pp.getId()+"_testcard_media").html("<p>"+u+"</p>").appendTo(i),null!=this.pp.getConfig("msg")[o]&&this.mediaElement.addClass(this.pp.getNS()+"customtestcard")},applySrc:function(){},applyImage:function(n,r){var i=e("<img/>").hide(),s=this;if($p.utils.blockSelection(i),null==n||n===!1)return e("<span/>").attr({id:this.pp.getMediaId()+"_image"}).appendTo(r);i.html("").appendTo(r).attr({id:this.pp.getMediaId()+"_image",alt:this.pp.getConfig("title")||""}).css({position:"absolute"}),i.error(function(n){e(this).remove()}),i.load(function(e){var t=e.currentTarget;i.data("od")||i.data("od",{width:t.naturalWidth,height:t.naturalHeight}),i.show(),$p.utils.stretch(s.pp.getConfig("imageScaling"),i,r.width(),r.height())}),i.attr("src",n);var o=function(e,t){t.is(":visible")===!1&&s.pp.removeListener("fullscreen",arguments.callee);var n=t.width(),r=t.height(),i=e.width(),o=e.height();if($p.utils.stretch(s.pp.getConfig("imageScaling"),e,t.width(),t.height()))try{s.sendUpdate("scaled",{realWidth:e._originalDimensions.width,realHeight:e._originalDimensions.height,displayWidth:s.mediaElement.width(),displayHeight:s.mediaElement.height()})}catch(u){}e.attr("src")!=s.getPoster()&&e.attr("src",s.getPoster())};return this.pp.addListener("fullscreen.poster",function(){o(i,r)}),this.pp.addListener("resize.poster",function(){o(i,r)}),i},createFlash:function(e,t,n){this.mediaElement=$p.utils.embeddFlash(t.html(""),e,n,!0),this._waitforPlayer()},_waitforPlayer:function(){var n=this,r=0;this._displayReady!==!0&&(this._setBufferState("empty"),function(){if(r>6&&n._isFF()){r=0;var s=e(n.mediaElement).parent(),o=e(n.mediaElement).clone();s.html("").append(o),n.mediaElement=o}s=n.mediaElement;try{if(e(s).attr("id").indexOf("testcard")>-1)return}catch(u){console.log(u)}r++;try{void 0===s?setTimeout(arguments.callee,200):void 0===s.get(0)[n.flashVerifyMethod]?setTimeout(arguments.callee,200):(n._setBufferState("full"),n.flashReadyListener(),e("#"+e(n.mediaElement).attr("id")+"_cc").css({width:"100%",height:"100%"}))}catch(u){setTimeout(arguments.callee,200)}}())},_setState:function(e){var t=this;e=e.toUpperCase(),this._currentState!=e&&"ERROR"!=this._currentState&&("PAUSED"==this._currentState&&"PLAYING"==e&&(this.sendUpdate("resume",this.media),this._isPlaying=!0),"IDLE"!=this._currentState&&"STARTING"!=this._currentState||"PLAYING"!=e||(this.sendUpdate("start",this.media),this._isPlaying=!0),"PAUSED"==e&&(this._isPlaying=!1),"ERROR"==e&&(this.setPlay=this.setPause=function(){t.sendUpdate("start")}),this._currentState=e.toUpperCase(),this.sendUpdate("state",this._currentState))},_setBufferState:function(e){this._currentBufferState!=e.toUpperCase()&&(this._currentBufferState=e.toUpperCase(),this.sendUpdate("buffer",this._currentBufferState))},_setSeekState:function(e,t){this._currentSeekState!=e.toUpperCase()&&(this._currentSeekState=e.toUpperCase(),this.sendUpdate("seek",this._currentSeekState))},_scaleVideo:function(e){var t=this.pp.getMediaContainer();if(!this.pp.getIsMobileClient())try{var n=t.width(),r=t.height(),i=this.media.videoWidth,s=this.media.videoHeight;$p.utils.stretch(this.pp.getConfig("videoScaling"),this.mediaElement,n,r,i,s)&&this.sendUpdate("scaled",{realWidth:i,realHeight:s,displayWidth:n,displayHeight:r})}catch(o){}},_isFF:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}}}),jQuery(function(e){$p.newModel({modelId:"NA",iLove:[{ext:"NaN",type:"none/none",platform:"browser"}],hasGUI:!0,applyMedia:function(e){var t=this;e.html("");var n=function(e,n){n.getState("AWAKENING")||(t.pp.removeListener("mousedown",arguments.callee),t._setState("completed"))};this.displayReady(),this.pp.getConfig("enableTestcard")&&!this.pp.getIsMobileClient()?(this.pp.addListener("mousedown",n),this._setState("error"),this.setTestcard(null!=this.media.file[0].src&&7===this.media.errorCode?5:this.media.errorCode)):(this.applyCommand("stop"),window.location.href=this.media.file[0].src)},detachMedia:function(){this.pp.removeListener("leftclick",this.mouseClick)}})}),jQuery(function(e){$p.newModel({modelId:"VIDEO",androidVersion:"2",iosVersion:"3",nativeVersion:"1",iLove:[{ext:"mp4",type:"video/mp4",platform:["ios","android","native"],streamType:["http","pseudo","httpVideo"],fixed:"maybe"},{ext:"m4v",type:"video/mp4",platform:["ios","android","native"],streamType:["http","pseudo","httpVideo"],fixed:"maybe"},{ext:"ogv",type:"video/ogg",platform:"native",streamType:["http","httpVideo"]},{ext:"webm",type:"video/webm",platform:"native",streamType:["http","httpVideo"]},{ext:"ogg",type:"video/ogg",platform:"native",streamType:["http","httpVideo"]},{ext:"anx",type:"video/ogg",platform:"native",streamType:["http","httpVideo"]}],_eventMap:{pause:"pauseListener",play:"playingListener",volumechange:"volumeListener",progress:"progressListener",timeupdate:"timeListener",ended:"_ended",waiting:"waitingListener",canplaythrough:"canplayListener",canplay:"canplayListener",error:"errorListener",suspend:"suspendListener",seeked:"seekedListener",loadedmetadata:"metaDataListener",loadstart:null},isGingerbread:!1,isAndroid:!1,allowRandomSeek:!1,videoWidth:0,videoHeight:0,wasPersistent:!0,isPseudoStream:!1,init:function(){var e=navigator.userAgent;e.indexOf("Android")>=0&&(this.isAndroid=!0,3>parseFloat(e.slice(e.indexOf("Android")+8))&&(this.isGingerbread=!0)),this.ready()},applyMedia:function(n){0===e("#"+this.pp.getMediaId()+"_html").length&&(this.wasPersistent=!1,n.html("").append(e("<video/>").attr({id:this.pp.getMediaId()+"_html",poster:$p.utils.imageDummy(),loop:!1,autoplay:!1,preload:"none","x-webkit-airplay":"allow"}).prop({controls:!1,volume:this.getVolume()}).css({width:"100%",height:"100%",position:"absolute",top:0,left:0}))),this.mediaElement=e("#"+this.pp.getMediaId()+"_html"),this.applySrc()},applySrc:function(){var n=this,r=this.getSource(),i=n.getState("AWAKENING");this.mediaElement.attr("src",r[0].src),this.isGingerbread||this.mediaElement.attr("type",r[0].originalType),this.mediaElement.bind("mousedown.projekktorqs"+this.pp.getId(),this.disableDefaultVideoElementActions),this.mediaElement.bind("click.projekktorqs"+this.pp.getId(),this.disableDefaultVideoElementActions);var s=function(){return n.mediaElement.unbind("loadstart.projekktorqs"+n.pp.getId()),n.mediaElement.unbind("loadeddata.projekktorqs"+n.pp.getId()),n.mediaElement.unbind("canplay.projekktorqs"+n.pp.getId()),n.addListeners("error"),n.addListeners("play"),n.addListeners("canplay"),n.mediaElement=e("#"+n.pp.getMediaId()+"_html"),i?(n.displayReady(),void 0):n.getSeekState("SEEKING")?(n._isPlaying&&n.setPlay(),n.seekedListener(),void 0):(n.isPseudoStream||n.setSeek(n.media.position||0),n._isPlaying&&n.setPlay(),void 0)};this.mediaElement.bind("loadstart.projekktorqs"+this.pp.getId(),s),this.mediaElement.bind("loadeddata.projekktorqs"+this.pp.getId(),s),this.mediaElement.bind("canplay.projekktorqs"+this.pp.getId(),s),this.mediaElement[0].load(),this.isGingerbread&&s()},detachMedia:function(){try{this.removeListener("error"),this.removeListener("play"),this.removeListener("canplay"),this.mediaElement.unbind("mousedown.projekktorqs"+this.pp.getId()),this.mediaElement.unbind("click.projekktorqs"+this.pp.getId()),this.mediaElement[0].pause(),this.mediaElement.attr("src",""),this.mediaElement[0].load()}catch(e){}},addListeners:function(n,r){if(null!=this.mediaElement){var i=null!=r?".projekktor"+r+this.pp.getId():".projekktor"+this.pp.getId(),s=this,o=null==n?"*":n;e.each(this._eventMap,function(e,t){e!=o&&"*"!=o||null==t||s.mediaElement.bind(e+i,function(e){s[t](this,e)})})}},removeListener:function(n,r){if(null!=this.mediaElement){var i=null!=r?".projekktor"+r+this.pp.getId():".projekktor"+this.pp.getId(),s=this;e.each(this._eventMap,function(e,t){e==n&&s.mediaElement.unbind(e+i)})}},_ended:function(){var e=this.mediaElement[0].duration,t=Math.round(this.media.position)===Math.round(e),n=2>e-this.media.maxpos&&0===this.media.position||!1;t||n||this.isPseudoStream?this.endedListener(this):this.pauseListener(this)},playingListener:function(e){var t=this;this.isGingerbread||function(){try{if(0===t.getDuration())return""!==t.mediaElement.get(0).currentSrc&&t.mediaElement.get(0).networkState==t.mediaElement.get(0).NETWORK_NO_SOURCE?(t.sendUpdate("error",80),void 0):(setTimeout(arguments.callee,500),void 0)}catch(e){}}(),this._setState("playing")},errorListener:function(e,t){try{switch(t.target.error.code){case t.target.error.MEDIA_ERR_ABORTED:this.sendUpdate("error",1);break;case t.target.error.MEDIA_ERR_NETWORK:this.sendUpdate("error",2);break;case t.target.error.MEDIA_ERR_DECODE:this.sendUpdate("error",3);break;case t.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.sendUpdate("error",4);break;default:this.sendUpdate("error",5)}}catch(n){}},canplayListener:function(n){var r=this;"pseudo"==this.pp.getConfig("streamType")&&e.each(this.media.file,function(){return this.src.indexOf(r.mediaElement[0].currentSrc)>-1&&"video/mp4"==this.type?(r.isPseudoStream=!0,r.allowRandomSeek=!0,r.media.loadProgress=100,!1):!0}),this._setBufferState("full")},disableDefaultVideoElementActions:function(e){e.preventDefault(),e.stopPropagation()},setPlay:function(){try{this.mediaElement[0].play()}catch(e){}},setPause:function(){try{this.mediaElement[0].pause()}catch(e){}},setVolume:function(e){this._volume=e;try{this.mediaElement.prop("volume",e)}catch(t){return!1}return e},setSeek:function(e){var t=this;return this.isPseudoStream?(this.media.position=0,this.media.offset=e,this.applySrc(),void 0):(function(){try{t.mediaElement[0].currentTime=e,t.timeListener({position:e})}catch(n){null!=t.mediaElement&&setTimeout(arguments.callee,100)}}(),void 0)},setFullscreen:function(e){"audio"!=this.element&&this._scaleVideo()},setResize:function(){"audio"!=this.element&&this._scaleVideo(!1)}}),$p.newModel({modelId:"AUDIO",iLove:[{ext:"ogg",type:"audio/ogg",platform:"native",streamType:["http","httpAudio"]},{ext:"oga",type:"audio/ogg",platform:"native",streamType:["http","httpAudio"]},{ext:"mp3",type:"audio/mp3",platform:["ios","android","native"],streamType:["http","httpAudio"]},{ext:"mp3",type:"audio/mpeg",platform:["ios","android","native"],streamType:["http","httpAudio"]}],imageElement:{},applyMedia:function(n){$p.utils.blockSelection(n),this.imageElement=this.applyImage(this.getPoster("cover")||this.getPoster("poster"),n),this.imageElement.css({border:"0px"}),0===e("#"+this.pp.getMediaId()+"_html").length&&(this.wasPersistent=!1,n.html("").append(e(this.isGingerbread?"<video/>":"<audio/>").attr({id:this.pp.getMediaId()+"_html",poster:$p.utils.imageDummy(),loop:!1,autoplay:!1,preload:"none","x-webkit-airplay":"allow"}).prop({controls:!1,volume:this.getVolume()}).css({width:"1px",height:"1px",position:"absolute",top:0,left:0}))),this.mediaElement=e("#"+this.pp.getMediaId()+"_html"),this.applySrc()},setPosterLive:function(){if(this.imageElement.parent){var n=this.imageElement.parent(),r=this;if(this.imageElement.attr("src")==this.getPoster("cover")||this.getPoster("poster"))return;this.imageElement.fadeOut("fast",function(){e(this).remove(),r.imageElement=r.applyImage(r.getPoster("cover")||r.getPoster("poster"),n)})}}},"VIDEO")}),jQuery(function(e){$p.newModel({modelId:"VIDEOHLS",androidVersion:4,iosVersion:3,iLove:[{ext:"m3u8",type:"application/mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u",type:"application/mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u8",type:"application/vnd.apple.mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u",type:"application/vnd.apple.mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u8",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]},{ext:"m3u",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpVideo","httpVideoLive"]}]},"VIDEO"),$p.newModel({modelId:"AUDIOHLS",androidVersion:4,iosVersion:3,iLove:[{ext:"m3u8",type:"application/mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u",type:"application/mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u8",type:"application/vnd.apple.mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u",type:"application/vnd.apple.mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u8",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u",type:"application/x-mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u8",type:"audio/mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]},{ext:"m3u",type:"audio/mpegURL",platform:["ios","android"],streamType:["http","httpAudio","httpAudioLive"]}]},"AUDIO")}),jQuery(function(e){$p.newModel({modelId:"VIDEOVLC",vlcVersion:"2.0.6.0",iLove:[],_eventMap:{MediaPlayerPaused:"pauseListener",MediaPlayerPlaying:"playingListener",MediaPlayerTimeChanged:"_timeListener",MediaPlayerEndReached:"endedListener",MediaPlayerBuffering:"waitingListener",MediaPlayerEncounteredError:"errorListener",MediaPlayerSeekableChanged:"seekableListener"},allowRandomSeek:!1,videoWidth:0,videoHeight:0,isPseudoStream:!1,setiLove:function(){var n=this;if(navigator.plugins&&navigator.plugins.length>0)for(var r=0;navigator.plugins.length>r;++r)if(navigator.plugins[r].name.indexOf("VLC")>-1){for(var i=0;navigator.plugins[r].length>i;i++){var s=navigator.plugins[r][i];null!=s.suffixes&&null!=s.type&&e.each(s.suffixes.split(","),function(e,t){n.iLove.push({ext:t,type:s.type.replace(/x-/,""),platform:["vlc"],streamType:["rtsp","http","pseudo","httpVideo","multipart"]})})}break}},applyMedia:function(n){n.html("").append(e("<embed/>").attr({id:this.pp.getMediaId()+"_vlc",type:"application/x-vlc-plugin",pluginspage:"http://www.videolan.org",width:"100%",height:"100%",events:!0,controls:!1,toolbar:!1,windowless:!0,allowfullscreen:!0,autoplay:!1}).css({position:"absolute",top:0,left:0})),this.mediaElement=e("#"+this.pp.getMediaId()+"_vlc"),this.applySrc()},applySrc:function(){var e=this,t=this.getSource();this.mediaElement.get(0).playlist.add(t[0].src,"item 1"),this.getState("PLAYING")?(this.setPlay(),e.isPseudoStream!==!0&&this.setSeek(this.media.position||0)):this.displayReady()},detachMedia:function(){try{this.mediaElement.get(0).playlist.stop(),this.mediaElement.html("")}catch(e){}},addListeners:function(){var n=this;e.each(this._eventMap,function(e,t){try{n.mediaElement.get(0).attachEvent?n.mediaElement.get(0).attachEvent(e,function(e){n[t](this,e)}):n.mediaElement.get(0).addEventListener?n.mediaElement.get(0).addEventListener(e,function(e){n[t](this,e)},!1):n.mediaElement.get(0)["on"+e]=function(e){n[t](this,e)}}catch(r){}})},removeListener:function(n,r){if(null!=this.mediaElement){var i=null!=r?".projekktor"+r+this.pp.getId():".projekktor"+this.pp.getId(),s=this;e.each(this._eventMap,function(e,t){e==n&&s.mediaElement.unbind(e+i)})}},_timeListener:function(e){this.timeListener({position:this.mediaElement.get(0).input.time/1e3,duration:this.mediaElement.get(0).input.length/1e3})},seekableListener:function(){this.allowRandomSeek=!0,this.media.loadProgress=100},errorListener:function(e,t){try{switch(event.target.error.code){case event.target.error.MEDIA_ERR_ABORTED:this.sendUpdate("error",1);break;case event.target.error.MEDIA_ERR_NETWORK:this.sendUpdate("error",2);break;case event.target.error.MEDIA_ERR_DECODE:this.sendUpdate("error",3);break;case event.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.sendUpdate("error",4);break;default:this.sendUpdate("error",5)}}catch(n){}},setPlay:function(){this.mediaElement.get(0).playlist.play()},setPause:function(){this.mediaElement.get(0).playlist.pause()},setVolume:function(e){this._volume=e,this.mediaElement.get(0).audio.volume=100*e,this.volumeListener(e)},setSeek:function(e){this.mediaElement.get(0).input.position=e/this.media.duration,this._setSeekState("seeked",e)},setFullscreen:function(){pos=this.mediaElement.get(0).input.position,this.mediaElement.get(0).playlist.stop(),this.setPlay(),this.mediaElement.get(0).input.position=pos,this.getState("PAUSED")&&this.setPause()},setResize:function(){this._scaleVideo(!1)}})}),jQuery(function(e){$p.newModel({modelId:"PLAYLIST",iLove:[{ext:"json",type:"text/json",platform:"browser"},{ext:"jsonp",type:"text/jsonp",platform:"browser"},{ext:"xml",type:"text/xml",platform:"browser"},{ext:"json",type:"application/json",platform:"browser"},{ext:"jsonp",type:"application/jsonp",platform:"browser"},{ext:"xml",type:"application/xml",platform:"browser"}],applyMedia:function(e){this.displayReady()},setPlay:function(){this.sendUpdate("playlist",this.media)}})}),jQuery(function(e){$p.newModel({browserVersion:"1",modelId:"IMAGE",iLove:[{ext:"jpg",type:"image/jpeg",platform:"browser",streamType:["http"]},{ext:"gif",type:"image/gif",platform:"browser",streamType:["http"]},{ext:"png",type:"image/png",platform:"browser",streamType:["http"]}],allowRandomSeek:!0,_position:0,_duration:0,applyMedia:function(e){this.mediaElement=this.applyImage(this.media.file[0].src,e.html("")),this._duration=this.pp.getConfig("duration")||1,this._position=-1,this.displayReady(),this._position=-0.5},setPlay:function(){var e=this;return this._setBufferState("full"),this.progressListener(100),this.playingListener(),0==this._duration?(e._setState("completed"),void 0):(function(){return e._position>=e._duration?(e._setState("completed"),void 0):(e.getState("PLAYING")&&(e.timeListener({duration:e._duration,position:e._position}),setTimeout(arguments.callee,200),e._position+=.2),void 0)}(),void 0)},detachMedia:function(){this.mediaElement.remove()},setPause:function(){this.pauseListener()},setSeek:function(e){this._duration>e&&(this._position=e,this.seekedListener())}}),$p.newModel({modelId:"HTML",iLove:[{ext:"html",type:"text/html",platform:"browser",streamType:["http"]}],applyMedia:function(n){var r=this;this.mediaElement=e(document.createElement("iframe")).attr({id:this.pp.getMediaId()+"_iframe",name:this.pp.getMediaId()+"_iframe",src:this.media.file[0].src,scrolling:"no",frameborder:"0",width:"100%",height:"100%"}).css({overflow:"hidden",border:"0px",width:"100%",height:"100%"}).appendTo(n.html("")),this.mediaElement.load(function(e){r.success()}),this.mediaElement.error(function(e){r.remove()}),this._duration=this.pp.getConfig("duration")},success:function(){this.displayReady()},remove:function(){this.mediaElement.remove()}},"IMAGE")}),jQuery(function(e){$p.newModel({modelId:"OSMFVIDEO",replace:"VIDEOFLASH",flashVersion:"10.2",flashVerifyMethod:"addEventListener",iLove:[{ext:"flv",type:"video/flv",platform:"flash",fixed:!0,streamType:["*"]},{ext:"mp4",type:"video/mp4",platform:"flash",streamType:["*"]},{ext:"f4v",type:"video/mp4",platform:"flash",streamType:["*"]},{ext:"mov",type:"video/quicktime",platform:"flash",streamType:["*"]},{ext:"m4v",type:"video/mp4",platform:"flash",fixed:!0,streamType:["*"]},{ext:"f4m",type:"application/f4m+xml",platform:"flash",fixed:!0,streamType:["*"]},{ext:"m3u8",type:"application/mpegURL",platform:"flash",fixed:!0,streamType:["*"]},{ext:"m3u8",type:"application/x-mpegURL",platform:"flash",fixed:!0,streamType:["*"]},{ext:"m3u8",type:"application/vnd.apple.mpegurl",platform:"flash",fixed:!0,streamType:["*"]},{ext:"manifest",type:"application/vnd.ms-ss",platform:"flash",fixed:!0,streamType:["*"]}],hasGUI:!1,allowRandomSeek:!1,isPseudoStream:!1,streamType:"http",availableQualities:{},_hardwareAcceleration:!0,_isStream:!1,_isDVR:!1,_isMuted:!1,_isStarted:!1,_qualitySwitching:!1,_isDynamicStream:!1,_volume:0,_eventMap:{mediaPlayerCapabilityChange:"OSMF_PlayerCapabilityChange",durationChange:"OSMF_durationChange",currentTimeChange:"OSMF_currentTimeChange",loadStateChange:"OSMF_loadStateChange",bufferingChange:"OSMF_bufferingChange",bytesLoadedChange:"OSMF_bytesLoadedChange",playStateChange:"OSMF_playerStateChange",seekingChange:"OSMF_seekingChange",canPlayChange:"OSMF_seekingChange",isRecordingChange:"OSMF_isRecordingChange",complete:"endedListener",volumeChange:"volumeListener",mediaError:"errorListener",MBRItemChange:"OSMF_universal",isDynamicStreamChange:"OSMF_updateDynamicStream",autoSwitchChange:"OSMF_updateDynamicStream",switchingChange:"OSMF_updateDynamicStream"},applyMedia:function(n){var r=this;window["projekktorOSMFReady"+this.pp.getId()]=function(){projekktor(r.pp.getId()).playerModel._OSMFListener(arguments)};var i={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+"_flash",src:this.pp.getConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",quality:"high",menu:!1,allowFullScreen:"true",wmode:$p.utils.ieVersion()?"transparent":"opaque",SeamlessTabbing:"false",bgcolor:"#000000",FlashVars:e.extend({enableStageVideo:this._hardwareAcceleration,disableHardwareAcceleration:!this._hardwareAcceleration,javascriptCallbackFunction:"window.projekktorOSMFReady"+this.pp.getId()},this.pp.getConfig("OSMFVars"))};this.createFlash(i,n)},flashReadyListener:function(){this.applySrc(),this.displayReady()},removeListeners:function(){},loadProgressUpdate:function(){},addListeners:function(){},applySrc:function(){var e=this,t=this.getSource();this.mediaElement.get(0).setMediaResourceURL(t[0].src),this.streamType=t[0].streamType||this.pp.getConfig("streamType")||"http",this.getState("PLAYING")&&(this.setPlay(),e.isPseudoStream!==!0&&this.media.position>0&&this.setSeek(this.media.position)),"pseudo"==this.streamType&&(this.isPseudoStream=!0,this.allowRandomSeek=!0,this.media.loadProgress=100),this.streamType.indexOf("live")>-1&&(this.allowRandomSeek=!0,this.media.loadProgress=100)},_OSMFListener:function(){var n=arguments[0][1],r=arguments[0][2],i=this;switch(this.mediaElement=e("#"+this.pp.getMediaId()+"_flash"),n){case"onJavaScriptBridgeCreated":null!==this.mediaElement&&this.getState("AWAKENING")&&(e.each(this._eventMap,function(e,t){i.mediaElement.get(0).addEventListener(e,"projekktor('"+i.pp.getId()+"').playerModel."+t)}),this.flashReadyListener());break;case"loadedmetadata":this.metaDataListener(r);break;case"progress":}},OSMF_universal:function(){},OSMF_isRecordingChange:function(){},OSMF_PlayerCapabilityChange:function(e){},OSMF_bytesLoadedChange:function(){var e=this.mediaElement.get(0),t=0;t=100*e.getBytesLoaded()/e.getBytesTotal(),this.media.loadProgress>t||(this.media.loadProgress=this.allowRandomSeek===!0?100:-1,this.media.loadProgress=100>this.media.loadProgress||void 0===this.media.loadProgress?t:100,this.sendUpdate("progress",this.media.loadProgress))},OSMF_durationChange:function(e){isNaN(e)||(this.timeListener({position:this.media.position,duration:e||0}),this.seekedListener())},OSMF_currentTimeChange:function(e){this._isDVR&&this.sendUpdate("isLive",e+20>=this.media.duration),this.timeListener({position:e,duration:this.media.duration||0})},OSMF_seekingChange:function(e){this.seekedListener()},OSMF_bufferingChange:function(e){e===!0?this.waitingListener():this.canplayListener()},OSMF_loadStateChange:function(e){switch(e){case"loading":this.waitListener();break;case"ready":this.getState("awakening")&&this.displayReady(),this.getState("starting")&&this.setPlay(),this.mediaElement.get(0).getStreamType().indexOf("dvr")>-1&&(this.allowRandomSeek=!0,this.media.loadProgress=100);break;case"loadError":}},OSMF_playerStateChange:function(e){var t=this;switch(this._isDVR||"dvr"!=this.mediaElement.get(0).getStreamType()||(this._isDVR=!0,this.sendUpdate("streamTypeChange","dvr")),e){case"playing":this.playingListener();break;case"paused":this.pauseListener(),this._isDVR&&function(){t.getState("PAUSED")&&t.media.position>=.5&&(t.timeListener({position:t.media.position-.5,duration:t.media.duration||0}),setTimeout(arguments.callee,500))}();break;case"stopped":this.getSeekState("SEEKING")||this.endedListener()}},OSMF_updateDynamicStream:function(){var n=this.mediaElement.get(0).getStreamItems(),r="",i=[];for(var s in n)n.hasOwnProperty(s)&&void 0!==n[s].bitrate&&(r=n[s].width+"x"+n[s].height,this.pp.getConfig("OSMFQualityMap")&&this.pp.getConfig("OSMFQualityMap")[r]&&(this.availableQualities[this.pp.getConfig("OSMFQualityMap")[r]]=s));$p.utils.log(n),e.each(this.availableQualities,function(e,t){i.push(e)}),i.push("auto"),this._isDynamicStream=!0,this.sendUpdate("availableQualitiesChange",i)},switchDynamicStreamIndex:function(e){-1==e?this.mediaElement.get(0).setAutoDynamicStreamSwitch(!0):(this.mediaElement.get(0).getAutoDynamicStreamSwitch()&&this.mediaElement.get(0).setAutoDynamicStreamSwitch(!1),this.mediaElement.get(0).switchDynamicStreamIndex(e))},errorListener:function(){switch(arguments[0]){case 15:this.sendUpdate("error",5);break;case 80:this.sendUpdate("error",80);break;default:}},detachMedia:function(){try{this.mediaElement.get(0).remove()}catch(e){}},volumeListener:function(e){this._volume=e},endedListener:function(e){null!==this.mediaElement&&(0>=this.media.maxpos||"STARTING"!=this.getState()&&this._qualitySwitching!==!0&&this._setState("completed"))},setSeek:function(e){return this.isPseudoStream?(this._setSeekState("seeking"),this.media.offset=e,this.applySrc(),void 0):(-1==e&&(e=this.getDuration()),this.mediaElement.get(0).seek(e),void 0)},setVolume:function(e){null===this.mediaElement?this.volumeListener(e):this.mediaElement.get(0).setVolume(e)},setPause:function(e){this.mediaElement.get(0).pause()},setPlay:function(e){this.mediaElement.get(0).play2()},setQuality:function(e){if(this._quality!=e){if(this._quality=e,this._isDynamicStream===!0)return this.switchDynamicStreamIndex("auto"==e?-1:this.availableQualities[e]),void 0;this._qualitySwitching=!0,this.applySrc(),this._qualitySwitching=!1,this.qualityChangeListener()}},getVolume:function(){return this._isMuted===!0?0:null===this.mediaElement?this.media.volume:this._volume},getSrc:function(){try{return this.mediaElement.get(0).getCurrentSrc()}catch(e){return null}},getQuality:function(){return this._quality},_scaleVideo:function(){}}),$p.newModel({modelId:"OSMFVIDEONA",iLove:[{ext:"flv",type:"video/flv",platform:"flashna",fixed:!0,streamType:["*"]},{ext:"mp4",type:"video/mp4",platform:"flashna",streamType:["*"]},{ext:"f4v",type:"video/mp4",platform:"flashna",streamType:["*"]},{ext:"mov",type:"video/quicktime",platform:"flashna",streamType:["*"]},{ext:"m4v",type:"video/mp4",platform:"flashna",fixed:!0,streamType:["*"]},{ext:"f4m",type:"application/f4m+xml",platform:"flashna",fixed:!0,streamType:["*"]}],_hardwareAcceleration:!1},"OSMFVIDEO"),$p.newModel({modelId:"OSMFAUDIO",replace:"AUDIOFLASH",hasGUI:!1,iLove:[{ext:"mp3",type:"audio/mp3",platform:"flash",streamType:["*"]},{ext:"m4a",type:"audio/mp4",platform:"flash",streamType:["*"]},{ext:"m4a",type:"audio/mpeg",platform:"flash",streamType:["*"]}],applyMedia:function(n){var r=this;$p.utils.blockSelection(n),this.imageElement=this.applyImage(this.getPoster("cover")||this.getPoster("poster"),n);var i=e("#"+this.pp.getMediaId()+"_flash_container");0===i.length&&(i=e(document.createElement("div")).css({width:"1px",height:"1px"}).attr("id",this.pp.getMediaId()+"_flash_container").prependTo(this.pp.getDC())),window["projekktorOSMFReady"+this.pp.getId()]=function(){projekktor(r.pp.getId()).playerModel._OSMFListener(arguments)};var s={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+"_flash",src:this.pp.getConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",quality:"height",menu:!1,allowFullScreen:"true",wmode:"opaque",seamlesstabbing:"false",bgcolor:"#ccc",FlashVars:e.extend({javascriptCallbackFunction:"window.projekktorOSMFReady"+this.pp.getId()},this.pp.getConfig("OSMFVars"))};this.createFlash(s,i,!1)}},"OSMFVIDEO")}),jQuery(function(e){$p.newModel({modelId:"YTVIDEO",iLove:[{ext:"youtube.com",type:"video/youtube",platform:"flash",fixed:"maybe"}],allowRandomSeek:!0,useIframeAPI:!0,flashVerifyMethod:"cueVideoById",_ffFix:!1,_updateTimer:null,init:function(n){var r=this;if(this.useIframeAPI=this.pp.getConfig("useYTIframeAPI")||this.pp.getIsMobileClient(),this.hasGUI=this.pp.getIsMobileClient(),!this.useIframeAPI)return this.requiresFlash=8,this.ready(),void 0;var i=this.pp.getId();window.ProjekktorYoutubePlayerAPIReady!==!0?(e.getScript("http://www.youtube.com/player_api"),function(){try{if(1==window.ProjekktorYoutubePlayerAPIReady)return r.ready(),void 0;setTimeout(arguments.callee,50)}catch(e){setTimeout(arguments.callee,50)}}()):this.ready(),window.onYouTubePlayerAPIReady=function(){window.ProjekktorYoutubePlayerAPIReady=!0}},applyMedia:function(n){this._setBufferState("empty");var r=this,i="YTAUDIO"==this.modelId?1:"100%",s="YTAUDIO"==this.modelId?1:"100%";if("YTAUDIO"==this.modelId&&(this.imageElement=this.applyImage(this.pp.getPoster(),n)),this.useIframeAPI){n.html("").append(e("<div/>").attr("id",this.pp.getId()+"_media_youtube").css({width:"100%",height:"100%",position:"absolute",top:0,left:0}));var o=e("<div/>").attr("id",this.pp.getId()+"_media_youtube_cc").css({width:"100%",height:"100%",backgroundColor:$p.utils.ieVersion()?"#000":"transparent",filter:"alpha(opacity = 0.1)",position:"absolute",top:0,left:0});n.append(o),this.mediaElement=new YT.Player(this.pp.getId()+"_media_youtube",{width:this.pp.getIsMobileClient()?this.pp.config._width:i,height:this.pp.getIsMobileClient()?this.pp.config._height:s,playerVars:{autoplay:0,disablekb:0,version:3,start:0,controls:this.pp.getIsMobileClient()?1:0,showinfo:0,enablejsapi:1,start:this.media.position||0,origin:window.location.href,wmode:"transparent",modestbranding:1},videoId:this.youtubeGetId(),events:{onReady:function(e){r.onReady(e)},onStateChange:function(e){r.stateChange(e)},onError:function(e){r.errorListener(e)}}})}else{var u={id:this.pp.getId()+"_media_youtube",name:this.pp.getId()+"_media_youtube",src:"http://www.youtube.com/apiplayer",width:this.pp.getIsMobileClient()?this.pp.config._width:i,height:this.pp.getIsMobileClient()?this.pp.config._height:s,bgcolor:"#000000",allowScriptAccess:"always",wmode:"transparent",FlashVars:{enablejsapi:1,autoplay:0,version:3,modestbranding:1,showinfo:0}};this.createFlash(u,n)}},flashReadyListener:function(){this._youtubeResizeFix(),this.addListeners(),this.mediaElement.cueVideoById(this.youtubeGetId(),this.media.position||0,this._playbackQuality)},_youtubeResizeFix:function(){this.applyCommand("volume",this.pp.getConfig("volume"))},addListeners:function(){this.mediaElement.addEventListener("onStateChange","projekktor('"+this.pp.getId()+"').playerModel.stateChange"),this.mediaElement.addEventListener("onError","projekktor('"+this.pp.getId()+"').playerModel.errorListener"),this.mediaElement.addEventListener("onPlaybackQualityChange","projekktor('"+this.pp.getId()+"').playerModel.qualityChangeListener")},setSeek:function(e){try{this.mediaElement.seekTo(e,!0),this.getState("PLAYING")||this.timeListener({position:this.mediaElement.getCurrentTime(),duration:this.mediaElement.getDuration()})}catch(t){}},setVolume:function(e){try{this.mediaElement.setVolume(100*e)}catch(t){}},setPause:function(e){try{this.mediaElement.pauseVideo()}catch(t){}},setPlay:function(e){try{this.mediaElement.playVideo()}catch(t){}},setQuality:function(e){try{this.mediaElement.setPlaybackQuality(e)}catch(t){}},getVolume:function(){try{return this.mediaElement.getVolume()}catch(e){}return 0},getPoster:function(){return this.media.config.poster||this.pp.config.poster||"http://img.youtube.com/vi/"+this.youtubeGetId()+"/0.jpg"},getPlaybackQuality:function(){try{return this.mediaElement.getPlaybackQuality()}catch(e){return!1}},getSrc:function(){return this.youtubeGetId()||null},errorListener:function(e){switch(void 0==e.data?e:e.data){case 100:this.setTestcard(500);break;case 101:case 150:this.setTestcard(501);break;case 2:this.setTestcard(502)}},stateChange:function(e){if(clearTimeout(this._updateTimer),null!==this.mediaElement&&!this.getState("COMPLETED"))switch(void 0==e.data?e:e.data){case-1:this.setPlay(),this.ffFix=!0;break;case 0:if(this.getState("AWAKENING"))break;this._setBufferState("full"),this.endedListener({});break;case 1:this._setBufferState("full"),(this.media.position||0)>0&&this._isFF()&&this.ffFix&&(this.ffFix=!1,this.setSeek(this.media.position)),this.playingListener({}),this.canplayListener({}),this.updateInfo();break;case 2:this.pauseListener({});break;case 3:this.waitingListener({});break;case 5:this.useIframeAPI!==!0&&this.onReady()}},onReady:function(){if(this.setVolume(this.pp.getVolume()),e("#"+this.pp.getId()+"_media").attr("ALLOWTRANSPARENCY",!0).attr({scrolling:"no",frameborder:0}).css({overflow:"hidden",display:"block",border:"0"}),this.media.title||this.pp.config.title||this.pp.getIsMobileClient())return this.displayReady(),void 0;var n=this;e.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.youtubeGetId()+"?v=2&alt=jsonc",async:!1,complete:function(r,i){try{data=r.responseText,"string"==typeof data&&(data=e.parseJSON(data)),data.data.title&&n.sendUpdate("config",{title:data.data.title+" ("+data.data.uploader+")"})}catch(s){}n.displayReady()}})},youtubeGetId:function(){return encodeURIComponent(this.media.file[0].src.replace(/^[^v]+v.(.{11}).*/,"$1"))},updateInfo:function(){var e=this;clearTimeout(this._updateTimer),function(){if(null==e.mediaElement)return clearTimeout(e._updateTimer),void 0;try{e.getState("PLAYING")&&(e.timeListener({position:e.mediaElement.getCurrentTime(),duration:e.mediaElement.getDuration()}),e.progressListener({loaded:e.mediaElement.getVideoBytesLoaded(),total:e.mediaElement.getVideoBytesTotal()}),e._updateTimer=setTimeout(arguments.callee,500))}catch(n){}}()}}),$p.newModel({modelId:"YTAUDIO",iLove:[{ext:"youtube.com",type:"audio/youtube",platform:"flash",fixed:"maybe"}]},"YTVIDEO")});var projekktorDisplay=function(){};jQuery(function(e){projekktorDisplay.prototype={version:"1.1.00",logo:null,logoIsFading:!1,display:null,displayClicks:0,buffIcn:null,buffIcnSprite:null,bufferDelayTimer:null,_controlsDims:null,config:{displayClick:{callback:"setPlayPause",value:null},displayPlayingClick:{callback:"setPlayPause",value:null},displayDblClick:{callback:null,value:null},staticControls:!1,bufferIconDelay:1e3,spriteUrl:"",spriteWidth:50,spriteHeight:50,spriteTiles:25,spriteOffset:1,spriteCountUp:!1},initialize:function(){this.display=this.applyToPlayer(e("<div/>")),this.startButton=this.applyToPlayer(e("<div/>").addClass("start"),"startbtn"),this.buffIcn=this.applyToPlayer(e("<div/>").addClass("buffering"),"buffericn"),this.imaContainer=this.applyToPlayer(e("<div/>").addClass("ima"),"ima"),this.setActive(),""!==this.config.spriteUrl&&(this.buffIcnSprite=e("<div/>").appendTo(this.buffIcn).css({width:this.config.spriteWidth,height:this.config.spriteHeight,marginLeft:(this.buffIcn.width()-this.config.spriteWidth)/2+"px",marginTop:(this.buffIcn.height()-this.config.spriteHeight)/2+"px",backgroundColor:"transparent",backgroundImage:"url("+this.config.spriteUrl+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 0"}).addClass("inactive")),this.pp.getMediaContainer(),this.pluginReady=!0},displayReadyHandler:function(){var e=this;this.hideStartButton(),this.startButton.unbind().click(function(){e.pp.setPlay()})},syncingHandler:function(){this.showBufferIcon(),this.pp.getState("IDLE")&&this.hideStartButton()},readyHandler:function(){this.hideBufferIcon(),this.pp.getState("IDLE")&&this.showStartButton()},bufferHandler:function(e){(this.pp.getState("PLAYING")||this.pp.getState("AWAKENING"))&&("EMPTY"==e?this.showBufferIcon():this.hideBufferIcon())},stateHandler:function(e){switch(e){case"IDLE":clearTimeout(this._cursorTimer),this.display.css("cursor","pointer");break;case"PLAYING":this.hideBufferIcon(),this.hideStartButton();break;case"IDLE":this.showStartButton();break;case"STARTING":case"AWAKENING":this.showBufferIcon(),this.hideStartButton();break;case"COMPLETED":case"STOPPED":this.hideBufferIcon();break;default:this.hideStartButton()}},errorHandler:function(){this.hideBufferIcon(),this.hideStartButton()},startHandler:function(){this.mousemoveHandler()},scheduleLoadingHandler:function(){this.hideStartButton(),this.showBufferIcon()},scheduledHandler:function(){this.getConfig("autoplay")||this.showStartButton(),this.hideBufferIcon()},plugineventHandler:function(e){if("controlbar"==e.PLUGIN&&"show"==e.EVENT&&this.getConfig("staticControls")){var t=100*e.height/this.pp.getDC().height();this.display.height(100-t+"%").data("sc",!0)}},qualityChangeHandler:function(){this.hideBufferIcon()},mousemoveHandler:function(e){var t=this.display;return this.pp.getState("IDLE")?(t.css("cursor","pointer"),void 0):(t.css("cursor","auto"),clearTimeout(this._cursorTimer),-1=="AWAKENING|ERROR|PAUSED".indexOf(this.pp.getState())&&(this._cursorTimer=setTimeout(function(){t.css("cursor","none")},3e3)),void 0)},mousedownHandler:function(n){var r=this;if(-1!=(e(n.target).attr("id")||"").indexOf("_media")&&(clearTimeout(this._cursorTimer),this.display.css("cursor","auto"),1==n.which)){switch(this.pp.getState()){case"ERROR":return this.pp.setConfig({disallowSkip:!1}),this.pp.setActiveItem("next"),void 0;case"IDLE":return this.pp.setPlay(),void 0}this.pp.getHasGUI()!==!0&&(this.displayClicks++,this.pp._promote("displayClick"),this.displayClicks>0&&setTimeout(function(){1==r.displayClicks?"PLAYING"==r.pp.getState()?r.clickHandler("displayPlaying"):r.clickHandler("display"):2==r.displayClicks&&r.clickHandler("displayDbl"),r.displayClicks=0},250))}},showStartButton:function(){this.startButton.addClass("active").removeClass("inactive")},hideStartButton:function(){this.startButton.addClass("inactive").removeClass("active")},hideBufferIcon:function(){clearTimeout(this.bufferDelayTimer),this.buffIcn.addClass("inactive").removeClass("active")},showBufferIcon:function(e){var t=this;if(clearTimeout(this.bufferDelayTimer),!this.pp.getHasGUI()){if("YTAUDIO"!==this.pp.getModel()&&"YTVIDEO"!==this.pp.getModel()||this.pp.getState("IDLE")||(e=!0),e!==!0&&this.getConfig("bufferIconDelay")>0)return this.bufferDelayTimer=setTimeout(function(){t.showBufferIcon(!0)},this.getConfig("bufferIconDelay")),void 0;if(!this.buffIcn.hasClass("active")&&(this.buffIcn.addClass("active").removeClass("inactive"),null!==t.buffIcnSprite)){var n=t.config.spriteCountUp===!0?0:(t.config.spriteHeight+t.config.spriteOffset)*(t.config.spriteTiles-1),r=n;t.buffIcnSprite.addClass("active").removeClass("inactive"),function(){t.buffIcn.is(":visible")&&(t.buffIcnSprite.css("backgroundPosition","0px -"+r+"px"),t.config.spriteCountUp===!0?r+=t.config.spriteHeight+t.config.spriteOffset:r-=t.config.spriteHeight+t.config.spriteOffset,(r>(n+t.config.spriteHeight)*t.config.spriteTiles||t.config.spriteOffset>r)&&(r=n),setTimeout(arguments.callee,60))}()}}}}});var projekktorControlbar=function(){};jQuery(function(e){projekktorControlbar.prototype={version:"1.1.01",_cTimer:null,_isDVR:!1,_noHide:!1,_vSliderAct:!1,cb:null,controlElements:{},controlElementsConfig:{sec_dur:null,min_dur:null,sec_abs_dur:null,min_abs_dur:null,hr_dur:null,sec_elp:null,min_elp:null,sec_abs_elp:null,min_abs_elp:null,hr_elp:null,sec_rem:null,min_rem:null,sec_abs_rem:null,min_abs_rem:null,hr_rem:null,sec_tip:null,min_tip:null,sec_abs_tip:null,min_abs_tip:null,hr_tip:null,cb:null,playhead:{on:null,call:null},loaded:null,golive:[{on:["touchstart","click"],call:"goliveClk"},{on:["touchend"],call:"touchEnd"}],scrubber:null,scrubbertip:null,scrubberknob:null,scrubberdrag:[{on:["mouseenter"],call:"scrubberShowTooltip"},{on:["mouseout"],call:"scrubberHideTooltip"},{on:["mousemove"],call:"scrubberdragTooltip"},{on:["mousedown"],call:"scrubberdragStartDragListener"}],play:[{on:["touchstart","click"],call:"playClk"},{on:["touchend"],call:"touchEnd"}],pause:[{on:["touchstart","click"],call:"pauseClk"},{on:["touchend"],call:"touchEnd"}],stop:[{on:["touchstart","click"],call:"stopClk"},{on:["touchend"],call:"touchEnd"}],prev:[{on:["touchstart","click"],call:"prevClk"},{on:["touchend"],call:"touchEnd"}],next:[{on:["touchstart","click"],call:"nextClk"},{on:["touchend"],call:"touchEnd"}],rewind:[{on:["touchstart","click"],call:"rewindClk"},{on:["touchend"],call:"touchEnd"}],forward:[{on:["touchstart","click"],call:"forwardClk"},{on:["touchend"],call:"touchEnd"}],fsexit:[{on:["touchstart","click"],call:"exitFullscreenClk"},{on:["touchend"],call:"touchEnd"}],fsenter:[{on:["touchstart","click"],call:"enterFullscreenClk"},{on:["touchend"],call:"touchEnd"}],loquality:[{on:["touchstart","click"],call:"setQualityClk"},{on:["touchend"],call:"touchEnd"}],hiquality:[{on:["touchstart","click"],call:"setQualityClk"},{on:["touchend"],call:"touchEnd"}],vslider:[{on:["touchstart","click"],call:"vsliderClk"},{on:["touchend"],call:"touchEnd"}],vmarker:[{on:["touchstart","click"],call:"vsliderClk"},{on:["touchend"],call:"touchEnd"}],vknob:{on:["mousedown"],call:"vknobStartDragListener"},volumePanel:[{on:["mousemove"],call:"volumeBtnHover"},{on:["mouseout"],call:"volumeBtnOut"}],volume:null,mute:[{on:["touchstart","click"],call:"muteClk"},{on:["mouseout"],call:"volumeBtnOut"},{on:["mousemove"],call:"volumeBtnHover"},{on:["touchend"],call:"touchEnd"}],unmute:[{on:["touchstart","click"],call:"unmuteClk"},{on:["mouseout"],call:"volumeBtnOut"},{on:["mousemove"],call:"volumeBtnHover"},{on:["touchend"],call:"touchEnd"}],vmax:[{on:["touchstart","click"],call:"vmaxClk"},{on:["mouseout"],call:"volumeBtnOut"},{on:["mousemove"],call:"volumeBtnHover"},{on:["touchend"],call:"touchEnd"}],open:[{on:["touchstart","click"],call:"openCloseClk"},{on:["touchend"],call:"touchEnd"}],close:[{on:["touchstart","click"],call:"openCloseClk"},{on:["touchend"],call:"touchEnd"}],loop:[{on:["touchstart","click"],call:"loopClk"},{on:["touchend"],call:"touchEnd"}],draghandle:{on:["mousedown"],call:"handleStartDragListener"},controls:null,title:null},config:{toggleMute:!1,showCuePoints:!1,fadeDelay:2500,showOnStart:!1,showOnIdle:!1,controlsTemplate:'<ul class="left"><li><div %{play}></div><div %{pause}></div></li></ul><ul class="right"><li><div %{fsexit}></div><div %{fsenter}></div></li><li><div %{loquality}></div><div %{hiquality}></div></li><li><div %{tracksbtn}></div></li><li><div %{vmax}></div></li><li><div %{vslider}><div %{vmarker}></div><div %{vknob}></div></div></li><li><div %{mute}></div></li><li><div %{timeleft}>%{hr_elp}:%{min_elp}:%{sec_elp} | %{hr_dur}:%{min_dur}:%{sec_dur}</div></li><li><div %{next}></div></li><li><div %{prev}></div></li></ul><ul class="bottom"><li><div %{scrubber}><div %{loaded}></div><div %{playhead}></div><div %{scrubberknob}></div><div %{scrubberdrag}></div></div></li></ul><div %{scrubbertip}>%{hr_tip}:%{min_tip}:%{sec_tip}</div>'},initialize:function(){var n=this,r=this.playerDom.html(),i=!0,s=this.pp.getNS();for(var o in this.controlElementsConfig)if(r.match(RegExp(s+o,"gi"))){i=!1;break}i?(this.cb=this.applyToPlayer(e("<div/>").addClass("controls")),this.applyTemplate(this.cb,this.getConfig("controlsTemplate"))):this.cb=this.playerDom.find("."+s+"controls");for(var o in this.controlElementsConfig)this.controlElements[o]=e(this.playerDom).find("."+s+o),$p.utils.blockSelection(e(this.controlElements[o]));this.addGuiListeners(),this.hidecb(!0),this.pluginReady=!0},applyTemplate:function(n,r){var i=this,s=this.pp.getNS();if(r){var o=r.match(/\%{[a-zA-Z_]*\}/gi);null!=o&&e.each(o,function(e,t){var n=t.replace(/\%{|}/gi,"");r=t.match(/\_/gi)?r.replace(t,'<span class="'+s+n+'"></span>'):r.replace(t,'class="'+s+n+'"')}),n.html(r)}},updateDisplay:function(){var e=this,t=this.pp.getState();if(!this.pp.getHasGUI()){if(0==this.getConfig("controls"))return this.hidecb(!0),void 0;2>this.pp.getItemCount()||this.getConfig("disallowSkip")?(this._active("prev",!1),this._active("next",!1)):(this._active("prev",!0),this._active("next",!0)),1>this.pp.getItemIdx()&&this._active("prev",!1),this.pp.getItemIdx()>=this.pp.getItemCount()-1&&this._active("next",!1),this.getConfig("disablePause")?(this._active("play",!1),this._active("pause",!1)):("PLAYING"===t&&this.drawPauseButton(),"PAUSED"===t&&this.drawPlayButton(),"IDLE"===t&&this.drawPlayButton()),this._active("stop","IDLE"!==t),this._active("forward","IDLE"!==t),this._active("rewind","IDLE"!==t),this.pp.getInFullscreen()===!0?this.drawExitFullscreenButton():this.drawEnterFullscreenButton(),this.getConfig("enableFullscreen")||(this._active("fsexit",!1),this._active("fsenter",!1)),this._active("loop",!0),this.controlElements.loop.addClass(this.pp.getConfig("loop")?"on":"off").removeClass(this.pp.getConfig("loop")?"off":"on"),this.displayQualityToggle(),this.displayTime(),this.displayVolume(this._getVolume())}},addGuiListeners:function(){var n=this;e.each(this.controlElementsConfig,function(r,i){if(null==i)return!0;i instanceof Array||(i=[i]);for(var s=0;i.length>s;s++)null!=i[s].on&&e.each(i[s].on,function(e,t){var o="on"+t in window.document,u=i[s].call;if(!o){var a=document.createElement("div");a.setAttribute("on"+t,"return;"),o="function"==typeof a["on"+t]}o&&n.controlElements[r].bind(t,function(e){n.clickCatcher(e,u,n.controlElements[r])})});return!0}),this.cb.mousemove(function(e){n.controlsFocus(e)}),this.cb.mouseout(function(e){n.controlsBlur(e)})},clickCatcher:function(e,t,n){var r=this;return e.stopPropagation(),e.preventDefault(),this[t](e,n),!1},touchEnd:function(){var e=this;this._cTimer=setTimeout(function(){e.hidecb()},this.getConfig("fadeDelay")),this._noHide=!1},drawTitle:function(){this.controlElements.title.html(this.getConfig("title",""))},hidecb:function(e){return clearTimeout(this._cTimer),null!=this.cb?0==this.getConfig("controls")?(this.cb.removeClass("active").addClass("inactive"),void 0):(this.getConfig("showOnIdle")&&this.pp.getState("IDLE")||(e&&(this._noHide=!1),this._noHide||this.cb.hasClass("inactive")||(this.cb.removeClass("active").addClass("inactive"),this.sendEvent("hide",this.cb))),void 0):void 0},showcb:function(e){var t=this;if(clearTimeout(this._cTimer),this.pp.getHasGUI()||0==this.getConfig("controls"))return this.cb.removeClass("active").addClass("inactive"),void 0;if(null!=this.cb&&!("IDLE|AWAKENING|ERROR".indexOf(this.pp.getState())>-1&&1!=e)){if(this.cb.hasClass("active")&&e!==!1)return this._cTimer=setTimeout(function(){t.hidecb()},this.getConfig("fadeDelay")),void 0;this.cb.removeClass("inactive").addClass("active"),this.sendEvent("show",this.cb),this._cTimer=setTimeout(function(){t.hidecb()},this.getConfig("fadeDelay"))}},displayTime:function(n,r,i){if(!this.pp.getHasGUI()){var s=Math.round(10*(n||this.pp.getLoadPlaybackProgress()||0))/10,o=r||this.pp.getDuration()||0,u=i||this.pp.getPosition()||0,a=e.extend({},this._clockDigits(o,"dur"),this._clockDigits(u,"elp"),this._clockDigits(o-u,"rem"));if(this.controlElements.playhead.data("pct")!=s){this.controlElements.playhead.data("pct",s).css({width:s+"%"}),this.controlElements.scrubberknob.css({left:s+"%"});for(var f in this.controlElements){if("cb"==f)break;a[f]&&e.each(this.controlElements[f],function(){e(this).html(a[f])})}}}},displayProgress:function(){var e=Math.round(10*this.pp.getLoadProgress())/10;this.controlElements.loaded.data("pct")!=e&&this.controlElements.loaded.data("pct",e).css("width",e+"%")},displayVolume:function(n){var r=this;if(1!=this._vSliderAct&&null!=n){var i=this.cb.hasClass("active"),r=this,s=this.getConfig("fixedVolume"),o=this.controlElements.mute.hasClass("toggle")||this.controlElements.unmute.hasClass("toggle")||this.getConfig("toggleMute");if(this._active("mute",!s),this._active("unmute",!s),this._active("vmax",!s),this._active("vknob",!s),this._active("vmarker",!s),this._active("vslider",!s),!s){this.controlElements.vslider.width()>this.controlElements.vslider.height()?(this.controlElements.vmarker.css("width",100*n+"%"),this.controlElements.vknob.css("left",100*n+"%")):(this.controlElements.vmarker.css("height",100*n+"%"),this.controlElements.vknob.css("top",100-100*n+"%"));var u=this.controlElements.volume.find("li"),a=u.length-Math.ceil(100*n/u.length);for(var f=0;u.length>=f;f++)f>=a?e(u[f]).addClass("active"):e(u[f]).removeClass("active");if(o)switch(parseFloat(n)){case 0:this._active("mute",!1),this._active("unmute",!0),this._active("vmax",!0);break;default:this._active("mute",!0),this._active("unmute",!1),this._active("vmax",!1)}i&&this.cb.fadeTo(1,.99).fadeTo(1,1,function(){r.cb.removeAttr("style")})}}},displayCuePoints:function(n){var r=this,i=this.pp.getNS();this.getConfig("showCuePoints")&&(r.controlElements.scrubber.remove("."+i+"cuepoint"),e.each(this.pp.getCuePoints()||[],function(){var o=Math.max(100/n,Math.round(n/100),1),u=100*this.on/n-100*(o/2)/n,a=this,f=r.pp,l=e(document.createElement("div")).addClass(i+"cuepoint").addClass("inactive").css("left",u+"%").css("width",o+"%").data("on",this.on);""!=this.title&&l.attr("title",this.title),this.addListener("unlock",function(){e(l).removeClass("inactive").addClass("active"),l.click(function(){r.pp.setPlayhead(l.data("on"))})}),r.controlElements.scrubber.append(l)}))},drawPauseButton:function(e){this._active("pause",!0),this._active("play",!1)},drawPlayButton:function(e){this._active("pause",!1),this._active("play",!0)},drawEnterFullscreenButton:function(e){this._active("fsexit",!1),this._active("fsenter",!0)},drawExitFullscreenButton:function(e){this._active("fsexit",!0),this._active("fsenter",!1)},displayQualityToggle:function(n){var r=this.getConfig("playbackQualities"),i=this.pp.getPlaybackQualities(),s=this.pp.getNS();if(best=[],2>i.length||2>r.length)return this.controlElements.loquality.removeClass().addClass("inactive").addClass(s+"loquality").data("qual",""),this.controlElements.hiquality.removeClass().addClass("inactive").addClass(s+"hiquality").data("qual",""),void 0;r.sort(function(e,t){return e.minHeight-t.minHeight});for(var o=r.length;o--;o>0)if(e.inArray(r[o].key,i)>-1&&best.push(r[o].key),best.length>1)break;this.cb.addClass("qualities"),best[0]==this.pp.getPlaybackQuality()?(this._active("loquality",!0).addClass("qual"+best[1]).data("qual",best[1]),this._active("hiquality",!1).addClass("qual"+best[0]).data("qual",best[0])):(this._active("loquality",!1).addClass("qual"+best[1]).data("qual",best[1]),this._active("hiquality",!0).addClass("qual"+best[0]).data("qual",best[0]))},itemHandler:function(n){e(this.cb).find("."+this.pp.getNS()+"cuepoint").remove(),this.pp.setVolume(this._getVolume()),this.updateDisplay(),this.hidecb(!0),this.drawTitle(),this.displayQualityToggle(),this.pluginReady=!0},startHandler:function(){this.pp.setVolume(this._getVolume()),1==this.getConfig("showOnStart")?this.showcb(!0):this.hidecb(!0)},readyHandler:function(e){clearTimeout(this._cTimer),this.getConfig("showOnIdle")&&(this.showcb(!0),this.cb.removeClass("inactive").addClass("active").show()),this.pluginReady=!0},stateHandler:function(e){return this.updateDisplay(),"STOPPED|AWAKENING|IDLE|DONE".indexOf(e)>-1&&(this.displayTime(0,0,0),this.displayProgress(0),this.pp.getIsMobileClient()&&this.hidecb(!0)),"STOPPED|DONE|IDLE".indexOf(e)>-1?(this.hidecb(!0),void 0):("ERROR".indexOf(e)>-1&&(this._noHide=!1,this.hidecb(!0)),this.displayProgress(),void 0)},scheduleModifiedHandler:function(){"IDLE"!==this.pp.getState()&&(this.updateDisplay(),this.displayTime(),this.displayProgress())},volumeHandler:function(e){try{e>0&&this.cookie("muted",!1),this.cookie("muted")||this.cookie("volume",e)}catch(t){console.log(t)}this.displayVolume(this._getVolume())},progressHandler:function(e){this.displayProgress()},timeHandler:function(e){this.displayTime(),this.displayProgress()},qualityChangeHandler:function(e){this.displayQualityToggle(e)},streamTypeChangeHandler:function(e){"dvr"==e&&(this._isDVR=!0,this.setActive(this.controlElements.golive,!0))},isLiveHandler:function(e){e?this.controlElements.golive.addClass("on").removeClass("off"):this.controlElements.golive.addClass("off").removeClass("on")},fullscreenHandler:function(e){var t=this,n=this.pp.getNS();clearTimeout(this._cTimer),this._noHide=!1,this._vSliderAct=!1,this.getConfig("controls")&&this.getConfig("enableFullscreen")&&(e?(this.cb.addClass("fullscreen"),this.drawExitFullscreenButton()):(this.cb.removeClass("fullscreen"),this.drawEnterFullscreenButton()),"IDLE"!=this.pp.getState()||this.getConfig("showOnIdle")||this.hidecb(!0))},durationChangeHandler:function(e){this.displayCuePoints(e)},errorHandler:function(e){this.hidecb(!0)},leftclickHandler:function(){this.mouseleaveHandler()},focusHandler:function(e){this.showcb()},mouseenterHandler:function(e){this.showcb()},mousemoveHandler:function(e){this.pp.getState("STARTING")||this.showcb()},mouseleaveHandler:function(){},mousedownHandler:function(e){this.showcb()},controlsFocus:function(e){this._noHide=!0},controlsBlur:function(e){this._noHide=!1},setQualityClk:function(n){this.pp.setPlaybackQuality(e(n.currentTarget).data("qual"))},goliveClk:function(e){this.pp.setSeek(-1)},playClk:function(e){this.pp.setPlay()},pauseClk:function(e){this.pp.setPause()},stopClk:function(e){this.pp.setStop()},startClk:function(e){this.pp.setPlay()},controlsClk:function(e){},prevClk:function(e){this.pp.setActiveItem("previous")},nextClk:function(e){this.pp.setActiveItem("next")},forwardClk:function(e){this.pp.setPlayhead("+10")},rewindClk:function(e){this.pp.setPlayhead("-10")},muteClk:function(e){this.cookie("muted",!0),this.pp.setVolume(0)},unmuteClk:function(e){this.cookie("muted",!1),this.pp.setVolume(this._getVolume())},vmaxClk:function(e){this.cookie("muted",!1),this.pp.setVolume(1)},enterFullscreenClk:function(e){this.pp.setFullscreen(!0)},exitFullscreenClk:function(e){this.pp.setFullscreen(!1)},loopClk:function(n){this.pp.setLoop(e(n.currentTarget).hasClass("inactive")||!1),this.updateDisplay()},vmarkerClk:function(e){vsliderClk(e)},openCloseClk:function(n){var r=this;e(e(n.currentTarget).attr("class").split(/\s+/)).each(function(e,t){-1!=t.indexOf("toggle")&&(r.playerDom.find("."+t.substring(6)).slideToggle("slow",function(){r.pp.setSize()}),r.controlElements.open.toggle(),r.controlElements.close.toggle())})},volumeBtnHover:function(e){clearTimeout(this._outDelay),this.setActive(this.controlElements.volumePanel,!0)},volumeBtnOut:function(e,t){var n=this;e.currentTarget==t.get(0)&&e.relatedTarget!=t.get(0)&&(this._outDelay=setTimeout(function(){n.setActive(n.controlElements.volumePanel,!1)},100))},vsliderClk:function(n){if(1!=this._vSliderAct){var r=e(this.controlElements.vslider),i=r.width()>r.height()?"hor":"vert",s="hor"==i?r.width():r.height(),o=n.originalEvent.touches?n.originalEvent.touches[0].pageX:n.pageX,u=n.originalEvent.touches?n.originalEvent.touches[0].pageY:n.pageY,a="hor"==i?o-r.offset().left:u-r.offset().top,f=0;f=0>a||isNaN(a)||void 0==a?0:"hor"==i?a/s:1-a/s,this.pp.setVolume(f)}},scrubberShowTooltip:function(e){0!=this.pp.getDuration()&&(clearTimeout(this._cTimer),this.setActive(this.controlElements.scrubbertip,!0))},scrubberHideTooltip:function(e){this.setActive(this.controlElements.scrubbertip,!1)},scrubberdragTooltip:function(n){if(0!=this.pp.getDuration()){this.setActive(this.controlElements.scrubbertip,!0);var r=e(this.controlElements.scrubberdrag[0]),i=e(this.controlElements.loaded[0]),s=e(this.controlElements.scrubbertip),o=n.originalEvent.touches?n.originalEvent.touches[0].pageX:n.pageX,u=n.originalEvent.touches?n.originalEvent.touches[0].pageY:n.pageY,a=o-r.offset().left-s.outerWidth()/2,f=this.pp.getDuration()/100*(100*(o-r.offset().left)/r.width()),l=this._clockDigits(f,"tip");if(this._isDVR){f=this.pp.getDuration()-f;var c=new Date(1e3*((new Date).getTime()/1e3-f)),c=c.getSeconds()+60*c.getMinutes()+3600*c.getHours();l=this._clockDigits(c,"tip")}for(var h in this.controlElements){if("cb"==h)break;l[h]&&e.each(this.controlElements[h],function(){e(this).html(l[h])})}a=0>a?0:a,a=a>r.width()-s.outerWidth()?r.width()-s.outerWidth():a,s.css({left:a+"px"})}},scrubberdragStartDragListener:function(n){if(1!=this.getConfig("disallowSkip")){this._sSliderAct=!0;var r=this,i=e(this.controlElements.scrubberdrag[0]),s=e(this.controlElements.loaded[0]),o=0,u=Math.abs(parseInt(i.offset().left)-n.clientX),a=function(e){var t=Math.abs(i.offset().left-e.clientX);t=t>i.width()?i.width():t,t=t>s.width()?s.width():t,t=0>t?0:t,t=Math.abs(t/i.width())*r.pp.getDuration(),t>0&&t!=o&&(o=t,r.pp.setPlayhead(o))},f=function(e){return e.stopPropagation(),e.preventDefault(),r.playerDom.unbind("mouseup.slider"),i.unbind("mousemove",l),i.unbind("mouseup",f),r._sSliderAct=!1,!1},l=function(e){return clearTimeout(r._cTimer),e.stopPropagation(),e.preventDefault(),a(e),!1};this.playerDom.bind("mouseup.slider",f),i.mouseup(f),i.mousemove(l),a(n)}},vknobStartDragListener:function(n,r){this._vSliderAct=!0;var i=this,s=this.pp.getInFullscreen()===!0&&this.controlElements.vslider.length>1?1:0,o=e(r[s]),u=e(this.controlElements.vslider[s]),a=Math.abs(parseFloat(o.position().left)-n.clientX),f=Math.abs(parseFloat(o.position().top)-n.clientY),l=0,c=function(e){return i.playerDom.unbind("mouseup",c),u.unbind("mousemove",h),u.unbind("mouseup",c),o.unbind("mousemove",h),o.unbind("mouseup",c),i._vSliderAct=!1,!1},h=function(n){clearTimeout(i._cTimer);var r=n.clientX-a,r=r>u.width()-o.width()/2?u.width()-o.width()/2:r,r=0>r?0:r,c=n.clientY-f,c=c>u.height()-o.height()/2?u.height()-o.height()/2:c,c=0>c?0:c;i.controlElements.vslider.width()>i.controlElements.vslider.height()?(o.css("left",r+"px"),l=Math.abs(r/(u.width()-o.width()/2)),e(i.controlElements.vmarker[s]).css("width",100*l+"%")):(o.css("top",c+"px"),l=1-Math.abs(c/(u.height()-o.height()/2)),e(i.controlElements.vmarker[s]).css("height",100*l+"%"))};this.playerDom.mouseup(c),u.mousemove(h),u.mouseup(c),o.mousemove(h),o.mouseup(c)},handleStartDragListener:function(e,t){var n=this,r=Math.abs(parseInt(this.cb.position().left)-e.clientX),i=Math.abs(parseInt(this.cb.position().top)-e.clientY),s=function(e){return e.stopPropagation(),e.preventDefault(),n.playerDom.unbind("mouseup",s),n.playerDom.unbind("mouseout",s),n.playerDom.unbind("mousemove",o),!1},o=function(e){e.stopPropagation(),e.preventDefault(),clearTimeout(n._cTimer);var t=e.clientX-r;t=t>n.playerDom.width()-n.cb.width()?n.playerDom.width()-n.cb.width():t,t=0>t?0:t,n.cb.css("left",t+"px");var s=e.clientY-i;return s=s>n.playerDom.height()-n.cb.height()?n.playerDom.height()-n.cb.height():s,s=0>s?0:s,n.cb.css("top",s+"px"),!1};this.playerDom.mousemove(o),this.playerDom.mouseup(s)},_getVolume:function(){var e=parseFloat(this.cookie("volume")||this.getConfig("volume")||.5),t=this.cookie("muted")||!1;return this.getConfig("fixedVolume")||null==e?this.getConfig("volume"):t?0:e},_active:function(e,t){var n=this.controlElements[e];return 1==t?n.addClass("active").removeClass("inactive"):n.addClass("inactive").removeClass("active"),n},_clockDigits:function(e,t){(0>e||isNaN(e)||void 0==e)&&(e=0);var n=Math.floor(e/3600),r=e%3600,i=Math.floor(r/60),s=60*n+i,o=r%60,u=Math.floor(o),a=e,f={};return f["min_"+t]=10>i?"0"+i:i,f["min_abs_"+t]=10>s?"0"+s:s,f["sec_"+t]=10>u?"0"+u:u,f["sec_abs_"+t]=10>a?"0"+a:a,f["hr_"+t]=10>n?"0"+n:n,f}}});var projekktorContextmenu=function(){};jQuery(function(e){projekktorContextmenu.prototype={version:"1.1.00",reqVer:"1.2.13",_dest:null,_items:{},initialize:function(){var n=this,r=this.pp.getIframeWindow()||e(window);this._dest=$p.utils.blockSelection(this.applyToPlayer(e("<ul/>"))),this._items.player={getContextTitle:function(){return n.getConfig("playerName")+" V"+n.pp.getPlayerVer()},open:function(){null!=n.getConfig("playerHome")&&(r.get(0).location.href=n.getConfig("playerHome"),n.pp.setPause())}},this.pp.getConfig("helpHome")&&(this._items.help={getContextTitle:function(){return n.pp.getConfig("messages")[100]},open:function(){n.popup(n.pp.getConfig("helpHome"),400,600)}}),this.pluginReady=!0},mousedownHandler:function(n){switch(n.which){case 3:var r=this.pp.getDC().offset(),i=n.pageY-r.top,s=n.pageX-r.left;s+this._dest.width()>this.pp.getDC().width()&&(s=this.pp.getDC().width()-this._dest.width()-2),i+this._dest.height()>this.pp.getDC().height()&&(i=this.pp.getDC().height()-this._dest.height()-2),this.setActive(),this._dest.css({top:i+"px",left:s+"px"});break;case 1:try{this._items[e(n.target).data("plugin")].open()}catch(o){};default:this.setInactive()}},mouseleaveHandler:function(){this.setInactive()},eventHandler:function(e,t){e.indexOf("Contextmenu")>-1&&null==this._items[t.name]&&(this._items[t.name]=t)},displayReadyHandler:function(){var n=this,r=null;this.setInactive(),this._dest.html("");for(var i in this._items){r=e("<span/>").data("plugin",i).html(this._items[i].getContextTitle()||i);try{this._items[i].setContextEntry(r)}catch(s){}e("<li/>").append(r).data("plugin",i).appendTo(this._dest)}},popup:function(e,t,n){centeredY=window.screenY+(window.outerHeight/2-n/2),centeredX=window.screenX+(window.outerWidth/2-t/2),window.open(e,"projekktor","height="+n+",width="+t+",toolbar=0,scrollbars=0,status=0,resizable=1,location=0,menuBar=0,left="+centeredX+",top="+centeredY).focus()}}}),define("projekktor",function(){}),define("gallerySlider",[],function(){var e=function(e){"use strict";function t(){if(!s)return!1;s=!1;var e=$(a).length-1,t=$(a).eq(e).width()+c;$(u).css("left",-t+"px");var n=$(u).children().eq(e).detach();return $(u).prepend(n),$(u).animate({left:"0px"},300,function(){s=!0}),!1}function n(){if(!s)return!1;s=!1;var e=$(a).width()+c;return $(u).animate({left:-e+"px"},300,function(){$(u).css("left","0px");var e=$(u).children().eq(0).detach();$(u).append(e),s=!0}),!1}var r=this,i,s=!0,o={tc:"#tc_container",img:"#tc_container img",prev:"#tc_l",next:"#tc_r",cellmargin:20},u=void 0!==e.tc?e.tc:o.tc,a=void 0!==e.img?e.img:o.img,f=void 0!==e.prev?e.prev:o.prev,l=void 0!==e.next?e.next:o.next,c=void 0!==e.cellmargin?e.cellmargin:o.cellmargin;this.init=function(e){var r=0;for(var s=0;s<$(a).length;s++)r+=$(a).parent().eq(s).width()+o.cellmargin;$(a).length>3&&($(f).fadeIn(),$(l).fadeIn()),$(f).live("click",t),$(l).live("click",n),i=r+c*$(a).length,$(u).width(i)}};return e}),define("alertbox",[],function(){function e(){var e={title:"这是一个标题",confirmTxt:"确定",content:"",cancel:function(){},confirm:function(){}},t={touchMoveHandle:function(t){return t.preventDefault(),!1},insertStyles:function(){var t,n=[],r,i,s,o,u=arguments.length;u==1?(t=document,n.push(arguments[0])):u==2?(t=arguments[0],n.push(arguments[1])):alert("函数最多接收两个参数！"),i=t.getElementsByTagName("head")[0],styles=i.getElementsByTagName("style");if(styles.length==0)if(t.createStyleSheet)t.createStyleSheet();else{var a=t.createElement("style");a.setAttribute("type","text/css"),i.appendChild(a)}o=styles[0],r=n.join("\n"),o.styleSheet?o.styleSheet.cssText+=r:t.getBoxObjectFor?o.innerHTML+=r:o.appendChild(t.createTextNode(r))}},n={beforeShowMask:function(e){document.addEventListener?document.addEventListener("click",t.touchMoveHandle,!1):document.attachEvent?document.attachEvent("onclick",t.touchMoveHandle):document.onclick=t.touchMoveHandle,e&&e()},afterHideMask:function(e){document.removeEventListener?document.removeEventListener("click",t.touchMoveHandle):document.detachEvent?document.detachEvent("onclick",t.touchMoveHandle):document.onclick=t.touchMoveHandle,e&&e()}},r=" .ui-alert-mask { position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1000; }                         .ui-alert-mask .ui-alert { z-index:100;position: absolute; top: 50%; left: 50%; margin: -75px 0 0 -175px;width: 350px; padding: 0 25px; border-radius: 8px; background-color: #fff; text-align: center; }                         .ui-alert-mask .ui-alert .ui-alert-hd { padding: 0; }                         .ui-alert-mask .ui-alert .ui-alert-hd h2 { position:relative;color:#f63852;line-height: 1.5; margin: 0; padding: 10px 0; font-size: 20px; font-weight: bold;}                         .ui-alert-mask .ui-alert .ui-alert-bd { width: 100%; display:block;padding: 15px 0; }                         .icon-close { position:absolute; right:18px ; top:18px; cursor:pointer;display:block;}                         .ui-btn-confirm { position:relative;width:140px;height:36px;margin:15px auto 15px;display:block;text-align:center;color:#FFFFFF;font-size:20px; line-height:35px;background-color:#f63852;border-radius:6px;font-weight:bold;}                         .ui-btn-confirm:hover{color:#FFFFFF;text-decoration:none;}                        .ui-alert-content{position:relative;width:270px;margin:0 auto;}                         .ui-alert-content img{width:100%;}                         .blackbg{z-index:99;width: 100%; height: 100%;position:absolute;top:0px;left:0px; background:rgba(0, 0, 0, 0.5) none repeat scroll 0 0 !important; filter:alpha(opacity=50);background:#000000; }                        ",i='<div class="ui-alert-mask">                             <div class="ui-alert">                                 <div class="ui-alert-hd">                                     <h2 id="js-alert-title"></h2>                                 </div>                                 <div class="ui-alert-bd">                                     <div id="js-alert-content" class="ui-alert-content"></div>                                     <a href="javascript:void(0)" class="ui-btn ui-btn-confirm" id="js-alert-confirm">确定</a>                                 </div>                                 <a href="javascript:void(0)" class="icon-close" id="js-alert-cancel"></a>                             </div>                             <div class="blackbg"></div>                        </div>                       ';return{init:function(t){this.op=$.extend(e,t||{}),this.title=this.op.title,this.confirmTxt=this.op.confirmTxt,this.content=this.op.content,this.cancelCallback=this.op.cancel,this.confirmCallback=this.op.confirm},bind:function(){var e=this;$("#js-alert-cancel").on("click",function(t){e.cancelCallback&&e.cancelCallback(),e.hide()}),$("#js-alert-confirm").on("click",function(t){e.confirmCallback&&e.confirmCallback(),e.hide()})},render:function(){$(".ui-alert-mask").length||($("body").append(i),$("#js-alert-title").html(this.title),$("#js-alert-confirm").html(this.confirmTxt),$("#js-alert-content").html(this.content)),this.bind()},destroy:function(){$("#js-alert-cancel").off("click"),$("#js-alert-confirm").off("click"),$(".ui-alert-mask").remove()},show:function(e){this.init(e),n.beforeShowMask(function(){$("style").length?$("style").each(function(e,n){$(n).html().indexOf(".ui-alert-mask")==-1&&t.insertStyles(r)}):t.insertStyles(r)}),this.render()},hide:function(){var e=this;n.afterHideMask(function(){e.destroy()})}}}return e()}),define("videoModule",[],function(){window.Modernizr=function(e,t,n){function r(e){p.cssText=e}function i(e,t){return typeof e===t}var s,o,u,a="2.6.2",f={},l=t.documentElement,c="modernizr",h=t.createElement(c),p=h.style,d=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),v={},m=[],g=m.slice,y=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(r,10))for(;r--;)u=t.createElement("div"),u.id=i?i[r]:c+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',c,'">',e,"</style>"].join(""),f.id=c,(h?f:p).innerHTML+=s,p.appendChild(f),h||(p.style.background="",p.style.overflow="hidden",a=l.style.overflow,l.style.overflow="hidden",l.appendChild(p)),o=n(f,e),h?f.parentNode.removeChild(f):(p.parentNode.removeChild(p),l.style.overflow=a),!!o},b={}.hasOwnProperty;u=i(b,"undefined")||i(b.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return b.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=g.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(g.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(g.call(arguments)))};return r}),v.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:y(["@media (",d.join("touch-enabled),("),c,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},v.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},v.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n};for(var w in v)u(v,w)&&(o=w.toLowerCase(),f[o]=v[w](),m.push((f[o]?"":"no-")+o));return f.addTest=function(e,t){if("object"==typeof e)for(var r in e)u(e,r)&&f.addTest(r,e[r]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(l.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),h=s=null,f._version=a,f._prefixes=d,f.testStyles=y,f}(this,this.document);var t=function(t){function n(){o=function(e){switch(e){case"EMPTY":break;case"FULL":}},u=function(e){100===e&&p.startHandler()},a=function(){},l=function(e){switch(e){case"AWAKENING":break;case"STARTING":break;case"PLAYING":break;case"COMPLETED":}},c=function(e){s.getDuration()>0&&e>s.getDuration()-T&&(C?(s.setPause(),s.setPlayhead(.1),s.setPlay()):p.completeHandler())}}function r(){var e=null;Modernizr.touch?(e=y?{0:{src:m+L+".mp3",type:"audio/mp3"}}:{0:{src:m+L+".mp4",type:"video/mp4"},config:{disablePause:E}},s=projekktor("#"+O,{autoplay:1,controls:w,height:x,loop:C,thereCanBeOnlyOne:P,volume:H,width:S,playlist:[e]},function(e){e.addListener("buffer",o),e.addListener("progress",u),e.addListener("start",a),e.addListener("state",l),e.addListener("time",c)})):(e=y?{0:{src:m+k+".mp3",type:"audio/mp3"},1:{src:m+k+".ogg",type:"audio/ogg"},config:{disablePause:E,enableKeyboard:!1}}:{0:{src:m+k+".webm",type:"video/webm"},1:{src:m+k+".mp4",type:"video/mp4"},2:{src:m+k+".ogv",type:"video/ogg"},config:{disablePause:E,enableKeyboard:!1}},s=projekktor("#"+O,{autoplay:!1,controls:w,height:x,loop:C,thereCanBeOnlyOne:P,volume:H,width:S,playerFlashMP4:M+"swf/StrobeMediaPlayback/StrobeMediaPlayback.swf",playerFlashMP3:M+"swf/StrobeMediaPlayback/StrobeMediaPlayback.swf",playlist:[e]},function(e){e.addListener("buffer",o),e.addListener("progress",u),e.addListener("start",a),e.addListener("state",l),e.addListener("time",c),b&&e.setPlay()})),y||(h.resizeMedia(),$(window).resize(h.resizeMedia))}function i(){0===s.getVolume()?(s.setVolume(100),H=100,U.find("img").attr("src",U.find("img").attr("src").replace("off.png","on.png")),$(h).trigger("MEDIA_UNMUTED")):(s.setVolume(0),H=0,U.find("img").attr("src",U.find("img").attr("src").replace("on.png","off.png")),$(h).trigger("MEDIA_MUTED"))}var s,o,u,a,l,c,h=this,p=this.constructor.prototype,v={akamaiBaseDirectory:"",audioOnly:!1,autoplay:!1,controls:!1,disablePause:!0,displayWidth:1600,displayHeight:800,fadeOutTime:1,iPadPlayBtnID:null,loop:!1,mediaSrc:"",mediaSrciPad:"",mediaTargetID:"mediaTarget",playerName:"vplayer",projectDirectory:"",skipBtnID:null,soundBtnID:null,thereCanBeOnlyOne:!0,volume:.8},m=void 0!==t.akamaiBaseDirectory?t.akamaiBaseDirectory:v.akamaiBaseDirectory,y=void 0!==t.audioOnly?t.audioOnly:v.audioOnly,b=void 0!==t.autoplay?t.autoplay:v.autoplay,w=void 0!==t.controls?t.controls:v.controls,E=void 0!==t.disablePause?t.disablePause:v.disablePause,S=void 0!==t.displayWidth?t.displayWidth:v.displayWidth,x=void 0!==t.displayHeight?t.displayHeight:v.displayHeight,T=void 0!==t.fadeOutTime?t.fadeOutTime:v.fadeOutTime,N=void 0!==t.iPadPlayBtnID?t.iPadPlayBtnID:v.iPadPlayBtnID,C=void 0!==t.loop?t.loop:v.loop,k=void 0!==t.mediaSrc?t.mediaSrc:v.mediaSrc,L=void 0!==t.mediaSrciPad?t.mediaSrciPad:v.mediaSrciPad,A=void 0!==t.mediaTargetID?t.mediaTargetID:v.mediaTargetID,O=void 0!==t.playerName?t.playerName:v.playerName,M=void 0!==t.projectDirectory?t.projectDirectory:v.projectDirectory,_=void 0!==t.skipBtnID?t.skipBtnID:v.skipBtnID,D=void 0!==t.soundBtnID?t.soundBtnID:v.soundBtnID,P=void 0!==t.thereCanBeOnlyOne?t.thereCanBeOnlyOne:v.thereCanBeOnlyOne,H=void 0!==t.volume?t.volume:v.volume,B=x/S,j=!0,F=!1,I=$("#"+N),q=$("#"+A),R=$("#"+_),U=$("#"+D);h.init=function(){q.html(y?'<audio id="'+O+'"></audio>':'<video id="'+O+'"></video>'),r(),n()},h.resizeMedia=function(){var e=q.width();s.setSize({width:e+"px",height:e*B+"px"})},h.play=function(){s.setPlay()},h.pause=function(){s.setPause()},h.playHead=function(e){s.setPlayhead(e)},h.setVolume=function(e){s.setVolume(e)},h.stop=function(){s.removeListener("buffer",o),s.removeListener("progress",u),s.removeListener("start",a),s.removeListener("state",l),s.setPause(),p.completeHandler()},p.startHandler=function(){$(h).trigger("MEDIA_START"),s&&s.setVolume(H),j||s.addListener("time",c),Modernizr.touch||null===D||f(),null!==_&&d()},p.completeHandler=function(){$(h).trigger(F?"MEDIA_SKIPPED":"MEDIA_COMPLETE"),s.removeListener("time",c),j=!1,Modernizr.touch||null===D||g(),null!==_&&e()},h.kill=function(){s.selfDestruct(),s=null,q.empty(),$(window).off("resize",h.resizeMedia)}};return t}),function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),define("jqueryColor",function(){}),function(e){typeof define=="function"&&define.amd?define("tinyscrollbar",e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function r(e,r){function m(){return i.update(),y(),i}function g(){f.css(d,i.thumbPosition),o.css(d,-i.contentPosition),u.css(p,i.trackSize),a.css(p,i.trackSize),f.css(p,i.thumbSize)}function y(){l?s[0].ontouchstart=function(e){1===e.touches.length&&(e.stopPropagation(),E(e.touches[0]))}:(f.bind("mousedown",function(e){e.stopPropagation(),E(e)}),a.bind("mousedown",function(e){E(e,!0)})),$(window).resize(function(){i.update("relative")}),i.options.wheel&&window.addEventListener?e[0].addEventListener(c,S,!1):i.options.wheel&&(e[0].onmousewheel=S)}function b(){return i.contentPosition>0}function w(){return i.contentPosition<=i.contentSize-i.viewportSize-5}function E(e,t){i.hasContentToSroll&&($("body").addClass("noSelect"),v=t?f.offset()[d]:h?e.pageX:e.pageY,l?(document.ontouchmove=function(e){(i.options.touchLock||b()&&w())&&e.preventDefault(),x(e.touches[0])},document.ontouchend=T):($(document).bind("mousemove",x),$(document).bind("mouseup",T),f.bind("mouseup",T),a.bind("mouseup",T)),x(e))}function S(t){if(i.hasContentToSroll){var n=t||window.event,r=-(n.deltaY||n.detail||-1/3*n.wheelDelta)/40,s=n.deltaMode===1?i.options.wheelSpeed:1;i.contentPosition-=r*s*i.options.wheelSpeed,i.contentPosition=Math.min(i.contentSize-i.viewportSize,Math.max(0,i.contentPosition)),i.thumbPosition=i.contentPosition/i.trackRatio,e.trigger("move"),f.css(d,i.thumbPosition),o.css(d,-i.contentPosition);if(i.options.wheelLock||b()&&w())n=$.event.fix(n),n.preventDefault()}}function x(t){if(i.hasContentToSroll){var n=h?t.pageX:t.pageY,r=l?v-n:n-v,s=Math.min(i.trackSize-i.thumbSize,Math.max(0,i.thumbPosition+r));i.contentPosition=s*i.trackRatio,e.trigger("move"),f.css(d,s),o.css(d,-i.contentPosition)}}function T(){i.thumbPosition=parseInt(f.css(d),10)||0,$("body").removeClass("noSelect"),$(document).unbind("mousemove",x),$(document).unbind("mouseup",T),f.unbind("mouseup",T),a.unbind("mouseup",T),document.ontouchmove=document.ontouchend=null}this.options=$.extend({},n,r),this._defaults=n,this._name=t;var i=this,s=e.find(".viewport"),o=e.find(".overview"),u=e.find(".scrollbar"),a=u.find(".track"),f=u.find(".thumb"),l="ontouchstart"in document.documentElement,c="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",h=this.options.axis==="x",p=h?"width":"height",d=h?"left":"top",v=0;return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(e){var t=p.charAt(0).toUpperCase()+p.slice(1).toLowerCase();this.viewportSize=s[0]["offset"+t],this.contentSize=o[0]["scroll"+t],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,u.toggleClass("disable",!this.hasContentToSroll);switch(e){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(e,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,g(),i},m()}var t="tinyscrollbar",n={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};$.fn[t]=function(e){return this.each(function(){$.data(this,"plugin_"+t)||$.data(this,"plugin_"+t,new r($(this),e))})}}),define("commentModule",["alertbox","jqueryColor","tinyscrollbar"],function(e,t){var n={init:function(){this.bindFun(),this.ajaxHandle()},bindFun:function(){var e=this;$.fn.upSlide=e.upSlide,$(".scrollwrap").each(function(){$(this).find(".overview").height()>$(this).height()?($(this).find(".scrollbar").show(),$(this).tinyscrollbar(),$(this).upSlide()):$(this).find(".scrollbar").hide()})},upSlide:function(){function i(){var e=r.parents(".scrollwrap").data("plugin_tinyscrollbar"),n=e.contentPosition,i=t.height()-e.viewportSize;i-n<=0?e.update(0):t.height()-100>r.parents(".scrollwrap").height()&&(n++,e.update(n))}var e=50,t=$(this).find(".wrap1"),n=$(this).find(".wrap2"),r=$(this).find(".overview"),s,s=setInterval(i,e);r[0].onmouseover=function(){clearInterval(s)},r[0].onmouseout=function(){s=setInterval(i,e)}},ajaxHandle:function(){$(".sendbtn").on("click",function(){var t=$(this).parent().find("textarea"),n=t.val(),r=$(this).attr("data-sid"),i=$(this);$.post("http://www.shihuo.cn/api/qixi",{act:"ajaxComment",sid:r,content:n},function(s){var o=$.parseJSON(s);if(o.status==200){var u='<li class="shake"><p>'+username+"</p><p>"+n+"</p></li>",a=i.parents(".message").find(".wrap1"),f=$("#"+r).find(".scrollwrap").data("plugin_tinyscrollbar");a.prepend(u),"undefined"!=typeof f&&(f.update(0),f.update("relative")),a.find(".shake").animate({"background-color":"transparent",color:"#000000",opacity:"1"},500),t.val("")}else o.status==501?e.show({title:o.msg,confirmTxt:"确定",confirm:function(){window.location.href=o.data.jumpUrl}}):e.show({title:o.msg,confirmTxt:"确定"})})})}};return n}),requirejs.config({baseUrl:"/js/",paths:{underscore:"lib/underscore",projekktor:"lib/videoPlugin/projekktor-1.3.09.min",gallerySlider:"lib/slide/gallery_slider",alertbox:"trade/activity/qixi/modules/alertbox",videoModule:"trade/activity/qixi/modules/videoModule",tinyscrollbar:"lib/jquery.tinyscrollbar",commentModule:"trade/activity/qixi/modules/commentModule",jqueryColor:"lib/jquery.color"}}),require(["underscore","projekktor","gallerySlider","alertbox","videoModule","commentModule"],function(e,t,n,r,i,s){function l(){var e=window.location.hash.length>0?window.location.hash.substring(1):"",t={},n=e.length>0?e.split("&"):[],r=null,i=null,s=null,o=0,u=n.length;for(o=0;o<u;o++)r=n[o].split("="),i=decodeURIComponent(r[0]),s=decodeURIComponent(r[1]),i.length>0&&(t[i]=s);return t}var o=l(),u=o.from;u=="zhanqi"&&(staticData[0].content="爱看战旗TV爱玩lol，简单粗暴的女汉子一枚。最大的兴趣爱好就是和朋友们打篮球！球场上个性霸气的她，私下却逗逼有趣。这次女王大赛，喜欢安妮的要给她投票哦！",staticData[2].content="参赛者中最氧气的网友之一，网友jocelyn15曝出照片，并称“拉妹妹来凑数”后，引发了一阵“大舅哥”的认亲风潮。这位妹妹喜爱篮球、健身，还是典型的爱看lol直播的撸妹子哦！",staticData[5].content="爱运动爱游戏的萌女汉！目前没有男朋友，四海之内皆朋友！摄影音乐体育游戏样样耍的来，不仅名字甜性格也甜，做个萌女汉没什么不好的。");var a=$("#tpl").html(),f=_.template(a);$(".pagecontent").append(f),$(".grid").fadeIn(),$("#tpl").remove(),r.init(),s.init();var c={init:function(){this.bindFun(),this.vote(),this.initSlide()},bindFun:function(){var e=this;e.doResize(),$(window).resize(function(){e.doResize()}),$(".videoplayBtn").on("click",function(){var t=$(this).attr("data-mediaSrc");e.initVideo(t).init(),$(".videowrap").fadeIn()}),$(".videowrap .bg,.icon-close-video").on("click",function(){$("#player").remove(),$(".videowrap").fadeOut()})},doResize:function(){var e=$(window).width();e>1600?$(".background").css({width:"100%",left:"0","margin-left":"0"}):$(".background").css({width:"1600px",left:"50%","margin-left":"-800px"})},vote:function(){var e=!1,t;$(".vote-btn").each(function(){var e=$(this).attr("data-issupport");e=="true"?t=!0:undefined==typeof t&&e=="false"&&(t=!1)}),t?($(".votednum").show(),$(".unvote").hide()):($(".votednum").hide(),$(".unvote").show()),$(".vote-btn").live("click",function(){if(e)return!1;e=!0;var t=$(this).attr("data-sid"),n=$(this);$.post("http://www.shihuo.cn/api/qixi?act=ajaxSupport&sid="+t,function(t){datas=$.parseJSON(t),datas.status==410||datas.status==405?r.show({title:datas.msg,confirmTxt:"确定",content:"<img src='/images/trade/activity/qixi/coupon.jpg'>",confirm:function(){n.find(".votednum").text(datas.data.num),$(".votednum").show(),$(".unvote").hide()}}):datas.status==411?r.show({title:datas.msg,confirmTxt:"确定",content:""}):datas.status==501?r.show({title:datas.msg,confirmTxt:"确定",content:"",confirm:function(){window.location.href=datas.data.jumpUrl}}):r.show({title:datas.msg,confirmTxt:"再试一次",content:""}),e=!1})})},initSlide:function(){$(".grid").each(function(){var e=$(this).find(".slidecontent li").length,t=$(this).index();e>3?(new n({tc:".grid"+t+" .slidecontent",img:".grid"+t+" li img",prev:".grid"+t+" .icon-arrow-left",next:".grid"+t+" .icon-arrow-right",cellmargin:30})).init():$(this).find(".arrow").hide()})},initVideo:function(e){var t=new i({akamaiBaseDirectory:"http://shihuo.hupucdn.com/",audioOnly:!1,autoplay:1,controls:1,disablePause:!1,displayWidth:"912",displayHeight:"512",fadeOutTime:1,iPadPlayBtnID:"",loop:!1,mediaSrc:e,mediaSrciPad:e,mediaTargetID:"mediaTarget",playerName:"player",projectDirectory:"http://c1.hoopchina.com.cn/css/video/",skipBtnID:"",soundBtnID:"",thereCanBeOnlyOne:!1,volume:.8});return{init:function(){t.init(),t.play()},kill:function(){t.kill()}}}};c.init()}),define("trade/activity/qixi/qixi",function(){});