(function(a){a.addFlex=function(l,c){if(l.grid)return!1;c=a.extend({height:200,width:"auto",striped:!0,novstripe:!1,minwidth:30,minheight:80,resizable:!0,url:!1,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:!1,nowrap:!0,page:1,total:1,useRp:!0,rp:15,rpOptions:[10,15,20,30,50],title:!1,idProperty:"id",pagestat:"Displaying {from} to {to} of {total} items",pagetext:"Page",outof:"of",findtext:"Find",params:[],procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",
minColToggle:1,showToggleBtn:!0,hideOnSubmit:!0,autoload:!0,blockOpacity:0.5,preProcess:!1,addTitleToCell:!1,dblClickResize:!1,onDragCol:!1,onToggleCol:!1,onChangeSort:!1,onDoubleClick:!1,onSuccess:!1,onError:!1,onSubmit:!1},c);a(l).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var b={hset:{},rePosDrag:function(){var d=0-this.hDiv.scrollLeft;0<this.hDiv.scrollLeft&&(d-=Math.floor(c.cgwidth/2));a(b.cDrag).css({top:b.hDiv.offsetTop+1});var h=this.cdpad;a("div",b.cDrag).hide();
a("thead tr:first th:visible",this.hDiv).each(function(){var f=a("thead tr:first th:visible",b.hDiv).index(this),g=parseInt(a("div",this).width());0==d&&(d-=Math.floor(c.cgwidth/2));g=g+d+h;isNaN(g)&&(g=0);a("div:eq("+f+")",b.cDrag).css({left:g+"px"}).show();d=g})},fixHeight:function(d){var d=!1,d=a(b.bDiv).height(),h=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(d+h)});parseInt(a(b.nDiv).height())>d?a(b.nDiv).height(d).width(200):a(b.nDiv).height("auto").width("auto");
a(b.block).css({height:d,marginBottom:-1*d});var f=b.bDiv.offsetTop+d;"auto"!=c.height&&c.resizable&&(f=b.vDiv.offsetTop);a(b.rDiv).css({height:f})},dragStart:function(d,h,f){if("colresize"==d){a(b.nDiv).hide();a(b.nBtn).hide();var d=a("div",this.cDrag).index(f),g=a("th:visible div:eq("+d+")",this.hDiv).width();a(f).addClass("dragging").siblings().hide();a(f).prev().addClass("dragging").show();this.colresize={startX:h.pageX,ol:parseInt(f.style.left),ow:g,n:d};a("body").css("cursor","col-resize")}else"vresize"==
d?(d=!1,a("body").css("cursor","row-resize"),f&&(d=!0,a("body").css("cursor","col-resize")),this.vresize={h:c.height,sy:h.pageY,w:c.width,sx:h.pageX,hgo:d}):"colMove"==d&&(a(b.nDiv).hide(),a(b.nBtn).hide(),this.hset=a(this.hDiv).offset(),this.hset.right=this.hset.left+a("table",this.hDiv).width(),this.hset.bottom=this.hset.top+a("table",this.hDiv).height(),this.dcol=f,this.dcoln=a("th",this.hDiv).index(f),this.colCopy=document.createElement("div"),this.colCopy.className="colCopy",this.colCopy.innerHTML=
f.innerHTML,a.browser.msie&&(this.colCopy.className="colCopy ie"),a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:f.align}),a("body").append(this.colCopy),a(this.cDrag).hide());a("body").noSelect()},dragMove:function(b){if(this.colresize){var h=this.colresize.n,f=b.pageX-this.colresize.startX,b=this.colresize.ol+f,f=this.colresize.ow+f;f>c.minwidth&&(a("div:eq("+h+")",this.cDrag).css("left",b),this.colresize.nw=f)}else this.vresize?(h=this.vresize,f=b.pageY-h.sy,c.defwidth||
(c.defwidth=c.width),"auto"!=c.width&&(!c.nohresize&&h.hgo)&&(b=h.w+(b.pageX-h.sx),b>c.defwidth&&(this.gDiv.style.width=b+"px",c.width=b)),f=h.h+f,(f>c.minheight||c.height<c.minheight)&&!h.hgo&&(this.bDiv.style.height=f+"px",c.height=f,this.fixHeight(f))):this.colCopy&&(a(this.dcol).addClass("thMove").removeClass("thOver"),b.pageX>this.hset.right||b.pageX<this.hset.left||b.pageY>this.hset.bottom||b.pageY<this.hset.top?a("body").css("cursor","move"):a("body").css("cursor","pointer"),a(this.colCopy).css({top:b.pageY+
10,left:b.pageX+20,display:"block"}))},dragEnd:function(){if(this.colresize){var d=this.colresize.n,h=this.colresize.nw;a("th:visible div:eq("+d+")",this.hDiv).css("width",h);a("tr",this.bDiv).each(function(){var c=a("td:visible div:eq("+d+")",this);c.css("width",h);b.addTitleToCell(c)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;a("div:eq("+d+")",this.cDrag).siblings().show();a(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=!1;a.cookies&&a.cookie("flexiwidths/"+
c.colModel[d].name,h)}else this.vresize?this.vresize=!1:this.colCopy&&(a(this.colCopy).remove(),null!=this.dcolt&&(this.dcoln>this.dcolt?a("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol):a("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol),this.switchCol(this.dcoln,this.dcolt),a(this.cdropleft).remove(),a(this.cdropright).remove(),this.rePosDrag(),c.onDragCol&&c.onDragCol(this.dcoln,this.dcolt)),this.dcol=null,this.hset=null,this.dcoln=null,this.dcolt=null,this.colCopy=null,a(".thMove",this.hDiv).removeClass("thMove"),
a(this.cDrag).show());a("body").css("cursor","default");a("body").noSelect(!1)},toggleCol:function(d,h){var f=a("th[axis='col"+d+"']",this.hDiv)[0],g=a("thead th",b.hDiv).index(f),i=a("input[value="+d+"]",b.nDiv)[0];return null==h&&(h=f.hidden),a("input:checked",b.nDiv).length<c.minColToggle&&!h?!1:(h?(f.hidden=!1,a(f).show(),i.checked=!0):(f.hidden=!0,a(f).hide(),i.checked=!1),a("tbody tr",l).each(function(){h?a("td:eq("+g+")",this).show():a("td:eq("+g+")",this).hide()}),this.rePosDrag(),c.onToggleCol&&
c.onToggleCol(d,h),h)},switchCol:function(b,c){a("tbody tr",l).each(function(){b>c?a("td:eq("+c+")",this).before(a("td:eq("+b+")",this)):a("td:eq("+c+")",this).after(a("td:eq("+b+")",this))});b>c?a("tr:eq("+c+")",this.nDiv).before(a("tr:eq("+b+")",this.nDiv)):a("tr:eq("+c+")",this.nDiv).after(a("tr:eq("+b+")",this.nDiv));a.browser.msie&&7>a.browser.version&&(a("tr:eq("+c+") input",this.nDiv)[0].checked=!0);this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;
this.rePosDrag()},addData:function(d){"json"==c.dataType&&(d=a.extend({rows:[],page:0,total:0},d));c.preProcess&&(d=c.preProcess(d));a(".pReload",this.pDiv).removeClass("loading");this.loading=!1;if(!d)return a(".pPageStat",this.pDiv).html(c.errormsg),!1;"xml"==c.dataType?c.total=+a("rows total",d).text():c.total=d.total;if(0==c.total)return a("tr, a, td, div",l).unbind(),a(l).empty(),c.pages=1,c.page=1,this.buildpager(),a(".pPageStat",this.pDiv).html(c.nomsg),!1;c.pages=Math.ceil(c.total/c.rp);"xml"==
c.dataType?c.page=+a("rows page",d).text():c.page=d.page;this.buildpager();var h=document.createElement("tbody");if("json"==c.dataType)a.each(d.rows,function(d,f){var g=document.createElement("tr");f.name&&(g.name=f.name);f.color?a(g).css("background",f.color):d%2&&c.striped&&(g.className="erow");f[c.idProperty]&&(g.id="row"+f[c.idProperty]);a("thead tr:first th",b.hDiv).each(function(){var b=document.createElement("td"),d=a(this).attr("axis").substr(3);b.align=this.align;"undefined"==typeof f.cell?
b.innerHTML=f[c.colModel[d].name]:"undefined"!=typeof f.cell[d]?b.innerHTML=null!=f.cell[d]?f.cell[d]:"":b.innerHTML=f.cell[c.colModel[d].name];d=b.innerHTML.indexOf("<BGCOLOR=");0<d&&a(b).css("background",text.substr(d+7,7));a(b).attr("abbr",a(this).attr("abbr"));a(g).append(b)});if(1>a("thead",this.gDiv).length)for(idx=0;idx<cell.length;idx++){var i=document.createElement("td");"undefined"!=typeof f.cell[idx]?i.innerHTML=null!=f.cell[idx]?f.cell[idx]:"":i.innerHTML=f.cell[c.colModel[idx].name];
a(g).append(i);i=null}a(h).append(g);g=null});else if("xml"==c.dataType){var f=1;a("rows row",d).each(function(){f++;var d=document.createElement("tr");a(this).attr("name")&&(d.name=a(this).attr("name"));a(this).attr("color")?a(d).css("background",a(this).attr("id")):f%2&&c.striped&&(d.className="erow");var g=a(this).attr("id");g&&(d.id="row"+g);var g=null,i=this;a("thead tr:first th",b.hDiv).each(function(){var b=document.createElement("td"),c=a(this).attr("axis").substr(3);b.align=this.align;var c=
a("cell:eq("+c+")",i).text(),h=c.indexOf("<BGCOLOR=");0<h&&a(b).css("background",c.substr(h+7,7));b.innerHTML=c;a(b).attr("abbr",a(this).attr("abbr"));a(d).append(b)});1>a("thead",this.gDiv).length&&a("cell",this).each(function(){var b=document.createElement("td");b.innerHTML=a(this).text();a(d).append(b)});a(h).append(d);i=d=null})}a("tr",l).unbind();a(l).empty();a(l).append(h);this.addCellProp();this.addRowProp();this.rePosDrag();f=d=h=null;c.onSuccess&&c.onSuccess(this);c.hideOnSubmit&&a(b.block).remove();
this.hDiv.scrollLeft=this.bDiv.scrollLeft;a.browser.opera&&a(l).css("visibility","visible")},changeSort:function(d){if(this.loading)return!0;a(b.nDiv).hide();a(b.nBtn).hide();c.sortname==a(d).attr("abbr")&&("asc"==c.sortorder?c.sortorder="desc":c.sortorder="asc");a(d).addClass("sorted").siblings().removeClass("sorted");a(".sdesc",this.hDiv).removeClass("sdesc");a(".sasc",this.hDiv).removeClass("sasc");a("div",d).addClass("s"+c.sortorder);c.sortname=a(d).attr("abbr");c.onChangeSort?c.onChangeSort(c.sortname,
c.sortorder):this.populate()},buildpager:function(){a(".pcontrol input",this.pDiv).val(c.page);a(".pcontrol span",this.pDiv).html(c.pages);var b=(c.page-1)*c.rp+1,h=b+c.rp-1;c.total<h&&(h=c.total);var f=c.pagestat,f=f.replace(/{from}/,b),f=f.replace(/{to}/,h),f=f.replace(/{total}/,c.total);a(".pPageStat",this.pDiv).html(f)},populate:function(){if(this.loading)return!0;if(c.onSubmit&&!c.onSubmit())return!1;this.loading=!0;if(!c.url)return!1;a(".pPageStat",this.pDiv).html(c.procmsg);a(".pReload",this.pDiv).addClass("loading");
a(b.block).css({top:b.bDiv.offsetTop});c.hideOnSubmit&&a(this.gDiv).prepend(b.block);a.browser.opera&&a(l).css("visibility","hidden");c.newp||(c.newp=1);c.page>c.pages&&(c.page=c.pages);var d=[{name:"page",value:c.newp},{name:"rp",value:c.rp},{name:"sortname",value:c.sortname},{name:"sortorder",value:c.sortorder},{name:"query",value:c.query},{name:"qtype",value:c.qtype}];if(c.params.length)for(var h=0;h<c.params.length;h++)d[d.length]=c.params[h];a.ajax({type:c.method,url:c.url,data:d,dataType:c.dataType,
success:function(a){b.addData(a)},error:function(a,b,d){try{c.onError&&c.onError(a,b,d)}catch(h){}}})},doSearch:function(){c.query=a("input[name=q]",b.sDiv).val();c.qtype=a("select[name=qtype]",b.sDiv).val();c.newp=1;this.populate()},changePage:function(b){if(this.loading)return!0;switch(b){case "first":c.newp=1;break;case "prev":1<c.page&&(c.newp=parseInt(c.page)-1);break;case "next":c.page<c.pages&&(c.newp=parseInt(c.page)+1);break;case "last":c.newp=c.pages;break;case "input":b=parseInt(a(".pcontrol input",
this.pDiv).val()),isNaN(b)&&(b=1),1>b?b=1:b>c.pages&&(b=c.pages),a(".pcontrol input",this.pDiv).val(b),c.newp=b}if(c.newp==c.page)return!1;c.onChangePage?c.onChangePage(c.newp):this.populate()},addCellProp:function(){a("tbody tr td",b.bDiv).each(function(){var d=document.createElement("div"),h=a("td",a(this).parent()).index(this),h=a("th:eq("+h+")",b.hDiv).get(0);null!=h&&(c.sortname==a(h).attr("abbr")&&c.sortname&&(this.className="sorted"),a(d).css({textAlign:h.align,width:a("div:first",h)[0].style.width}),
h.hidden&&a(this).css("display","none"));0==c.nowrap&&a(d).css("white-space","normal");""==this.innerHTML&&(this.innerHTML="&nbsp;");d.innerHTML=this.innerHTML;var f=a(this).parent()[0],g=!1;f.id&&(g=f.id.substr(3));null!=h&&h.process&&h.process(d,g);a(this).empty().append(d).removeAttr("width");b.addTitleToCell(d)})},getCellDim:function(b){var c=parseInt(a(b).height()),f=parseInt(a(b).parent().height()),g=parseInt(b.style.width),i=parseInt(a(b).parent().width()),j=b.offsetParent.offsetTop,l=b.offsetParent.offsetLeft,
k=parseInt(a(b).css("paddingLeft")),b=parseInt(a(b).css("paddingTop"));return{ht:c,wt:g,top:j,left:l,pdl:k,pdt:b,pht:f,pwt:i}},addRowProp:function(){a("tbody tr",b.bDiv).each(function(){a(this).click(function(d){d=d.target||d.srcElement;if(d.href||d.type)return!0;a(this).toggleClass("trSelected");c.singleSelect&&!b.multisel&&(a(this).siblings().removeClass("trSelected"),a(this).toggleClass("trSelected"))}).mousedown(function(c){c.shiftKey&&(a(this).toggleClass("trSelected"),b.multisel=!0,this.focus(),
a(b.gDiv).noSelect());c.ctrlKey&&(a(this).toggleClass("trSelected"),b.multisel=!0,this.focus())}).mouseup(function(){b.multisel&&!e.ctrlKey&&(b.multisel=!1,a(b.gDiv).noSelect(!1))}).dblclick(function(){c.onDoubleClick&&c.onDoubleClick(this,b,c)}).hover(function(c){b.multisel&&c.shiftKey&&a(this).toggleClass("trSelected")},function(){});a.browser.msie&&7>a.browser.version&&a(this).hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})})},combo_flag:!0,combo_resetIndex:function(a){this.combo_flag&&
(a.selectedIndex=0);this.combo_flag=!0},combo_doSelectAction:function(a){eval(a.options[a.selectedIndex].value);a.selectedIndex=0;this.combo_flag=!1},addTitleToCell:function(b){if(c.addTitleToCell){var h=a("<span />").css("display","none"),b=b instanceof jQuery?b:a(b),f=b.outerWidth(),g=0;a("body").children(":first").before(h);h.html(b.html());h.css("font-size",""+b.css("font-size"));h.css("padding-left",""+b.css("padding-left"));g=h.innerWidth();h.remove();g>f?b.attr("title",b.text()):b.removeAttr("title")}},
autoResizeColumn:function(d){if(c.dblClickResize){var h=a("div",this.cDrag).index(d),f=a("th:visible div:eq("+h+")",this.hDiv),d=parseInt(d.style.left),g=f.width(),i=0,j=a("<span />");a("body").children(":first").before(j);j.html(f.html());j.css("font-size",""+f.css("font-size"));j.css("padding-left",""+f.css("padding-left"));j.css("padding-right",""+f.css("padding-right"));i=j.width();a("tr",this.bDiv).each(function(){var b=a("td:visible div:eq("+h+")",this),c=0;j.html(b.html());j.css("font-size",
""+b.css("font-size"));j.css("padding-left",""+b.css("padding-left"));j.css("padding-right",""+b.css("padding-right"));c=j.width();i=c>i?c:i});j.remove();i=c.minWidth>i?c.minWidth:i;a("div:eq("+h+")",this.cDrag).css("left",d+(i-g));this.colresize={nw:i,n:h};b.dragEnd()}},pager:0};if(c.colModel){for(var n=document.createElement("thead"),i=document.createElement("tr"),g=0;g<c.colModel.length;g++){var j=c.colModel[g],k=document.createElement("th");a(k).attr("axis","col"+g);if(j){if(a.cookies){var o=
"flexiwidths/"+j.name;void 0!=a.cookie(o)&&(j.width=a.cookie(o))}void 0!=j.display&&(k.innerHTML=j.display);j.name&&j.sortable&&a(k).attr("abbr",j.name);j.align&&(k.align=j.align);j.width&&a(k).attr("width",j.width);a(j).attr("hide")&&(k.hidden=!0);j.process&&(k.process=j.process)}else k.innerHTML="",a(k).attr("width",30);a(i).append(k)}a(n).append(i);a(l).prepend(n)}b.gDiv=document.createElement("div");b.mDiv=document.createElement("div");b.hDiv=document.createElement("div");b.bDiv=document.createElement("div");
b.vDiv=document.createElement("div");b.rDiv=document.createElement("div");b.cDrag=document.createElement("div");b.block=document.createElement("div");b.nDiv=document.createElement("div");b.nBtn=document.createElement("div");b.iDiv=document.createElement("div");b.tDiv=document.createElement("div");b.sDiv=document.createElement("div");b.pDiv=document.createElement("div");c.usepager||(b.pDiv.style.display="none");b.hTable=document.createElement("table");b.gDiv.className="flexigrid";"auto"!=c.width&&
(b.gDiv.style.width=c.width+"px");a.browser.msie&&a(b.gDiv).addClass("ie");c.novstripe&&a(b.gDiv).addClass("novstripe");a(l).before(b.gDiv);a(b.gDiv).append(l);if(c.buttons){b.tDiv.className="tDiv";k=document.createElement("div");k.className="tDiv2";for(g=0;g<c.buttons.length;g++)i=c.buttons[g],i.separator?a(k).append("<div class='btnseparator'></div>"):(j=document.createElement("div"),j.className="fbutton",j.innerHTML="<div><span>"+(i.hidename?"&nbsp;":i.name)+"</span></div>",i.bclass&&a("span",
j).addClass(i.bclass).css({paddingLeft:20}),i.bimage&&a("span",j).css("background","url("+i.bimage+") no-repeat center left"),a("span",j).css("paddingLeft",20),i.tooltip&&(a("span",j)[0].title=i.tooltip),j.onpress=i.onpress,j.name=i.name,i.id&&(j.id=i.id),i.onpress&&a(j).click(function(){this.onpress(this.id||this.name,b.gDiv)}),a(k).append(j),a.browser.msie&&7>a.browser.version&&a(j).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")}));a(b.tDiv).append(k);a(b.tDiv).append("<div style='clear:both'></div>");
a(b.gDiv).prepend(b.tDiv)}b.hDiv.className="hDiv";if(c.combobuttons&&a(b.tDiv2)){j=document.createElement("div");j.className="fbutton";var m=document.createElement("select");a(m).change(function(){b.combo_doSelectAction(m)});a(m).click(function(){b.combo_resetIndex(m)});m.className="cselect";a(j).append(m);for(g=0;g<c.combobuttons.length;g++)i=c.combobuttons[g],i.separator||(k=document.createElement("option"),k.innerHTML=i.name,i.bclass&&a(k).addClass(i.bclass).css({paddingLeft:20}),i.bimage&&a(k).css("background",
"url("+i.bimage+") no-repeat center left"),a(k).css("paddingLeft",20),i.tooltip&&(a(k)[0].title=i.tooltip),i.onpress&&(k.value=i.onpress),a(m).append(k));a(".tDiv2").append(j)}a(l).before(b.hDiv);b.hTable.cellPadding=0;b.hTable.cellSpacing=0;a(b.hDiv).append('<div class="hDivBox"></div>');a("div",b.hDiv).append(b.hTable);var n=a("thead:first",l).get(0);n&&a(b.hTable).append(n);n=null;if(!c.colmodel)var r=0;a("thead tr:first th",b.hDiv).each(function(){var d=document.createElement("div");a(this).attr("abbr")&&
(a(this).click(function(c){if(!a(this).hasClass("thOver"))return!1;c=c.target||c.srcElement;if(c.href||c.type)return!0;b.changeSort(this)}),a(this).attr("abbr")==c.sortname&&(this.className="sorted",d.className="s"+c.sortorder));this.hidden&&a(this).hide();c.colmodel||a(this).attr("axis","col"+r++);a(d).css({textAlign:this.align,width:this.width+"px"});d.innerHTML=this.innerHTML;a(this).empty().append(d).removeAttr("width").mousedown(function(a){b.dragStart("colMove",a,this)}).hover(function(){!b.colresize&&
!a(this).hasClass("thMove")&&!b.colCopy&&a(this).addClass("thOver");if(a(this).attr("abbr")!=c.sortname&&!b.colCopy&&!b.colresize&&a(this).attr("abbr"))a("div",this).addClass("s"+c.sortorder);else if(a(this).attr("abbr")==c.sortname&&!b.colCopy&&!b.colresize&&a(this).attr("abbr")){var d="asc"==c.sortorder?"desc":"asc";a("div",this).removeClass("s"+c.sortorder).addClass("s"+d)}if(b.colCopy){d=a("th",b.hDiv).index(this);if(d==b.dcoln)return!1;d<b.dcoln?a(this).append(b.cdropleft):a(this).append(b.cdropright);
b.dcolt=d}else if(!b.colresize){var d=a("th:visible",b.hDiv).index(this),d=parseInt(a("div:eq("+d+")",b.cDrag).css("left")),f=jQuery(b.nBtn).outerWidth(),f=d-f+Math.floor(c.cgwidth/2);a(b.nDiv).hide();a(b.nBtn).hide();a(b.nBtn).css({left:f,top:b.hDiv.offsetTop}).show();var g=parseInt(a(b.nDiv).width());a(b.nDiv).css({top:b.bDiv.offsetTop});f+g>a(b.gDiv).width()?a(b.nDiv).css("left",d-g+1):a(b.nDiv).css("left",f);a(this).hasClass("sorted")?a(b.nBtn).addClass("srtd"):a(b.nBtn).removeClass("srtd")}},
function(){a(this).removeClass("thOver");if(a(this).attr("abbr")!=c.sortname)a("div",this).removeClass("s"+c.sortorder);else if(a(this).attr("abbr")==c.sortname){var d="asc"==c.sortorder?"desc":"asc";a("div",this).addClass("s"+c.sortorder).removeClass("s"+d)}b.colCopy&&(a(b.cdropleft).remove(),a(b.cdropright).remove(),b.dcolt=null)})});b.bDiv.className="bDiv";a(l).before(b.bDiv);a(b.bDiv).css({height:"auto"==c.height?"auto":c.height+"px"}).scroll(function(){b.scroll()}).append(l);"auto"==c.height&&
a("table",b.bDiv).addClass("autoht");b.addCellProp();b.addRowProp();g=a("thead tr:first th:first",b.hDiv).get(0);if(null!=g){b.cDrag.className="cDrag";b.cdpad=0;b.cdpad+=isNaN(parseInt(a("div",g).css("borderLeftWidth")))?0:parseInt(a("div",g).css("borderLeftWidth"));b.cdpad+=isNaN(parseInt(a("div",g).css("borderRightWidth")))?0:parseInt(a("div",g).css("borderRightWidth"));b.cdpad+=isNaN(parseInt(a("div",g).css("paddingLeft")))?0:parseInt(a("div",g).css("paddingLeft"));b.cdpad+=isNaN(parseInt(a("div",
g).css("paddingRight")))?0:parseInt(a("div",g).css("paddingRight"));b.cdpad+=isNaN(parseInt(a(g).css("borderLeftWidth")))?0:parseInt(a(g).css("borderLeftWidth"));b.cdpad+=isNaN(parseInt(a(g).css("borderRightWidth")))?0:parseInt(a(g).css("borderRightWidth"));b.cdpad+=isNaN(parseInt(a(g).css("paddingLeft")))?0:parseInt(a(g).css("paddingLeft"));b.cdpad+=isNaN(parseInt(a(g).css("paddingRight")))?0:parseInt(a(g).css("paddingRight"));a(b.bDiv).before(b.cDrag);var s=a(b.bDiv).height(),q=a(b.hDiv).height();
a(b.cDrag).css({top:-q+"px"});a("thead tr:first th",b.hDiv).each(function(){var d=document.createElement("div");a(b.cDrag).append(d);c.cgwidth||(c.cgwidth=a(d).width());a(d).css({height:s+q}).mousedown(function(a){b.dragStart("colresize",a,this)}).dblclick(function(){b.autoResizeColumn(this)});a.browser.msie&&7>a.browser.version&&(b.fixHeight(a(b.gDiv).height()),a(d).hover(function(){b.fixHeight();a(this).addClass("dragging")},function(){b.colresize||a(this).removeClass("dragging")}))})}c.striped&&
a("tbody tr:odd",b.bDiv).addClass("erow");c.resizable&&"auto"!=c.height&&(b.vDiv.className="vGrip",a(b.vDiv).mousedown(function(a){b.dragStart("vresize",a)}).html("<span></span>"),a(b.bDiv).after(b.vDiv));c.resizable&&"auto"!=c.width&&!c.nohresize&&(b.rDiv.className="hGrip",a(b.rDiv).mousedown(function(a){b.dragStart("vresize",a,!0)}).html("<span></span>").css("height",a(b.gDiv).height()),a.browser.msie&&7>a.browser.version&&a(b.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")}),
a(b.gDiv).append(b.rDiv));if(c.usepager){b.pDiv.className="pDiv";b.pDiv.innerHTML='<div class="pDiv2"></div>';a(b.bDiv).after(b.pDiv);g=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">'+c.pagetext+' <input type="text" size="4" value="1" /> '+c.outof+' <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';
a("div",b.pDiv).html(g);a(".pReload",b.pDiv).click(function(){b.populate()});a(".pFirst",b.pDiv).click(function(){b.changePage("first")});a(".pPrev",b.pDiv).click(function(){b.changePage("prev")});a(".pNext",b.pDiv).click(function(){b.changePage("next")});a(".pLast",b.pDiv).click(function(){b.changePage("last")});a(".pcontrol input",b.pDiv).keydown(function(a){13==a.keyCode&&b.changePage("input")});a.browser.msie&&7>a.browser.version&&a(".pButton",b.pDiv).hover(function(){a(this).addClass("pBtnOver")},
function(){a(this).removeClass("pBtnOver")});if(c.useRp){g=i="";for(j=0;j<c.rpOptions.length;j++)c.rp==c.rpOptions[j]?g='selected="selected"':g="",i+="<option value='"+c.rpOptions[j]+"' "+g+" >"+c.rpOptions[j]+"&nbsp;&nbsp;</option>";a(".pDiv2",b.pDiv).prepend("<div class='pGroup'><select name='rp'>"+i+"</select></div> <div class='btnseparator'></div>");a("select",b.pDiv).change(function(){c.onRpChange?c.onRpChange(+this.value):(c.newp=1,c.rp=+this.value,b.populate())})}if(c.searchitems){a(".pDiv2",
b.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");a(".pSearch",b.pDiv).click(function(){a(b.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",b.gDiv).trigger("focus")})});b.sDiv.className="sDiv";i=c.searchitems;g=j="";for(k=0;k<i.length;k++)""==c.qtype&&1==i[k].isdefault?(c.qtype=i[k].name,g='selected="selected"'):g="",j+="<option value='"+i[k].name+"' "+g+" >"+i[k].display+"&nbsp;&nbsp;</option>";""==
c.qtype&&(c.qtype=i[0].name);a(b.sDiv).append("<div class='sDiv2'>"+c.findtext+" <input type='text' value='"+c.query+"' size='30' name='q' class='qsbox' />  <select name='qtype'>"+j+"</select></div>");a("input[name=q]",b.sDiv).keydown(function(a){13==a.keyCode&&b.doSearch()});a("select[name=qtype]",b.sDiv).keydown(function(a){13==a.keyCode&&b.doSearch()});a("input[value=Clear]",b.sDiv).click(function(){a("input[name=q]",b.sDiv).val("");c.query="";b.doSearch()});a(b.bDiv).after(b.sDiv)}}a(b.pDiv,b.sDiv).append("<div style='clear:both'></div>");
c.title&&(b.mDiv.className="mDiv",b.mDiv.innerHTML='<div class="ftitle">'+c.title+"</div>",a(b.gDiv).prepend(b.mDiv),c.showTableToggleBtn&&(a(b.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>'),a("div.ptogtitle",b.mDiv).click(function(){a(b.gDiv).toggleClass("hideBody");a(this).toggleClass("vsble")})));b.cdropleft=document.createElement("span");b.cdropleft.className="cdropleft";b.cdropright=document.createElement("span");b.cdropright.className="cdropright";
b.block.className="gBlock";g=a(b.bDiv).height();i=b.bDiv.offsetTop;a(b.block).css({width:b.bDiv.style.width,height:g,background:"white",position:"relative",marginBottom:-1*g,zIndex:1,top:i,left:"0px"});a(b.block).fadeTo(0,c.blockOpacity);if(a("th",b.hDiv).length){b.nDiv.className="nDiv";b.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(b.nDiv).css({marginBottom:-1*g,display:"none",top:i}).noSelect();var p=0;a("th div",b.hDiv).each(function(){var c='checked="checked"';
"none"==a("th[axis='col"+p+"']",b.hDiv)[0].style.display&&(c="");a("tbody",b.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+c+' class="togCol" value="'+p+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");p++});a.browser.msie&&7>a.browser.version&&a("tr",b.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")});a("td.ndcol2",b.nDiv).click(function(){return a("input:checked",b.nDiv).length<=c.minColToggle&&a(this).prev().find("input")[0].checked?
!1:b.toggleCol(a(this).prev().find("input").val())});a("input.togCol",b.nDiv).click(function(){if(a("input:checked",b.nDiv).length<c.minColToggle&&0==this.checked)return!1;a(this).parent().next().trigger("click")});a(b.gDiv).prepend(b.nDiv);a(b.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){return a(b.nDiv).toggle(),!0});c.showToggleBtn&&a(b.gDiv).prepend(b.nBtn)}return a(b.iDiv).addClass("iDiv").css({display:"none"}),a(b.bDiv).append(b.iDiv),a(b.bDiv).hover(function(){a(b.nDiv).hide();
a(b.nBtn).hide()},function(){b.multisel&&(b.multisel=!1)}),a(b.gDiv).hover(function(){},function(){a(b.nDiv).hide();a(b.nBtn).hide()}),a(document).mousemove(function(a){b.dragMove(a)}).mouseup(function(){b.dragEnd()}).hover(function(){},function(){b.dragEnd()}),a.browser.msie&&7>a.browser.version&&(a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",b.gDiv).css({width:"100%"}),a(b.gDiv).addClass("ie6"),"auto"!=c.width&&a(b.gDiv).addClass("ie6fullwidthbug")),b.rePosDrag(),b.fixHeight(),l.p=c,l.grid=b,
c.url&&c.autoload&&b.populate(),l};var o=!1;a(document).ready(function(){o=!0});a.fn.flexigrid=function(l){return this.each(function(){if(o)a.addFlex(this,l);else{a(this).hide();var c=this;a(document).ready(function(){a.addFlex(c,l)})}})};a.fn.flexReload=function(){return this.each(function(){this.grid&&this.p.url&&this.grid.populate()})};a.fn.flexOptions=function(l){return this.each(function(){this.grid&&a.extend(this.p,l)})};a.fn.flexToggleCol=function(a,c){return this.each(function(){this.grid&&
this.grid.toggleCol(a,c)})};a.fn.flexAddData=function(a){return this.each(function(){this.grid&&this.grid.addData(a)})};a.fn.noSelect=function(l){return null==l||l?this.each(function(){a.browser.msie||a.browser.safari?a(this).bind("selectstart",function(){return!1}):a.browser.mozilla?(a(this).css("MozUserSelect","none"),a("body").trigger("focus")):a.browser.opera?a(this).bind("mousedown",function(){return!1}):a(this).attr("unselectable","on")}):this.each(function(){a.browser.msie||a.browser.safari?
a(this).unbind("selectstart"):a.browser.mozilla?a(this).css("MozUserSelect","inherit"):a.browser.opera?a(this).unbind("mousedown"):a(this).removeAttr("unselectable","on")})};a.fn.flexSearch=function(){return this.each(function(){this.grid&&this.p.searchitems&&this.grid.doSearch()})}})(jQuery);
